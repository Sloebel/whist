(this.webpackJsonpwhist=this.webpackJsonpwhist||[]).push([[0],{195:function(e,t,a){},225:function(e,t,a){e.exports=a.p+"static/media/cards.03003d3d.png"},259:function(e,t,a){e.exports=a(499)},269:function(e,t,a){},434:function(e,t,a){},449:function(e,t,a){},454:function(e,t,a){},467:function(e,t,a){},472:function(e,t,a){},473:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){},477:function(e,t,a){},495:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"createUser",(function(){return S})),a.d(n,"signInUser",(function(){return k})),a.d(n,"signOut",(function(){return C}));var r={};a.r(r),a.d(r,"doCreateUser",(function(){return O})),a.d(r,"onceGetUsers",(function(){return j})),a.d(r,"onceGetLeagues",(function(){return N}));var l=a(0),c=a.n(l),i=a(4),o=a.n(i),s=(a(264),a(6)),u=a(7),d=a(21),m=a(8),h=a(9),g=a(83),p=a(225),f=a.n(p),v=a(152),b=a.n(v),y=(a(265),a(267),b.a.initializeApp({apiKey:"AIzaSyCBrRBBfQTCAF5rqj_A8fXN4jMZlZ310RM",authDomain:"whist-d4d9b.firebaseapp.com",databaseURL:"https://whist-d4d9b.firebaseio.com",projectId:"whist-d4d9b",storageBucket:"whist-d4d9b.appspot.com",messagingSenderId:"630677405872"})),E=b.a.auth(),w=b.a.database(),S=function(e,t){return E.createUserWithEmailAndPassword(e,t)},k=function(e,t){return E.signInWithEmailAndPassword(e,t)},C=function(){return E.signOut()},O=function(e,t){return w.ref("users/".concat(e)).set(t)},j=function(){return w.ref("users").once("value")},N=function(){return w.ref("leagues").once("value")},R=c.a.createContext(null),D=function(e){return function(t){Object(h.a)(n,t);var a=Object(m.a)(n);function n(e){var t;return Object(s.a)(this,n),(t=a.call(this,e)).state={authUser:null},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.auth().onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"render",value:function(){var t=this.state.authUser;return c.a.createElement(R.Provider,{value:t},c.a.createElement(e,this.props))}}]),n}(c.a.Component)},x=(a(269),a(270),a(49),a(16)),L=(a(158),a(46)),M=(a(119),a(54)),P=a(37),I=a(503),B=a(504),T=a(505),A=(a(195),M.a.Item),W=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={isLoading:!1},e.handleSubmit=function(t){e.setState({isLoading:!0});var a=e.props.history,r=t.email,l=t.password;n.signInUser(r,l).then((function(e){console.log(e),a.push("/")})).catch((function(t){t.code,t.message;alert(t.message),e.setState({isLoading:!1})}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.history,a=this.state.isLoading;return c.a.createElement(R.Consumer,null,(function(n){return n?c.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},c.a.createElement("p",null,"You are already logged in,"),c.a.createElement(x.a,{type:"primary",size:"small",onClick:function(){return t.goBack()},icon:c.a.createElement(T.a,null)},"Go back")," ","or ",c.a.createElement(P.b,{to:"/"},"Go Home")):c.a.createElement(M.a,{onFinish:e.handleSubmit,className:"login-form"},c.a.createElement(A,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},c.a.createElement(L.a,{prefix:c.a.createElement(I.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email",size:"large"})),c.a.createElement(A,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(L.a,{prefix:c.a.createElement(B.a,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"password",size:"large"})),c.a.createElement(A,null,c.a.createElement(x.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button",loading:a},"Log in"),"Or ",c.a.createElement(P.b,{to:"/signup"},"register now!")))}))}}]),a}(c.a.Component),z=Object(g.e)(W),U=a(506),G=a(507),H=M.a.Item,V=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(s.a)(this,a),(l=t.call(this,e)).formRef=c.a.createRef(),l.handleConfirmBlur=function(e){var t=e.target.value;l.setState({confirmDirty:l.state.confirmDirty||!!t})},l.compareToFirstPassword=function(e,t,a){var n=l.formRef.current;n&&t&&t!==n.getFieldValue("password")?a("Two passwords that you enter is inconsistent!"):a()},l.validateToNextPassword=function(e,t,a){var n=l.formRef.current;t&&l.state.confirmDirty&&n&&n.validateFields(["confirm"]),a()},l.handleSubmit=function(e){l.setState({isLoading:!0});var t=e.name,a=e.nickname,c=e.email,i=e.password;n.createUser(c,i).then((function(e){e&&e.user&&r.doCreateUser(e.user.uid,{name:t,nickname:a,email:c}).then((function(){l.props.history.push("/")})).catch((function(e){e.code,e.message;alert(e.message),l.setState({isLoading:!1})}))})).catch((function(e){e.code,e.message;alert(e.message),l.setState({isLoading:!1})}))},l.state={confirmDirty:!1,isLoading:!1},l}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.isLoading;return c.a.createElement(M.a,{onFinish:this.handleSubmit,ref:this.formRef,className:"login-form"},c.a.createElement(H,{name:"name",rules:[{required:!0,message:"Please input your name!"}]},c.a.createElement(L.a,{prefix:c.a.createElement(U.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name",size:"large"})),c.a.createElement(H,{name:"nickname",rules:[{required:!0,message:"Please input your Nickname!"}]},c.a.createElement(L.a,{prefix:c.a.createElement(G.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Nickname",size:"large"})),c.a.createElement(H,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}]},c.a.createElement(L.a,{prefix:c.a.createElement(I.a,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",size:"large"})),c.a.createElement(H,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{validator:this.validateToNextPassword}]},c.a.createElement(L.a,{prefix:c.a.createElement(B.a,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",size:"large"})),c.a.createElement(H,{name:"confirm",rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]},c.a.createElement(L.a,{prefix:c.a.createElement(B.a,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm password",onBlur:this.handleConfirmBlur,size:"large"})),c.a.createElement(H,null,c.a.createElement(x.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button",loading:e},"Sign Up")))}}]),a}(c.a.Component),_=Object(g.e)(V),F=(a(109),a(60)),q=function(e){return function(t){var a=function(a){Object(h.a)(r,a);var n=Object(m.a)(r);function r(){return Object(s.a)(this,r),n.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var t=this;y.auth().onAuthStateChanged((function(a){e(a)||t.props.history.push("/login")}))}},{key:"render",value:function(){var e=this;return c.a.createElement(R.Consumer,null,(function(a){return a?c.a.createElement(t,e.props):c.a.createElement("div",{className:"full-view loader"},c.a.createElement(F.a,{size:"large",style:{width:"100%",position:"relative",top:"50%"}}))}))}}]),r}(c.a.Component);return Object(g.e)(a)}},Y=a(63),K=(a(110),a(61)),X=a(26),J=(a(177),a(53)),Q=M.a.Item,Z=J.a.Option,$=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={showDialog:e.props.visible,users:{},count:0,loading:!0,addPlayerCollapse:[],savingLeagueLoader:!1},e.addPlayerCollapseChange=function(t){e.setState({addPlayerCollapse:t})},e.focusPlayersSelect=function(){this.playersSelect.focus()},e}return Object(u.a)(a,[{key:"fetchPlayers",value:function(){var e=this;j().then((function(t){t.val()?e.setState({users:t.val(),loading:!1}):e.setState({loading:!1})}))}},{key:"componentDidMount",value:function(){this.fetchPlayers()}},{key:"onCreateLeague",value:function(){var e=this,t=this.props.form,a=this.state.users,n=t.getFieldsValue();t.validateFields(n,(function(t,n){if(!t){var r=n.description;e.setState({savingLeagueLoader:!0});var l=n.players.map((function(e){return{key:e,nickname:a[e].nickname}}));N().then((function(t){var a=t.val()&&t.val().lastID,c=a?a+1:1;y.database().ref("leagues/list/_"+c).set(Object(X.a)({},n,{players:l,description:r||"",leagueID:c,active:!0})).then((function(){return e.closeModal(c)})),y.database().ref("leagues/lastID").set(c)}))}}))}},{key:"closeModal",value:function(e){this.leagueID=e,this.setState({showDialog:!1})}},{key:"render",value:function(){var e=this,t=this.props.afterClose,a=this.state,n=a.showDialog,r=a.users,l=a.loading,i=a.savingLeagueLoader;return c.a.createElement(K.a,{title:"Create League",visible:n,destroyOnClose:!0,maskClosable:!1,confirmLoading:i,onOk:function(){return e.onCreateLeague()},onCancel:function(){return e.closeModal()},afterClose:function(){return t(e.leagueID)},width:"600px",okText:"Save & Play"},c.a.createElement(M.a,{layout:"vertical"},c.a.createElement(Q,{label:"Title",name:"title",rules:[{required:!0,message:"Please input the league title!"}]},c.a.createElement(L.a,null)),c.a.createElement(Q,{label:"Description",name:"description"},c.a.createElement(L.a,{type:"textarea"})),c.a.createElement(Q,{label:"Players",name:"players",rules:[{required:!0,len:4,type:"array"}]},c.a.createElement(J.a,{mode:"multiple",ref:function(t){return e.playersSelect=t},notFoundContent:l?c.a.createElement(F.a,{size:"small"}):null},Object.keys(r).map((function(e){return c.a.createElement(Z,{key:e,value:e},r[e].nickname)}))))))}}]),a}(l.Component),ee=Object(g.e)($),te=(a(431),a(153)),ae=(a(434),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={showDialog:e.props.visible},e}return Object(u.a)(a,[{key:"closeModal",value:function(e){this.leagueID=e,this.setState({showDialog:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.afterClose,n=t.activeLeagues,r=this.state.showDialog;return c.a.createElement(K.a,{title:"Resume League",visible:r,destroyOnClose:!0,maskClosable:!1,width:"600px",footer:null,onCancel:function(){return e.closeModal()},afterClose:function(){return a(e.leagueID)}},c.a.createElement("p",null,"List of open leagues"),c.a.createElement(te.a,{itemLayout:"horizontal",dataSource:n,renderItem:function(t){return c.a.createElement(te.a.Item,null,c.a.createElement(te.a.Item.Meta,{title:c.a.createElement("a",{onClick:function(){return e.closeModal(t.leagueID)}},t.title)}))}}))}}]),a}(l.Component)),ne=Object(g.e)(ae),re=a(91),le=a(55),ce=a(84),ie=function(){return window.navigator.maxTouchPoints||"ontouchstart"in document.documentElement};function oe(e,t,a){return e.addEventListener(t,a),function(){e.removeEventListener(t,a)}}a(449);var se={stiffness:180,damping:10},ue={stiffness:120,damping:17};function de(e,t,a){return Math.max(Math.min(e,a),t)}var me,he=["#EF767A","#9acaff","#49BEAA","#49DCB1"],ge=[[80,0],[160,80],[80,160],[0,80]],pe=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleTouchStart=function(e,t,a){n.handleMouseDown(e,t,a.touches[0])},n.handleTouchMove=function(e){e.preventDefault(),n.handleMouseMove(e.touches[0])},n.handleMouseMove=function(e){var t=e.pageX,a=e.pageY,r=n.state,l=r.order,c=r.lastPress,i=r.isPressed,o=Object(re.a)(r.mouseCircleDelta,2),s=o[0],u=o[1];if(i){var d=[t-s,a-u],m=de(Math.round(d[0]/80),0,2),h=de(Math.round(d[1]/80),0,Math.floor(2)),g=null;1===m&&0===h?g=0:2===m&&1===h?g=1:1===m&&2===h?g=2:0===m&&1===h&&(g=3);var p=l.findIndex((function(e){return e.key===c})),f="number"===typeof g&&g!==p&&function(e,t,a){var n=Object(le.a)(e);if(Math.abs(t-a)===e.length-1){var r=[n[t],n[a]];n[a]=r[0],n[t]=r[1]}else if(t<a&&a-t>1){var l=n[t];n.splice(t,1),n.unshift(n.pop()),n.splice(a,0,l)}else{var c=n[t];n.splice(t,1),n.splice(a,0,c)}return n}(l,p,g);n.setState({mouseXY:d,order:f||Object(le.a)(l),from:f?p:n.state.from,to:f?g:n.state.to})}},n.handleMouseDown=function(e,t,a){var r=Object(re.a)(t,2),l=r[0],c=r[1],i=a.pageX,o=a.pageY;n.setState({lastPress:e,isPressed:!0,mouseCircleDelta:[i-l,o-c],mouseXY:[l,c]})},n.handleMouseUp=function(){if(n.setState({isPressed:!1,mouseCircleDelta:[0,0]}),"function"===typeof n.props.onChange){var e=n.state,t=e.order,a=e.from,r=e.to;n.props.onChange(t,a,r)}},n.state={mouseXY:[0,0],mouseCircleDelta:[0,0],lastPress:null,isPressed:!1,order:e.players,from:null,to:null},n.colors=e.players.reduce((function(e,t,a){return e[t.key]=he[a],e}),{}),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.unListenTouchmove=oe(window,"touchmove",this.handleTouchMove),this.unListenTouchend=oe(window,"touchend",this.handleMouseUp),this.unListenMousemove=oe(window,"mousemove",this.handleMouseMove),this.unListenMouseup=oe(window,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.unListenTouchmove(),this.unListenTouchend(),this.unListenMousemove(),this.unListenMouseup()}},{key:"render",value:function(){var e=this,t=this.state,a=t.order,n=t.lastPress,r=t.isPressed,l=t.mouseXY;return c.a.createElement("div",{className:"drag-pad"},c.a.createElement("div",{className:"drag-pad-content"},a.map((function(t,i){var o,s,u,d=a.findIndex((function(e){return e.key===t.key}));if(t.key===n&&r){var m=Object(re.a)(l,2);s=m[0],u=m[1],o={translateX:s,translateY:u,scale:Object(ce.spring)(1.2,se),boxShadow:Object(ce.spring)((s-95)/15,se)}}else{var h=Object(re.a)(ge[d],2);s=h[0],u=h[1],o={translateX:Object(ce.spring)(s,ue),translateY:Object(ce.spring)(u,ue),scale:Object(ce.spring)(1,se),boxShadow:Object(ce.spring)((s-95)/15,se)}}return c.a.createElement(ce.Motion,{key:t.key,style:o},(function(a){var r=a.translateX,l=a.translateY,i=a.scale,o=a.boxShadow;return c.a.createElement("div",{onMouseDown:e.handleMouseDown.bind(null,t.key,[s,u]),onTouchStart:e.handleTouchStart.bind(null,t.key,[s,u]),className:"player-icon",style:{backgroundColor:e.colors[t.key],WebkitTransform:"translate3d(".concat(r,"px, ").concat(l,"px, 0) scale(").concat(i,")"),transform:"translate3d(".concat(r,"px, ").concat(l,"px, 0) scale(").concat(i,")"),zIndex:t.key===n?99:d,boxShadow:"".concat(o,"px 5px 5px rgba(0,0,0,0.5)")}},c.a.createElement(U.a,null),c.a.createElement("span",null,t.nickname))}))}))))}}]),a}(c.a.Component),fe=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showDialog:n.props.visible,order:e.players},n.handleOnCancel=n.handleOnCancel.bind(Object(d.a)(n)),n.handleOnOk=n.handleOnOk.bind(Object(d.a)(n)),n.afterClose=n.afterClose.bind(Object(d.a)(n)),n.handleDragChange=n.handleDragChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleOnCancel",value:function(){this.setState({showDialog:!1})}},{key:"handleOnOk",value:function(){this.setState({showDialog:!1});var e=this.props.onOk;"function"===typeof e&&e(this.state.order)}},{key:"afterClose",value:function(){var e=this.props.onAfterClose;"function"===typeof e&&e()}},{key:"handleDragChange",value:function(e,t,a){this.setState({order:e,from:t,to:a})}},{key:"render",value:function(){var e=this.props.players,t=this.state.showDialog;return c.a.createElement(K.a,{title:"Reorder Players",visible:t,destroyOnClose:!0,maskClosable:!1,width:"600px",onOk:this.handleOnOk,onCancel:this.handleOnCancel,afterClose:this.afterClose},c.a.createElement(pe,{players:e,onChange:this.handleDragChange}))}}]),a}(l.Component),ve="NEW_LEAGUE",be="RESUME_LEAGUE",ye="REORDER_PLAYERS",Ee=(me={},Object(Y.a)(me,ve,ee),Object(Y.a)(me,be,ne),Object(Y.a)(me,ye,fe),me),we=function(e){var t=e.dialog,a=e.dialogProps,n=Ee[t];return c.a.createElement(n,a)},Se=function(e){return c.a.createElement("ul",{className:"app-menu"},e.items.map((function(e,t){var a=e.onClick,n=e.text,r=e.dialog,l=e.dialogProps,i=e.disabled;return c.a.createElement("li",{key:t},c.a.createElement(x.a,{onClick:a,size:"large",disabled:i,block:!0},n),r&&l.visible?c.a.createElement(we,{dialog:r,dialogProps:l}):"")})))},ke=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={activeLeagues:[],newLeague:!1,resumeLeague:!1},e.activeLeagues=y.database().ref("leagues/list").orderByChild("active").equalTo(!0),e}return Object(u.a)(a,[{key:"fetch",value:function(){var e=this;this.activeLeagues.on("value",(function(t){if(t.val()){var a=y.auth().currentUser.uid;e.setState({activeLeagues:Object.values(t.val()).filter((function(e){var t=e.players;return Object.values(t).some((function(e){return e.key===a}))})),loading:!1})}}))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.activeLeagues.off("value")}},{key:"showResumeLeagueDialog",value:function(){this.setState({resumeLeague:!0})}},{key:"closeResumeLeagueDialog",value:function(e){this.setState({resumeLeague:!1}),this.navigateToLeague(e)}},{key:"showNewLeagueDialog",value:function(){this.setState({newLeague:!0})}},{key:"closeNewLeagueDialog",value:function(e){this.setState({newLeague:!1}),this.navigateToLeague(e)}},{key:"navigateToLeague",value:function(e){e&&this.props.history.push("".concat("/league","/")+e)}},{key:"render",value:function(){return c.a.createElement("div",{className:"app-main"},c.a.createElement(Se,{items:[{text:"Resume League",onClick:this.showResumeLeagueDialog.bind(this),dialog:be,disabled:0===this.state.activeLeagues.length,dialogProps:{afterClose:this.closeResumeLeagueDialog.bind(this),visible:this.state.resumeLeague,activeLeagues:this.state.activeLeagues}},{text:"Create League",onClick:this.showNewLeagueDialog.bind(this),dialog:ve,dialogProps:{afterClose:this.closeNewLeagueDialog.bind(this),visible:this.state.newLeague}},{text:"Settings"},{text:"Scores"},{text:"Sign Out",onClick:n.signOut}]}))}}]),a}(l.Component),Ce=q((function(e){return!!e}))(ke),Oe=(a(183),a(47)),je=(a(224),a(34)),Ne=(a(222),a(57)),Re=a(512),De=a(513),xe=a(514),Le=a(515),Me=(a(454),a(500),a(254)),Pe=(a(501),a(255)),Ie=a(257),Be=a(192),Te={SPADE:"SPADE",HART:"HART",DIAMOND:"DIAMOND",CLUB:"CLUB",NT:"NT"},Ae=M.a.Item,We=J.a.Option,ze=c.a.createContext(),Ue=function(e){var t=e.form,a=(e.index,Object(Be.a)(e,["form","index"]));return c.a.createElement(ze.Provider,{value:t},c.a.createElement("tr",a))},Ge=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},(function(){t&&e.input.focus()}))},e.handleClickOutside=function(t){e.state.editing&&e.cell!==t.target&&!e.cell.contains(t.target)&&"LI"!==t.target.tagName&&setTimeout(e.toggleEdit,300)},e.save=function(t){var a=e.props,n=a.record,r=a.handleSave;setTimeout((function(){e.form.validateFields((function(a,l){a||(e.toggleEdit(),r(Object(X.a)({},n,{},l),t))}))}),300)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.editable&&document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){this.props.editable&&document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"getOptionList",value:function(e){return"bidWin"===e?Object(le.a)(Array(15)).map((function(e,t){var a=t-1<0?"":t-1;return c.a.createElement(We,{key:t,value:"".concat(a)},a)})):"trump"===e?Object.values(Te).map((function(e,t){return c.a.createElement(We,{key:t,value:"".concat(e)},e)})):void 0}},{key:"render",value:function(){var e=this,t=this.state.editing,a=this.props,n=a.editable,r=a.editorType,l=a.dataIndex,i=a.player,o=a.record,s=(a.index,a.handleSave,Object(Be.a)(a,["editable","editorType","dataIndex","player","record","index","handleSave"]));return c.a.createElement("td",Object.assign({ref:function(t){return e.cell=t}},s),n?c.a.createElement(ze.Consumer,null,(function(a){return e.form=a,t?c.a.createElement(Ae,{style:{margin:0}},a.getFieldDecorator(l,{initialValue:o[l]})(c.a.createElement(J.a,{ref:function(t){return e.input=t},onSelect:function(){return e.save(i)},defaultOpen:!0,showArrow:!1,size:"small",style:{width:60}},e.getOptionList(r)))):c.a.createElement("div",{className:"editable-cell-value-wrap",onClick:e.toggleEdit},s.children)})):s.children)}}]),a}(l.Component),He=(a(467),a(133),a(31)),Ve=(a(134),a(22)),_e=(a(468),a(189)),Fe=a(244),qe=(a(470),a(258)),Ye=(a(184),a(36)),Ke=a(502),Xe=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 511.96 511.96",style:{enableBackground:"new 0 0 511.96 511.96"},width:"1em",height:"1em"},c.a.createElement("g",null,c.a.createElement("path",{d:"M302.728,390.351c16.49,15.934,26.368,25.759,55.905,24.541c43.494-1.783,83.871-25.459,106.364-62.729 c38.78-64.247,17.576-128.53-23.702-166.824L272.705,6.528c-9.507-8.704-24.082-8.704-33.589,0L68.073,185.34 c-40.13,37.226-57.256,99.037-23.729,161.483c21.283,39.645,61.767,66.357,106.726,68.087c29.281,1.121,40.801-8.66,57.759-24.488 c4.458-4.167,11.767-1.033,11.767,5.076l0.009,29.987c0,16.172-4.228,32.071-12.253,46.115l-15.519,27.154 c-3.354,5.888,0.892,13.206,7.671,13.206h110.813c6.78,0,11.034-7.318,7.671-13.206l-15.519-27.154 c-8.024-14.045-12.244-29.943-12.244-46.115v-30.296C291.226,389.213,298.429,386.202,302.728,390.351"}),c.a.createElement("path",{style:{fill:"#2A2D33"},d:"M427.21,329.362c-8.701,14.419-21.869,26.091-37.482,33.362c-10.397,4.841-21.597,7.606-32.91,8.072 c-4.871,0.201-8.657,4.312-8.457,9.184c0.201,4.871,4.312,8.657,9.184,8.457c13.661-0.563,27.144-3.891,39.635-9.707 c18.759-8.735,34.611-22.785,45.145-40.244c19.021-31.51,20.189-64.061,7.087-94.822c-1.911-4.485-7.096-6.573-11.581-4.662 c-4.485,1.911-6.573,7.096-4.662,11.581C444.131,276.316,443.177,302.911,427.21,329.362z"})))},Je=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 510.977 510.977",style:{enableBackground:"new 0 0 510.977 510.977"},width:"1em",height:"1em"},c.a.createElement("g",null,c.a.createElement("path",{style:{fill:"#D71E00"},d:"M255.22,105.177c19.535-49.77,61.325-87.79,113.231-87.79c43.705,0,79.625,23.111,108.871,54.44 c38.859,41.622,56.17,137.216-15.863,209.24c-36.546,36.546-205.815,212.524-205.815,212.524S86.384,317.613,49.838,281.066 c-72.033-72.024-55.578-167.618-15.863-209.24c29.581-31.002,65.165-54.44,108.871-54.44 C194.751,17.386,235.685,55.407,255.22,105.177"}),c.a.createElement("path",{style:{fill:"#B21606"},d:"M429.848,94.824c26.006,21.865,39.538,63.103,31.858,97.341c-0.675,2.978-1.395,6.021-2.154,9.091 c-1.17,4.733,1.718,9.518,6.45,10.689c4.733,1.17,9.518-1.718,10.689-6.45c0.787-3.183,1.534-6.339,2.238-9.446 c9.114-40.635-6.622-88.592-37.718-114.736c-16.942-14.251-37.574-20.273-68.03-20.273c-4.875,0-8.828,3.952-8.828,8.828 s3.952,8.828,8.828,8.828C399.8,78.694,416.45,83.554,429.848,94.824z"})))},Qe=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},width:"1em",height:"1em"},c.a.createElement("g",null,c.a.createElement("polygon",{style:{fill:"#D71E00"},points:"256,0 45.714,256 256,512 466.286,256 \t"}),c.a.createElement("path",{style:{fill:"#B21606"},d:"M248.872,448.656c-3.162,3.937-2.533,9.692,1.404,12.853c3.937,3.162,9.692,2.533,12.853-1.404 l64-79.698c3.162-3.937,2.533-9.692-1.404-12.853c-3.937-3.162-9.692-2.533-12.853,1.404L248.872,448.656z"})))},Ze=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 511.998 511.998",style:{enableBackground:"new 0 0 511.998 511.998"},width:"1em",height:"1em"},c.a.createElement("g",null,c.a.createElement("path",{d:"M419.381,199.229c-26.651-12.378-51.541-12.674-74.177-7.186c18.441-21.827,29.058-50.472,27.396-81.642 C369.438,51,320.017,2.36,260.58,0.087c-66.578-2.542-121.353,50.67-121.353,116.682c0,28.699,10.393,54.937,27.567,75.273 c-22.636-5.488-47.526-5.192-74.177,7.186c-41.023,19.061-69.569,59.401-70.153,104.628 c-0.835,65.204,51.757,118.317,116.763,118.317c31.412,0,59.859-12.459,80.842-32.633v34.403c0,16.501-4.303,32.714-12.495,47.041 l-15.755,27.576c-3.422,5.991,0.907,13.438,7.797,13.438h112.766c6.899,0,11.219-7.446,7.797-13.438l-15.755-27.576 c-8.183-14.327-12.495-30.54-12.495-47.041V389.54c20.992,20.175,49.439,32.633,80.842,32.633 c65.006,0,117.607-53.113,116.763-118.317C488.95,258.629,460.403,218.289,419.381,199.229"}),c.a.createElement("path",{style:{fill:"#2A2D33"},d:"M423.915,355.877c-13.621,13.805-31.752,21.385-51.142,21.385c-4.961,0-8.982,4.022-8.982,8.982 c0,4.961,4.022,8.982,8.982,8.982c24.196,0,46.934-9.506,63.927-26.729c16.991-17.2,26.197-40.066,25.888-64.288 c-0.063-4.96-4.136-8.93-9.096-8.867c-4.96,0.063-8.93,4.136-8.867,9.096C444.872,323.859,437.529,342.095,423.915,355.877z"})))},$e=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},width:"1em",height:"1em"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M170.256,403.875c10.65-12.234,17.122-28.196,17.122-45.652c0-38.393-31.234-69.627-69.627-69.627 c-14.451,0-27.886,4.428-39.024,11.994c-1.632-10.049-2.463-20.254-2.463-30.537c0-49.249,18.842-95.868,53.054-131.273 c25.408-26.294,57.27-44.329,92.103-52.568l-23.142,27.868l23.133,19.21l59.366-71.49L201.539,17.43l-14.69,26.236l24.912,13.95 c-39.327,9.833-75.273,30.476-104.065,60.27c-39.659,41.041-61.5,95.081-61.5,152.168c0,20.2,2.752,40.155,8.17,59.414 c-3.996,8.772-6.241,18.504-6.241,28.756c0,17.491,6.497,33.483,17.185,45.726c-37.719,14.016-64.668,50.375-64.668,92.914v15.034 h234.473v-15.034C235.117,454.25,208.078,417.838,170.256,403.875z M117.752,318.665c21.813,0,39.558,17.746,39.558,39.558 s-17.746,39.558-39.559,39.558c-21.812,0-39.557-17.746-39.557-39.558S95.94,318.665,117.752,318.665z M32.362,481.828 c6.879-30.85,34.471-53.977,67.363-53.977h36.311c32.892,0,60.484,23.128,67.363,53.977H32.362z"}))),c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M511.357,208.266c0-42.611-27.04-79.025-64.86-92.988c10.65-12.233,17.122-28.196,17.122-45.652 C463.619,31.234,432.385,0,393.992,0c-38.393,0-69.627,31.234-69.627,69.626c0,17.491,6.497,33.483,17.186,45.726 c-37.719,14.016-64.667,50.375-64.667,92.915v15.034h171.669c3.701,14.892,5.576,30.234,5.576,45.751 c0,45.405-16.341,89.291-46.014,123.576c-21.289,24.598-48.406,43.143-78.51,54.073l19.818-31.008l-25.335-16.193l-50.044,78.3 L358.173,512l11.325-27.855l-25.967-10.556c33.429-12.822,63.523-33.788,87.321-61.284 c34.401-39.748,53.347-90.623,53.347-143.254c0-15.46-1.611-30.777-4.793-45.751h31.952V208.266z M393.992,30.069 c21.813,0,39.558,17.746,39.558,39.557c0,21.813-17.746,39.558-39.558,39.558s-39.558-17.746-39.558-39.558 C354.434,47.814,372.179,30.069,393.992,30.069z M308.603,193.232c6.879-30.851,34.471-53.978,67.363-53.978h36.311 c32.892,0,60.484,23.128,67.363,53.978H308.603z"}))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null))},et=(a(472),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){return e.props.onChange(t.target.value)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isMobile,a=e.trump;return c.a.createElement(Ye.a.Group,{buttonStyle:"solid",className:"cards-pad",size:"".concat(t?"small":""),value:a,onChange:this.onChange},c.a.createElement(Ye.a.Button,{value:"SPADE",className:"spade card-btn"},c.a.createElement(Ke.a,{component:Xe})),c.a.createElement(Ye.a.Button,{value:"HART",className:"hart card-btn"},c.a.createElement(Ke.a,{component:Je})),c.a.createElement(Ye.a.Button,{value:"DIAMOND",className:"diamond card-btn"},c.a.createElement(Ke.a,{component:Qe})),c.a.createElement(Ye.a.Button,{value:"CLUB",className:"club card-btn"},c.a.createElement(Ke.a,{component:Ze})),c.a.createElement(Ye.a.Button,{value:"NT",className:"NT card-btn"},c.a.createElement("span",null,"NT")))}}]),a}(l.Component)),tt=a(508),at=(a(473),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1})},e.trumpIconMap={SPADE:Xe,HART:Je,DIAMOND:Qe,CLUB:Ze,NT:"NT"},e}return Object(u.a)(a,[{key:"onTrumpSelect",value:function(e){this.props.onChange(e),this.setState({visible:!1})}},{key:"render",value:function(){var e=this.props,t=e.trump,a=e.disabled;return c.a.createElement("div",{className:"cards-modal"},"trump",c.a.createElement(x.a,{ghost:!0,className:"card-btn",onClick:this.showModal,disabled:a},t?"NT"===t?"NT":c.a.createElement(Ke.a,{component:this.trumpIconMap[t]}):c.a.createElement(tt.a,null)),c.a.createElement(K.a,{footer:null,visible:this.state.visible,onCancel:this.handleCancel,className:"cards-modal-dialog"},c.a.createElement(x.a,{className:"card-btn",onClick:this.onTrumpSelect.bind(this,"SPADE")},c.a.createElement(Ke.a,{component:Xe})),c.a.createElement(x.a,{className:"card-btn",onClick:this.onTrumpSelect.bind(this,"HART")},c.a.createElement(Ke.a,{component:Je})),c.a.createElement(x.a,{className:"card-btn",onClick:this.onTrumpSelect.bind(this,"DIAMOND")},c.a.createElement(Ke.a,{component:Qe})),c.a.createElement(x.a,{className:"card-btn",onClick:this.onTrumpSelect.bind(this,"CLUB")},c.a.createElement(Ke.a,{component:Ze})),c.a.createElement(x.a,{className:"card-btn",onClick:this.onTrumpSelect.bind(this,"NT")},"NT")))}}]),a}(l.Component)),nt=(a(474),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getButtons=function(e,t){var a=n.props,r=a.isMobile,l=a.disabled,i=a.disabledNumber,o=r?"default":"large";return Array(t).fill(e).map((function(e,t){return c.a.createElement(x.a,{key:t,onClick:n.onBtnClick,size:o,disabled:l||i===t+e},t+e)}))},n.state={showMore:!1},n.toggleMore=n.toggleMore.bind(Object(d.a)(n)),n.onBtnClick=n.onBtnClick.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"toggleMore",value:function(){this.setState({showMore:!this.state.showMore})}},{key:"onBtnClick",value:function(e){this.props.onSelect(1*e.target.textContent)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,a=e.disabled,n=t?"default":"large",r=this.state.showMore;return c.a.createElement("div",null,c.a.createElement("div",{className:"dial-pad"},r?this.getButtons(10,4):this.getButtons(0,10),c.a.createElement(x.a,{size:n,onClick:this.toggleMore,className:"more-less-btn",disabled:a},r?"Less...":"More...")))}}]),a}(l.Component)),rt=(a(475),"fade-in"),lt="slide-up",ct=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type;this.div.classList.add(t),setTimeout((function(){return e.div.classList.remove(t)}),400)}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.children!==this.props.children){var a=this.props.type;this.div.classList.add(a),setTimeout((function(){return t.div.classList.remove(a)}),400)}}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"",ref:function(t){return e.div=t}},this.props.children)}}]),a}(l.Component),it=function(e){var t=e.name,a=e.bid,n=e.won,r=e.score;return c.a.createElement("div",{className:"player-pad"},c.a.createElement("div",{className:"pad-name"},t,"\xa0",void 0!==r&&c.a.createElement("span",{className:"pad-score"},"[",c.a.createElement(ct,{type:lt},r),"]")),c.a.createElement("div",{className:"pad-bid-won"},"Bid: ","number"===typeof a?a:" "," Won: ",n))},ot="BID",st="WON",ut="ACTIVE",dt="FINISHED",mt=(a(476),a(477),"top"),ht="bottom",gt=function(e){return c.a.createElement("div",{className:"arrow-indicator ".concat(e.direction||"")},c.a.createElement("span",null,c.a.createElement("i",null),c.a.createElement("i",null)),c.a.createElement("i",null),c.a.createElement("span",null,c.a.createElement("i",null),c.a.createElement("i",null)))},pt=K.a.confirm;Oe.a.config({top:100,maxCount:3});var ft=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getNextPlayer=function(e,t){var a=t.findIndex((function(t){return t.index===e}));return t[a+1>3?a+1-4:a+1].index},n.getBeforePlayer=function(e,t){var a=t.findIndex((function(t){return t.index===e}));return t[a-1>-1?a-1:a-1+4].index},n.getBeforePlayers=function(e,t){var a=t.findIndex((function(t){return t.index===e}));return t.filter((function(e){return a!==e.index})).map((function(e){return e.index}))},n.getPlayerAggregateScore=function(e,t,a){var r=e[t];if(!r)return 0;var l=r["aggregateScore".concat(a)];return"number"!==typeof l||r.fell?n.getPlayerAggregateScore(e,t-1,a):l},n.getPlayersButtons=function(){var e=n.props,t=e.allRounds,a=e.currentRound,r=e.players,l=e.isMobile,i=t.length&&t[a-1],o=i.highestBidder;return r.map((function(e,r){var s=e.index,u=e.playerName;return c.a.createElement(qe.a,{key:s,dot:o===s},c.a.createElement(Ye.a.Button,{value:s},c.a.createElement(it,{name:u,bid:i["bid".concat(s)],won:i["won".concat(s)],score:l?n.getPlayerAggregateScore(t,a-1,s):void 0})))}))},n.isAllBids=function(e){return Array(4).fill(1).every((function(t,a){return"number"===typeof e["bid".concat(a)]}))},n.state={selectedPlayer:void 0,reorderPlayersDialogVisible:!1},n.handleSwitchMode=n.handleSwitchMode.bind(Object(d.a)(n)),n.handleCardsPadChange=n.handleCardsPadChange.bind(Object(d.a)(n)),n.handleNumberSelect=n.handleNumberSelect.bind(Object(d.a)(n)),n.setSelectedPlayer=n.setSelectedPlayer.bind(Object(d.a)(n)),n.showChangeHighestBidderConfirm=n.showChangeHighestBidderConfirm.bind(Object(d.a)(n)),n.showChangePlayerDialog=n.showChangePlayerDialog.bind(Object(d.a)(n)),n.handleReorderPlayersAfterClose=n.handleReorderPlayersAfterClose.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleSwitchMode",value:function(e){var t=this.props,a=t.allRounds,n=t.currentRound,r=t.onChange,l=a.length&&a[n-1],c=l.trump;if(0===l.segment)return Oe.a.warning("Total Bids are 13?!?!");var i=this.isAllBids(l);c&&i?(this.setState({selectedPlayer:void 0}),r(Object(X.a)({},l,{inputMode:e?st:ot}))):Oe.a.warning("Bids are not completed")}},{key:"setSelectedPlayer",value:function(e){"radio"===e.target.type&&this.setState({selectedPlayer:e.target.value})}},{key:"handleCardsPadChange",value:function(e){var t=this.props,a=t.allRounds,n=t.currentRound,r=t.onChange,l=a.length&&a[n-1];l.inputMode!==st&&r(Object(X.a)({},l,{trump:e}))}},{key:"handleNumberSelect",value:function(e){var t=this.props,a=t.players,n=t.allRounds,r=t.currentRound,l=t.onChange,c=n.length&&n[r-1],i=c.inputMode,o=c.highestBidder,s=this.state.selectedPlayer,u=(i===ot?"bid":"won")+s,d={};if(i===ot)if(13===r)(e>=5&&!c["bid".concat(o)]||c["bid".concat(o)]<e)&&(d.highestBidder=s);else{var m=this.getNextPlayer(s,a);if(""!==c["bid".concat(m)]&&m!==o)return Oe.a.warning("The Next Player already Bid, Can not change bid");if(!o&&0!==o||o===s){if(e<5)return Oe.a.warning("First Bid should be more then 5");d.highestBidder=s}else if(e>=5)this.showChangeHighestBidderConfirm(l,c,u,e,s,a);else if(!Number.isInteger(c["bid".concat(this.getBeforePlayer(s,a))]))return Oe.a.warning("The Bids are not in the right order!!")}d[u]=e,l(Object(X.a)({},c,{},d),s)}},{key:"calculateDisableNum",value:function(){var e=this.props,t=e.players,a=e.allRounds,n=e.currentRound,r=a.length&&a[n-1],l=r.highestBidder,c=r.inputMode,i=this.state.selectedPlayer;if("number"===typeof i&&c===ot&&this.getNextPlayer(i,t)===l){var o,s=this.getBeforePlayers(i,t),u=0,d=Object(Fe.a)(s);try{for(d.s();!(o=d.n()).done;){var m=o.value,h=r["bid".concat(m)];if(null===h)return;u+=h}}catch(g){d.e(g)}finally{d.f()}return 13-u}}},{key:"showChangeHighestBidderConfirm",value:function(e,t,a,n,r,l){var c=this.getBeforePlayer;pt({title:"Change Highest Bidder?",content:"(will reset the rest of the bids)",okType:"danger",onOk:function(){var l;e(Object(X.a)({},t,(l={bid0:null,bid1:null,bid2:null,bid3:null},Object(Y.a)(l,a,n),Object(Y.a)(l,"highestBidder",r),l)),r)},onCancel:function(){t["bid".concat(c(r,l))]?e(Object(X.a)({},t,Object(Y.a)({},a,n)),r):(Oe.a.warning("The Bids are not in the right order!!"),e(Object(X.a)({},t),r))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isMobile,n=t.allRounds,r=t.currentRound,l=n.length&&n[r-1],i=l.round,o=l.check,s=l.trump,u=l.segment,d=l.inputMode,m=l.fell,h=l.factor,g=this.state,p=g.selectedPlayer,f=g.reorderPlayersDialogVisible,v=this.isAllBids(l),b=this.getPlayersButtons();return a?c.a.createElement(Ye.a.Group,{buttonStyle:"solid",className:"game-pad-container ".concat(m?"round-fell":""),onChange:this.setSelectedPlayer,value:p},c.a.createElement("h3",null,"Round: ",i),c.a.createElement(He.a,{type:"flex",justify:"space-around"},c.a.createElement(Ve.a,null,c.a.createElement(_e.a,{onChange:this.handleSwitchMode,checkedChildren:" Won ",unCheckedChildren:" Bid ",checked:d===st}),c.a.createElement("div",{className:"segment"},"Bids:"," ",c.a.createElement(ct,{type:rt},v?u:"".concat(u&&13+u)),c.a.createElement(gt,{direction:v&&(u>0?mt:ht)})),c.a.createElement("div",null,"Check: ",o?"yes":"no"),c.a.createElement(ct,{type:rt},m?c.a.createElement("div",{className:"fell-indicator"},"round fell"):""),!m&&h>1&&c.a.createElement("div",{className:"factor-indicator"},"x".concat(h))),c.a.createElement(Ve.a,{className:"item item2"},b[0]),c.a.createElement(Ve.a,null,c.a.createElement(at,{trump:s,onChange:this.handleCardsPadChange,disabled:d===st}))),c.a.createElement(He.a,{type:"flex",justify:"space-around"},c.a.createElement(Ve.a,{className:"item item4"},b[3]),c.a.createElement(Ve.a,null,c.a.createElement(nt,{isMobile:a,disabledNumber:this.calculateDisableNum(),onSelect:this.handleNumberSelect,disabled:void 0===p})),c.a.createElement(Ve.a,{className:"item item6"},b[1])),c.a.createElement(He.a,{type:"flex",justify:"center",style:{position:"relative"}},c.a.createElement(Ve.a,{className:"item item8"},b[2]),1===i&&d===ot&&c.a.createElement("div",null,c.a.createElement(x.a,{type:"dashed",shape:"circle",className:"change-players-btn",onClick:this.showChangePlayerDialog},c.a.createElement(Ke.a,{component:$e})),f&&c.a.createElement(Rt.Consumer,null,(function(t){var a=t.players,n=t.reorderPlayers;return c.a.createElement(we,{dialog:ye,dialogProps:{onOk:n,onAfterClose:e.handleReorderPlayersAfterClose,visible:f,players:a}})}))))):c.a.createElement(Ye.a.Group,{buttonStyle:"solid",className:"game-pad-container",onChange:this.setSelectedPlayer,value:p},c.a.createElement("div",{className:"item item1"},c.a.createElement(_e.a,{onChange:this.handleSwitchMode,checkedChildren:" Won ",unCheckedChildren:" Bid ",checked:d===st}),c.a.createElement("div",null,"Bids: ",u),c.a.createElement("div",null,"Check: ",o?"yes":"no")),c.a.createElement("div",{className:"item item2"},b[0]),c.a.createElement(et,{isMobile:a,trump:s,onChange:this.handleCardsPadChange}),c.a.createElement("div",{className:"item item4"},b[3]),c.a.createElement(nt,{isMobile:a,disabledNumber:this.calculateDisableNum(),onSelect:this.handleNumberSelect,disabled:void 0===p}),c.a.createElement("div",{className:"item item6"},b[1]),c.a.createElement("div",{className:"item item8"},b[2]))}},{key:"showChangePlayerDialog",value:function(){this.setState({reorderPlayersDialogVisible:!0})}},{key:"handleReorderPlayersAfterClose",value:function(){this.setState({reorderPlayersDialogVisible:!1})}}]),a}(l.Component),vt=function(e){var t;switch(e){case Te.SPADE:t=c.a.createElement(Ke.a,{component:Xe});break;case Te.HART:t=c.a.createElement(Ke.a,{component:Je});break;case Te.DIAMOND:t=c.a.createElement(Ke.a,{component:Qe});break;case Te.CLUB:t=c.a.createElement(Ke.a,{component:Ze});break;case Te.NT:t="NT"}return{children:t}},bt=function(){return c.a.createElement("div",{className:"full-view loader"},c.a.createElement(F.a,{size:"large",style:{width:"100%",position:"relative",top:"50%"}}))},yt=a(510),Et=a(511),wt=a(509),St=function(e){var t=e.dataSource,a=e.players,n=e.currentRound,r=e.leagueScores,l=e.gameID;return c.a.createElement("div",{className:"game-table"},c.a.createElement("h3",{className:"game-header"},"Game ",l),c.a.createElement(He.a,{gutter:1,className:"table-header",style:{marginBottom:1}},c.a.createElement(Ve.a,{span:4},c.a.createElement("div",{className:"table-cell"},"round")),kt(a)),t.map((function(e,t){return c.a.createElement(He.a,{gutter:1,className:"table-row ".concat(n-1===t?"current-round":""," ").concat(e.fell?"round-fell":""),key:t},c.a.createElement(Ve.a,{span:4},c.a.createElement("div",{className:"table-cell"},t+1," ",e.factor>1&&c.a.createElement("span",{className:"round-factor"},"x".concat(e.factor)))),Ct(a,e))})),c.a.createElement(He.a,{gutter:1,className:"table-row"},c.a.createElement(Ve.a,{span:4},c.a.createElement("div",{className:"table-cell"},c.a.createElement(wt.a,{twoToneColor:"#52c41a"}))),Ot(a,r)))},kt=function(e){return e.map((function(e){var t=e.index,a=e.playerName;return c.a.createElement(Ve.a,{key:t,span:5},c.a.createElement("div",{className:"table-cell"},a))}))},Ct=function(e,t){return e.map((function(e){var a=e.index;return c.a.createElement(Ve.a,{span:5,key:a},c.a.createElement("div",{className:"table-cell score-cell ".concat(t["bid".concat(a)]!==t["won".concat(a)]?"fell":""," ").concat(a===t.highestBidder?"highest-bidder":"")},t["aggregateScore".concat(a)],a===t.highestBidder&&c.a.createElement("span",{className:"trump"},vt(t.trump).children)))}))},Ot=function(e,t){return e.map((function(e){var a=e.index;return c.a.createElement(Ve.a,{span:5,key:a},c.a.createElement("div",{className:"table-cell"},""!==t["leagueScore".concat(a)]?t["leagueScore".concat(a)]:"-"))}))},jt=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).carouselSwipedLeft=function(){var e=n.props,t=e.currentView,a=e.onCurrentViewChange;"panel"!==t?a("panel"):(n.carouselEl.classList.add("bounce-left"),setTimeout((function(){return n.carouselEl.classList.remove("bounce-left")}),400))},n.nextRound=function(){var e=n.props,t=e.goToRound,a=e.currentRound,r=Number(a);r<13&&t&&t(r+1)},n.toRoundBefore=function(){var e=n.props,t=e.goToRound,a=e.currentRound,r=Number(a);1!==r&&t&&t(r-1)},n.carouselEl=c.a.createRef(),n.carouselSwipedRight=n.carouselSwipedRight.bind(Object(d.a)(n)),n.carouselSwipedLeft=n.carouselSwipedLeft.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){ie()&&(this.unListenSwipedLeft=oe(this.carouselEl,"swiped-left",this.carouselSwipedLeft),this.unListenSwipedRight=oe(this.carouselEl,"swiped-right",this.carouselSwipedRight))}},{key:"componentWillUnmount",value:function(){ie()&&(this.unListenSwipedLeft(),this.unListenSwipedRight())}},{key:"carouselSwipedRight",value:function(){var e=this,t=this.props,a=t.currentView,n=t.onCurrentViewChange;"table"!==a?n("table"):(this.carouselEl.classList.add("bounce-right"),setTimeout((function(){return e.carouselEl.classList.remove("bounce-right")}),400))}},{key:"render",value:function(){var e=this,t=this.props,a=t.gameID,n=t.currentView,r=t.rounds,l=t.playersColumns,i=t.currentRound,o=t.handleSave,s=t.leagueScores;return c.a.createElement("div",{className:"game-mobile-view"},c.a.createElement("div",{className:"my-carousel",ref:function(t){return e.carouselEl=t}},c.a.createElement("div",{className:"my-carousel-slides-container ".concat(n)},c.a.createElement("div",{className:"my-carousel-slide"},c.a.createElement(St,{dataSource:r,leagueScores:s,players:l,currentRound:i,gameID:a})),c.a.createElement("div",{className:"my-carousel-slide"},c.a.createElement(ft,{isMobile:!0,currentRound:i,allRounds:r,players:l,onChange:o})))),c.a.createElement("div",{className:"round-navigation"},1!==i&&c.a.createElement(x.a,{type:"primary",className:"left",ghost:!0,onClick:this.toRoundBefore},c.a.createElement(yt.a,null),"Round ".concat(i-1)),13!==i&&c.a.createElement(x.a,{type:"primary",ghost:!0,onClick:this.nextRound},"Round ".concat(Number(i)+1),c.a.createElement(Et.a,null))))}}]),a}(l.Component),Nt=[10,7,3,1],Rt=c.a.createContext(),Dt=Ne.a.Header,xt=Ne.a.Content,Lt=Ne.a.Sider,Mt=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleSave=function(e,t){var a,r={},l=Object(le.a)(n.state.gameData.rounds),c=l.findIndex((function(t){return e.round===t.round})),i=l[c];if(l.splice(c,1,Object(X.a)({},i,{},e)),e=l[c],"number"===typeof t){n.calculatePlayerscore(e,t,l,c,r);for(var o=null,s=null,u=!0,d=0,m=Object.entries(e);d<m.length;d++){var h=Object(re.a)(m[d],2),g=h[0],p=h[1];g.indexOf("bid")>-1&&null!==p&&""!==p&&(o+=1*p),g.indexOf("won")>-1&&(null!==p&&""!==p?s+=1*p:u=!1)}if(e.segment=null!==o?o-13:null,e.check=u&&13===s,e.check){for(var f=!0,v=0;v<4;v++){if("number"!==typeof e["bid".concat(v)]||"number"!==typeof e["won".concat(v)]){f=!1;break}if(e["bid".concat(v)]===e["won".concat(v)]){f=!1;break}}if(f)e.fell=!0,e.round<12?l[e.round].factor=2*e.factor:e.factor>1&&(l[e.round].factor=e.factor);else if(e.fell){e.fell=!1,l[e.round]&&(l[e.round].factor=e.factor>1?e.factor/2:e.factor);for(var b=0;b<4;b++)n.calculatePlayerscore(e,b,l,c,r)}if(a=n.calculateSummary(l,c),13===e.round&&!e.fell){r.status=dt,n.updateGameStatus(dt);var y=n.state.gameData,E={totalScore0:y.totalScore0,totalScore1:y.totalScore1,totalScore2:y.totalScore2,totalScore3:y.totalScore3};E["totalScore".concat(t)]=r["totalScore".concat(t)],a=n.calculateLeagueScores(E,a)}n.gameSummaryRef.update(n.mapToPlayersObj(a))}}r.rounds=l,n.gameRef.update(r)},n.calculatePlayerscore=function(e,t,a,n,r){var l,c=e["bid".concat(t)],i=e["won".concat(t)];if(""!==i&&""!==c){if(i===c)l=1*i===0?e.segment>0?25:50:Math.pow(i,2)+10;else{var o=Math.abs(i-c);l=1*c===0?-(e.segment>0?25:50)+10*(o-1):-10*o}l*=e.factor,e["score".concat(t)]=l;for(var s=0,u=0;u<=n;u++){var d=a[u];"number"!==typeof d["score".concat(t)]||d.fell||(s+=d["score".concat(t)])}e["aggregateScore".concat(t)]=s,r["totalScore".concat(t)]=e["aggregateScore".concat(t)]}},n.calculateLeagueScores=function(e,t){return Object.keys(e).sort((function(t,a){return e[a]-e[t]})).forEach((function(a,n){var r=e[a],l=Nt[n];r<0&&l--,r%100===0&&l++,r>300&&(l+=3),r<-100&&(l-=3),t["".concat(a.slice(-1))].leagueScore=l})),t},n.calculateSummary=function(e,t){for(var a=t+1,n={},r=0;r<4;r++){n[r]={};for(var l=0,c=0,i=0,o=0,s=0,u=0,d=0,m=0,h=0,g=0,p=0,f=0;f<a;f++){var v=e[f];if(!v.fell){c++;var b=v.highestBidder===r,y=!b&&(r+1>3?0:r+1)===v.highestBidder;b?i++:y&&p++,v.segment>0&&u++,"NT"===v.trump&&m++,v["bid".concat(r)]===v["won".concat(r)]&&(l++,b?o++:y&&g++,"NT"===v.trump&&h++,v.segment>0?s++:d++)}}var E={wins:l,total:c},w={wins:o,total:i},S={wins:s,total:u},k={wins:d,total:c-u},C={wins:h,total:m},O={wins:g,total:p};n[r]={successRate:Number.isNaN(E)?"":E,successRateHB:w,successRateOver:S,successRateUnder:k,successRateNT:C,successRateLastBidder:O}}return n},n.mapToPlayersObj=function(e){var t=n.state,a=t.players,r=t.gameSummary;return a.reduce((function(t,a,n){return t[a.key]=Object(X.a)({},r[a.key],{},e[n]),t}),{})},n.updateGameStatus=function(e){var t=n.props.match.params.leagueID;y.database().ref("leagueGames/_".concat(1*t,"/").concat(n.gameKey)).update({status:e})},n.toggleSlide=function(){var e="panel"===n.state.currentView?"table":"panel";n.setCurrentViewState(e)},n.onDragEnd=function(e,t){var a=n.state,r=a.columns,l=a.players,c=r.slice(),i=c.splice(e,1)[0];c.splice(t,0,i);var o=l.slice(),s=o.splice(e,1)[0];o.splice(t,0,s),n.setState({columns:c,players:o})},n.getLeagueScores=function(){var e=n.state.players,t=n.state.gameSummary;return 0===Object.keys(t).length?{leagueScore0:"",leagueScore1:"",leagueScore2:"",leagueScore3:""}:e.reduce((function(e,a,n){return e["leagueScore".concat(n)]=t[a.key].leagueScore,e}),{})},n.initColumns=function(e){return e.map((function(e,t){return{playerName:e.nickname,index:t,children:[{title:"Bid",dataIndex:"bid".concat(t),width:100},{title:"Won",dataIndex:"won".concat(t),width:100}]}})).concat([{children:[{title:"Trump",dataIndex:"trump",width:75,render:vt},{title:"O/U",dataIndex:"segment",width:55,render:function(e,t){return{props:{className:0===e?"failed-check":""},children:e}}}]}])},n.initColumns1=function(e){return e.map((function(e){if(!e.editable&&!e.player)return e;var t=n.state.gameData["totalScore".concat(e.player)];return Object(X.a)({},e,{children:e.children.map((function(a){return Object(X.a)({},a,{title:t,children:a.children.map((function(t){return Object(X.a)({},t,{width:100,onCell:function(a){return{record:a,editable:!0,editorType:"trump"===t.dataIndex?"trump":"bidWin",dataIndex:t.dataIndex,player:e.player,handleSave:n.handleSave}}})}))})}))})}))},n.state={players:e.players,columns:n.initColumns(e.players),currentView:"table",gameData:{currentRound:1,rounds:[],totalScore0:0,totalScore1:0,totalScore2:0,totalScore3:0,status:""},gameSummary:{}};var r=[{children:[{title:"Score",children:[{title:"round",dataIndex:"round",width:75}]}]},{title:"player 1",player:1,children:[{children:[{title:"Bid",dataIndex:"bid1"},{title:"Won",dataIndex:"won1"}]}]},{title:"player 2",player:2,children:[{children:[{title:"Bid",dataIndex:"bid2"},{title:"Won",dataIndex:"won2"}]}]},{title:"player 3",player:3,children:[{children:[{title:"Bid",dataIndex:"bid3"},{title:"Won",dataIndex:"won3"}]}]},{title:"player 4",player:4,children:[{children:[{title:"Bid",dataIndex:"bid4"},{title:"Won",dataIndex:"won4"}]}]},{editable:!0,children:[{children:[{title:"Trump",dataIndex:"trump",width:75,render:vt}]}]},{children:[{children:[{title:"O/U",dataIndex:"segment",width:55,render:function(e,t){return{props:{className:0===e?"failed-check":""},children:e}}}]}]}];return n.columns1=n.initColumns1(r),n.selectActiveRound=n.selectActiveRound.bind(Object(d.a)(n)),n.setCurrentViewState=n.setCurrentViewState.bind(Object(d.a)(n)),n.selectActiveRound=n.selectActiveRound.bind(Object(d.a)(n)),n.handleReorderPlayers=n.handleReorderPlayers.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"fetch",value:function(){var e=this,t=this.props.match.params,a=t.leagueID,n=t.gameID,r=y.database();this.gameRef&&this.gameRef.off("value"),this.leagueGamesRef=r.ref("leagueGames/_".concat(1*a)).orderByChild("gameID").equalTo(1*n),this.leagueGamesRef.once("value",(function(t){var n=Object.values(t.val())[0],l=Object.keys(t.val())[0];e.gameKey=l,e.gameRef=r.ref("games/".concat(l)),e.gameSummaryRef=r.ref("leagueGamesSummary/_".concat(1*a,"/").concat(l,"/players")),n.playersOrder?e.setState({players:n.playersOrder,columns:e.initColumns(n.playersOrder)}):e.setState({players:e.props.players,columns:e.initColumns(e.props.players)}),e.gameRef.on("value",(function(t){e.setState({gameData:Object(X.a)({},e.state.gameData,{},t.val())}),e.props.loaderStateCb(!1)})),e.gameSummaryRef.on("value",(function(t){e.setState({gameSummary:Object(X.a)({},t.val())})}))}))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.gameRef.off("value"),this.gameSummaryRef.off("value")}},{key:"componentDidUpdate",value:function(e,t){e.match.params.gameID!==this.props.match.params.gameID&&this.fetch()}},{key:"setCurrentViewState",value:function(e){this.setState({currentView:e})}},{key:"selectActiveRound",value:function(e){var t=this.state,a=t.gameData,n=t.currentView,r=a.rounds,l=a.currentRound;Number(e)<Number(l)||r[l-1].check?(this.gameRef.update({currentRound:Number(e)}),this.props.isMobile&&"table"===n&&this.toggleSlide()):Oe.a.warning("Current round is not completed")}},{key:"handleReorderPlayers",value:function(e){this.setState({players:e,columns:this.initColumns(e)});var t=this.props.match.params.leagueID;y.database().ref("leagueGames/_".concat(1*t,"/").concat(this.gameKey)).update({playersOrder:e})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.columns,r=a.currentView,l=a.gameData,i=a.players,o=l.rounds,s=l.currentRound,u=this.props,d=u.screenSize,m=u.isMobile,h=u.loading,g=u.match.params.gameID,p=n.slice(0,4),f={body:{row:Ue,cell:Ge}},v=(d-200-930)/2;return e=v<130?v-65:v/2,h?c.a.createElement(bt,null):m?c.a.createElement(Rt.Provider,{value:{players:i,reorderPlayers:this.handleReorderPlayers}},c.a.createElement(jt,{gameID:g,currentView:r,rounds:o,playersColumns:p,currentRound:s,handleSave:this.handleSave,onCurrentViewChange:this.setCurrentViewState,goToRound:this.selectActiveRound,leagueScores:this.getLeagueScores()})):c.a.createElement(Ne.a,{className:"game-layout"},c.a.createElement(Lt,{width:v,style:{background:"transparent"}},c.a.createElement("div",{style:{height:119}},c.a.createElement(x.a,{icon:"table",onClick:this.toggleSlide})),c.a.createElement(je.a,{defaultSelectedKeys:["1"],mode:"inline",style:{left:"".concat("table"===r?0:e/2*-1,"px")},onSelect:function(e){return t.selectActiveRound(e.key)},selectedKeys:["".concat(s)]},Array(13).fill(1).map((function(e,t){return c.a.createElement(je.a.Item,{key:t+1,style:{textAlign:"center"}},c.a.createElement("span",{className:"round-text",style:{display:v<200?"none":""}},"Round")," ",t+1)})))),c.a.createElement(Ne.a,{className:"table"===r?"game-table":"game-panel"},c.a.createElement(Dt,{style:{background:"transparent",padding:"0 0px",height:80}},c.a.createElement(Ie.a,{onDragEnd:this.onDragEnd,nodeSelector:"div.card"},p.map((function(e,t){var a=e.index,n=e.playerName;return c.a.createElement(Pe.a,{key:t,title:n,className:"card",style:{transform:"translate(".concat("table"===r?0:60+20*t,"px)")}},c.a.createElement(ct,{type:lt},l["totalScore".concat(a)]))})))),c.a.createElement(xt,null,c.a.createElement("div",{className:"my-carousel"},c.a.createElement("div",{className:"my-carousel-slides-container ".concat(r)},c.a.createElement("div",{className:"my-carousel-slide"},c.a.createElement(Me.a,{className:"game-table",components:f,columns:n,rowKey:"round",dataSource:o,size:"small",bordered:!0,pagination:!1,style:{display:"inline-block"}})),c.a.createElement("div",{className:"my-carousel-slide"},c.a.createElement(ft,{isMobile:!1,currentRound:s,allRounds:o,players:p,onChange:this.handleSave})))))))}}]),a}(l.Component),Pt=(a(495),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isActive:!1},e.handleClick=function(){e.setState({isActive:!e.state.isActive});var t=e.props.onClick;t&&t()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.direction,t=this.state.isActive;return c.a.createElement("div",{className:"btn-menu-arrow-container",onClick:this.handleClick},c.a.createElement("div",{className:"btn-menu-arrow ".concat(e," ").concat(t?"spin":"arrow")},c.a.createElement("span",null)))}}]),a}(l.Component));var It=a(256),Bt=(a(496),a(497),{successRate:"Succes Win Rates",successRateHB:"Highest Bidding Win Rates",successRateOver:"Over Win Rate",successRateUnder:"Under Win Rate",successRateNT:"NT Win Rates",successRateLastBidder:"Last Bidder Win Rate"}),Tt=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getTableHeaders=function(e){return e.map((function(e){var t=e.key,a=e.nickname;return c.a.createElement(Ve.a,{key:t,span:6},c.a.createElement("div",{className:"table-cell"},a))}))},n.getScoreRow=function(e){return e.map((function(e){return c.a.createElement(Ve.a,{span:6,key:e.key},c.a.createElement("div",{className:"table-cell"},e.games&&n.scoreReducer(e.games,"leagueScore")))}))},n.getStatsRow=function(e){var t=n.state.players;return c.a.createElement("div",{className:"stats-row",key:e},c.a.createElement("h4",null,Bt[e]),c.a.createElement(He.a,{gutter:1},n.getWinRateRow(t,e)))},n.getWinRateRow=function(e,t){return e.map((function(e){return c.a.createElement(Ve.a,{span:6,key:e.key},c.a.createElement("div",{className:"table-cell"},e.games&&n.calculateRate(e.games,t),"%"))}))},n.scoreReducer=function(e,t){return e.reduce((function(e,a){return e+Number(a[t])}),0)},n.calculateRate=function(e,t){return n.toPercentage(n.preCalculateRate(e,t))},n.toPercentage=function(e){var t=e.wins,a=e.total;return Number.parseFloat(t/a*100).toFixed(0)},n.preCalculateRate=function(e,t){return e.reduce((function(e,a){var n=a[t];return e.wins+=n.wins,e.total+=n.total,e}),{wins:0,total:0})},n.state={players:e.league.players},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.gameSummaryRef.off("value")}},{key:"fetch",value:function(){var e=this,t=this.props.league.leagueID,a=this.state.players,n=y.database().ref();this.gameSummaryRef=n.child("leagueGamesSummary/_".concat(t)),this.leagueGamesRef=n.child("leagueGames/_".concat(t)).orderByChild("status").equalTo("FINISHED"),this.leagueGamesRef.on("value",(function(t){var n=Object.keys(t.val()),r=n[n.length-1];e.gameSummaryRef.orderByKey().endAt(r).on("value",(function(t){var n=Object.values(t.val());e.setState({players:a.map((function(e){var t=e.key;return Object(X.a)({},e,{games:n.map((function(e,a){return e.players[t]}))})}))})}))}))}},{key:"render",value:function(){var e=this.props.league.title,t=this.state.players;return c.a.createElement("div",{className:"game-summery"},c.a.createElement("h3",null,e),c.a.createElement("h3",null,"League Score:"),c.a.createElement(He.a,{gutter:1,className:"table-header",style:{marginBottom:1}},this.getTableHeaders(t)),c.a.createElement(He.a,{gutter:1},this.getScoreRow(t)),Object.keys(Bt).map(this.getStatsRow))}}]),a}(l.Component),At=Ne.a.Content,Wt=Ne.a.Sider,zt=je.a.SubMenu,Ut=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).addGame=function(){var e=n.state,t=e.league,a=e.leagueGames,r=t.leagueID,l=t.players,c=a[a.length-1];if(c&&c.status!==dt)setTimeout(n.toggleDrawer,200),Oe.a.warning("Last Game is not finished yet!!");else{var i=n.props,o=i.history,s=i.match,u=a.length+1,d=y.database().ref().child("games").push().key,m=function(e){for(var t=[],a=0;a<13;a++)t.push({round:a+1,segment:"",totalBids:"",trump:"",check:!1,factor:1,fell:!1,highestBidder:"",inputMode:ot,score0:"",aggregateScore0:"",bid0:"",won0:"",score1:"",aggregateScore1:"",bid1:"",won1:"",score2:"",aggregateScore2:"",bid2:"",won2:"",score3:"",aggregateScore3:"",bid3:"",won3:""});return{gameData:{rounds:t,currentRound:1,totalScore0:0,totalScore1:0,totalScore2:0,totalScore3:0,status:ut},gameSummary:{players:e.reduce((function(e,t){return e[t.key]={leagueScore:"",successRate:"",successRateHB:"",successRateOver:"",successRateUnder:"",successRateNT:""},e}),{})}}}(l),h={};h["/games/".concat(d)]=Object(X.a)({gameID:u},m.gameData),h["/leagueGames/_".concat(r,"/").concat(d)]={gameID:u,status:ut},h["/leagueGamesSummary/_".concat(r,"/").concat(d)]=Object(X.a)({},m.gameSummary),y.database().ref().update(h,(function(e){e||(n.setState({menuSelected:"".concat(u)}),o.push("".concat(s.url).concat("/game","/").concat(u)),setTimeout(n.toggleDrawer,400))}))}},n.handleMenuItemClick=function(e){var t=e.key;if("new_game"===t)return n.addGame();"main_menu"!==t&&t!==n.state.menuSelected&&(n.setState({menuSelected:t}),setTimeout(n.toggleDrawer,400),n.setLoaderState(!0))},n.toggleSider=function(){n.setState({siderCollapse:!n.state.siderCollapse})},n.toggleDrawer=function(){n.setState({drawerVisible:!n.state.drawerVisible})};var r=e.location,l=e.match.params.leagueID,c=r.pathname.match(/game\/[1-9]/g)||[],i=!!c.length&&c[0].split("/")[1];n.state={loading:!0,siderCollapse:!1,menuSelected:i||"dashboard",league:{title:"",players:[]},leagueGames:[],drawerVisible:!1};var o=y.database().ref();return n.leagueRef=o.child("leagues/list/_".concat(l)),n.leagueGamesRef=o.child("leagueGames/_".concat(l)),n.setLoaderState=n.setLoaderState.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"fetch",value:function(){var e=this;this.leagueRef.on("value",(function(t){console.log(t.val());var a=t.val();a&&e.setState({league:Object(X.a)({},e.state.league,{},a)})})),this.leagueGamesRef.on("child_added",(function(t){e.setState((function(e){return{leagueGames:[].concat(Object(le.a)(e.leagueGames),[t.val()])}}))})),this.leagueGamesRef.on("child_changed",(function(t){e.setState((function(e){var a=e.leagueGames,n=a.findIndex((function(e){return e.gameID===t.val().gameID}));return{leagueGames:[].concat(Object(le.a)(a.slice(0,n)),[Object(X.a)({},t.val())],Object(le.a)(a.slice(n+1)))}}))}))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.leagueRef.off("value")}},{key:"setLoaderState",value:function(e){this.setState({loading:e})}},{key:"getMenu",value:function(){var e=this.props.match,t=this.state,a=t.leagueGames,n=t.menuSelected;return c.a.createElement(je.a,{mode:"inline",selectedKeys:[n],defaultOpenKeys:["gamesSub"],onClick:this.handleMenuItemClick,className:"league-menu"},c.a.createElement(je.a.Item,{key:"dashboard"},c.a.createElement(Re.a,null),c.a.createElement(P.b,{to:"".concat(e.url)},"League Summary")),c.a.createElement(zt,{key:"gamesSub",title:c.a.createElement("span",null,c.a.createElement(De.a,null),c.a.createElement("span",null,"Games"))},a.map((function(t,a){return c.a.createElement(je.a.Item,{key:t.gameID.toString()},c.a.createElement(P.b,{to:"".concat(e.url).concat("/game","/").concat(t.gameID)},"Game ",t.gameID))})),c.a.createElement(je.a.Item,{key:"new_game"},c.a.createElement(xe.a,null),c.a.createElement("span",null,"New Game"))),c.a.createElement(je.a.Item,{key:"main_menu"},c.a.createElement(Le.a,{className:"rotate-180"}),c.a.createElement(P.b,{to:"/"},"To Main Menu")))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isMobile,n=t.screenSize,r=t.match,l=this.state,i=l.league,o=l.siderCollapse,s=l.loading,u=l.drawerVisible,d=i.leagueID,m=i.players;return c.a.createElement(Ne.a,{className:"league-container"},a?c.a.createElement(It.a,{getContainer:"#root",width:"250px",open:u,onHandleClick:this.toggleDrawer,onClose:this.toggleDrawer},c.a.createElement("div",{className:"drawer-title"},i.title),this.getMenu()):c.a.createElement(Wt,{trigger:null,collapsible:!0,collapsed:o,style:{background:"#fff"}},c.a.createElement(Pt,{direction:"left",onClick:this.toggleSider}),this.getMenu()),c.a.createElement(Ne.a,null,c.a.createElement(At,null,c.a.createElement(g.a,{path:"".concat("/league","/:leagueID/game/:gameID"),render:function(t){return d?c.a.createElement(Mt,Object.assign({},t,{isMobile:a,screenSize:n,players:m,loading:s,loaderStateCb:e.setLoaderState})):c.a.createElement(bt,null)}}),c.a.createElement(g.a,{exact:!0,path:r.url,render:function(e){return d?c.a.createElement(Tt,Object.assign({},e,{league:i})):c.a.createElement(bt,null)}}))))}}]),a}(l.Component),Gt=q((function(e){return!!e}))(Ut),Ht=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={inlineHeader:!1,isMobile:window.innerWidth<1095,screenSize:window.innerWidth},n.toggleHeaderInline=n.toggleHeaderInline.bind(Object(d.a)(n)),n.handleWindowSizeChange=n.handleWindowSizeChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"toggleHeaderInline",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({inlineHeader:e})}},{key:"handleWindowSizeChange",value:function(){this.setState({isMobile:window.innerWidth<1095,screenSize:window.innerWidth})}},{key:"listenToWinResize",value:function(e){return oe(window,"resize",e)}},{key:"componentWillMount",value:function(){var e=this,t=this.props.location.pathname;this.toggleHeaderInline("/"!==t),this.unistenHistory=this.props.history.listen((function(t,a){var n=t.pathname;e.toggleHeaderInline("/"!==n&&"/login"!==n)})),this.unlistenWinResize=this.listenToWinResize(this.handleWindowSizeChange)}},{key:"componentWillUnmount",value:function(){this.unistenHistory(),this.unlistenWinResize()}},{key:"render",value:function(){var e=this.state,t=e.inlineHeader,a=e.isMobile,n=e.screenSize;return c.a.createElement("div",{className:"app ".concat(a?"mobile":""," ").concat(t?"inline-header":"")},c.a.createElement("header",{id:"app-header"},c.a.createElement("img",{src:f.a,className:"app-logo",alt:"logo"}),c.a.createElement("h1",{className:"app-title"},"Sub Whist")),c.a.createElement("div",{className:"app-content"},c.a.createElement(g.a,{exact:!0,path:"/",component:Ce}),c.a.createElement(g.a,{exact:!0,path:"/login",component:z}),c.a.createElement(g.a,{exact:!0,path:"/signup",component:_}),c.a.createElement(g.a,{path:"".concat("/league","/:leagueID"),render:function(e){return c.a.createElement(Gt,Object.assign({},e,{isMobile:a,screenSize:n}))}})))}}]),a}(l.Component),Vt=Object(g.e)(D(Ht)),_t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ft(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(498);o.a.render(c.a.createElement(P.a,{basename:"/whist"},c.a.createElement(Vt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/whist",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/whist","/service-worker.js");_t?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ft(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Ft(e)}))}}()}},[[259,1,2]]]);
//# sourceMappingURL=main.8245c162.chunk.js.map