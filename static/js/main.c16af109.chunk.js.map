{"version":3,"sources":["images/playCards sync /^/.*/.svg$","cards.png","images/phone.png","assets/sounds/playerTurn.mp3","images/playCards/10-C.svg","images/playCards/10-D.svg","images/playCards/10-H.svg","images/playCards/10-S.svg","images/playCards/11-C.svg","images/playCards/11-D.svg","images/playCards/11-H.svg","images/playCards/11-S.svg","images/playCards/12-C.svg","images/playCards/12-D.svg","images/playCards/12-H.svg","images/playCards/12-S.svg","images/playCards/13-C.svg","images/playCards/13-D.svg","images/playCards/13-H.svg","images/playCards/13-S.svg","images/playCards/14-C.svg","images/playCards/14-D.svg","images/playCards/14-H.svg","images/playCards/14-S.svg","images/playCards/2-C.svg","images/playCards/2-D.svg","images/playCards/2-H.svg","images/playCards/2-J.svg","images/playCards/2-S.svg","images/playCards/3-C.svg","images/playCards/3-D.svg","images/playCards/3-H.svg","images/playCards/3-S.svg","images/playCards/4-C.svg","images/playCards/4-D.svg","images/playCards/4-H.svg","images/playCards/4-S.svg","images/playCards/5-C.svg","images/playCards/5-D.svg","images/playCards/5-H.svg","images/playCards/5-S.svg","images/playCards/6-C.svg","images/playCards/6-D.svg","images/playCards/6-H.svg","images/playCards/6-S.svg","images/playCards/7-C.svg","images/playCards/7-D.svg","images/playCards/7-H.svg","images/playCards/7-S.svg","images/playCards/8-C.svg","images/playCards/8-D.svg","images/playCards/8-H.svg","images/playCards/8-S.svg","images/playCards/9-C.svg","images/playCards/9-D.svg","images/playCards/9-H.svg","images/playCards/9-S.svg","firebase/fire.ts","firebase/auth.ts","firebase/db.ts","utils/events/EventEmitter.ts","services/NotificationSrv.ts","authentication/AuthUserContext.ts","authentication/withAuthentication.tsx","authentication/Login.tsx","constants/routes.ts","authentication/SignUp.tsx","authentication/withAuthorization.tsx","dialogs/NewLeague.tsx","dialogs/ResumeLeague.js","utils/Utils.ts","common/dragPad/DragPad.js","constants/dialogs.ts","dialogs/ReorderPlayers.tsx","dialogs/NewGameDialog/NewGameDialog.tsx","dialogs/GameInvite.tsx","constants/cards.ts","dialogs/Dialog.tsx","main/MainMenu.tsx","main/Main.js","constants/states.ts","utils/game-utils.ts","common/cards/Icons.js","common/table/MobileTable.js","common/table/renderers.js","common/cards/Modal.js","common/numbers/Pad.js","common/transition/Css.js","common/player/Pad.js","common/twoWayArrow/TwoWayArrow.jsx","game/PlayCard/PlayCard.tsx","game/ThrownCard/ThrownCard.tsx","game/GamePad/GamePad.js","game/GameMobileView.js","constants/scores.ts","services/GameSrv.ts","game/GameTab.js","common/loader/Loader.tsx","leagueSummary/LeagueSummary.js","services/LeagueSrv.ts","league/League.tsx","dataTemplates/gameTpl.js","App.js","registerServiceWorker.js","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","fire","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","auth","db","database","createUser","email","password","createUserWithEmailAndPassword","signInUser","signInWithEmailAndPassword","signOut","doCreateUser","userInfo","ref","set","onceGetUsers","once","onceGetLeagues","EventEmitter","handlers","handler","this","push","filter","h","data","slice","forEach","gameInviteEventEmitter","callback","on","userId","currentUser","uid","gameInvitesRef","child","invite","val","snapshot","console","log","trigger","AuthUserContext","React","createContext","withAuthentication","Component","state","authUser","onAuthStateChanged","setState","Provider","value","props","FormItem","Item","Login","isLoading","handleSubmit","values","history","then","catch","error","message","alert","Consumer","style","textAlign","marginTop","type","size","onClick","goBack","icon","ArrowLeftOutlined","to","onFinish","className","name","rules","required","prefix","MailOutlined","color","placeholder","LockOutlined","htmlType","loading","withRouter","SignUp","formRef","createRef","handleConfirmBlur","target","confirmDirty","compareToFirstPassword","rule","form","current","getFieldValue","validateToNextPassword","validateFields","nickname","user","UserOutlined","SmileOutlined","validator","onBlur","withAuthorization","authCondition","WithAuthorization","width","position","top","Option","NewLeague","leagueID","onCreateLeague","users","description","savingLeagueLoader","players","key","lastID","newID","active","setNewLeagueID","closeModal","showDialog","afterClose","onAfterClose","visible","count","fetchPlayers","title","destroyOnClose","maskClosable","confirmLoading","onOk","onCancel","okText","getContainer","layout","label","len","mode","notFoundContent","ResumeLeague","activeLeagues","footer","itemLayout","dataSource","renderItem","item","Meta","hasTouch","window","navigator","maxTouchPoints","document","documentElement","addListener","element","addEventListener","removeEventListener","springSetting1","stiffness","damping","springSetting2","clamp","n","min","max","Math","Dialogs","allColors","height","DragPad","handleTouchStart","pressLocation","handleMouseDown","touches","handleTouchMove","preventDefault","handleMouseMove","pageX","pageY","order","lastPress","isPressed","mouseCircleDelta","dx","dy","mouseXY","col","round","row","floor","from","findIndex","p","newOrder","arr","_arr","abs","length","splice","unshift","pop","reorder","pressX","pressY","handleMouseUp","onChange","colors","reduce","colorObj","player","i","unListenTouchmove","unListenTouchend","unListenMousemove","unListenMouseup","x","y","visualPosition","translateX","translateY","scale","spring","boxShadow","onMouseDown","bind","onTouchStart","backgroundColor","WebkitTransform","transform","zIndex","ReorderPlayers","handleOnCancel","handleOnOk","handleDragChange","NewGameDialog","setGameMode","modeSelected","handleAfterClose","wrapClassName","closable","centered","cancelText","bodyStyle","display","GameInvite","handleOk","handleCancel","leagueTitle","newGameId","inviter","CARDS","DialogsMapping","NEW_LEAGUE","NewLeagueDialog","RESUME_LEAGUE","ResumeLeagueDialog","REORDER_PLAYERS","NEW_GAME","GAME_INVITE","Dialog","dialog","dialogProps","DialogEl","MainMenu","items","index","text","disabled","block","Main","newLeague","resumeLeague","orderByChild","equalTo","some","fetch","off","navigateToLeague","showResumeLeagueDialog","closeResumeLeagueDialog","showNewLeagueDialog","closeNewLeagueDialog","INPUT_MODE","GAME_STATUS","CardsType","CLUB","DIAMOND","HART","SPADE","calcIfRoundFell","roundData","didRoundFell","bid","won","cardsList","cardsFamilyScoreMap","getDevicePlayerIndex","nextPlayerIndex","dealCards","shuffledCards","shuffleCards","arrayOf4","j","sortCardsArrays","setCardsByPlayer","cardsArray","random","cardsArr","obj","sortCards","cards","sort","cardX","cardY","split","cardXNum","cardXType","cardYNum","cardYType","Spade","viewBox","enableBackground","d","fill","Hart","Diamond","points","Club","ChangePlayers","MobileTable","rounds","currentRound","leagueScores","gameID","gutter","marginBottom","span","getTableHeaders","fell","factor","getRoundCol","TrophyTwoTone","twoToneColor","getLeagueScoresCol","playerIndex","playerName","highestBidder","card","Icon","component","NT","children","cardsRenderer","trump","CardsModal","showModal","trumpIconMap","ghost","QuestionOutlined","onTrumpSelect","NumbersPad","getButtons","baseNum","amount","disabledNumber","Array","num","onBtnClick","showMore","toggleMore","onSelect","textContent","CSS_TRANSITIONS","Css","div","classList","add","setTimeout","remove","prevProps","el","PlayerPad","score","undefined","TWO_WAY_ARROW_DIRECTION","TwoWayArrow","direction","PlayCard","preSelected","thrown","onCardClick","clickHandler","useCallback","event","src","require","ThrownCard","thrownType","hasWinner","useState","setStyle","useEffect","confirm","config","maxCount","GamePad","audio","Audio","playerTurn","getNextPlayer","selectedPlayer","getBeforePlayer","getBeforePlayers","getPlayerAggregateScore","roundsData","roundIndex","aggregateScore","getPlayersButtons","allRounds","currentRoundData","dot","Button","handleCardClick","preSelectedCard","devicePlayerIndex","onCardThrown","ownCardsState","getRoundData","inputMode","WON","currentTarget","offsetParent","offsetTop","left","offsetLeft","ownThrownCardInitPos","thrownCards","currentHand","thrownCard","isAllBids","every","_","reorderPlayersDialogVisible","handCardType","handleSwitchMode","handleCardsPadChange","handleNumberSelect","setSelectedPlayer","showChangeHighestBidderConfirm","showChangePlayerDialog","handleReorderPlayersAfterClose","gameMode","handsState","prevAllRounds","prevCurrentRound","prevCurrentRoundData","stateToUpdate","find","hand","uniqueResult","Map","playerHand","has","uniqueHand","playAudio","checked","segment","warning","everyoneBid","BID","prop","newRoundData","nextPlayer","Number","isInteger","beforePlayers","bids","aBid","content","okType","bid0","bid1","bid2","bid3","check","playersButtons","Group","buttonStyle","justify","checkedChildren","unCheckedChildren","cardsMarkerRef","calculateDisableNum","shape","PlayersContext","reorderPlayers","getThrownCardsPlacement","getCards","hasCardType","isDevicePlayer","handWinner","fn","playerOnPadMap","toWinner","getFromTo","markerTop","markerWidth","offsetWidth","CARD_MARKER_HEIGHT","CARD_HEIGHT","CARD_WIDTH","getToWinnerCalc","fromTop","fromLeft","getFromToCalc","play","GameMobileView","carouselSwipedLeft","currentView","onCurrentViewChange","carouselEl","nextRound","goToRound","toRoundBefore","carouselSwipedRight","unListenSwipedLeft","unListenSwipedRight","playersColumns","handleSave","handleCardThrown","LeftOutlined","RightOutlined","GAME_DEFAULT_SCORES","GameService","gameKey","cardsByPlayer","update","cardsState","cardIndex","GameTab","summaryToUpdate","prevRounds","gameData","newData","calculatePlayerScore","currentTotalBid","currentTotalWon","allHasWonInput","entries","indexOf","getTotalWonBid","calculateSummary","status","FINISHED","updateGameStatus","scores","totalScore0","totalScore1","totalScore2","totalScore3","calculateLeagueScores","gameSummaryRef","mapToPlayersObj","gameRef","newThrownCards","turnOf","updateOwnCardState","rowScore","pow","diff","a","b","scoreIndex","leagueScore","currentRoundIndex","playersSummary","pIndex","stood","totalRounds","totalHBrounds","stoodWhileHB","stoodInOver","totalOverRounds","stoodInUnder","totalNTrounds","stoodInNT","stoodWhenLastBidder","totalStoodWhenLastBidder","rIndex","lastBidder","successRate","wins","total","successRateHB","successRateOver","successRateUnder","successRateNT","successRateLastBidder","isNaN","gameSummary","match","params","toggleSlide","setCurrentViewState","getLeagueScores","leagueScore0","leagueScore1","leagueScore2","leagueScore3","summaryObj","initColumns","columns","dealer","selectActiveRound","handleReorderPlayers","leagueGamesRef","playersOrder","snap","gameRefData","loaderStateCb","ownCardsStateRef","prevState","handleGameModeChange","currentHandState","handleHandFinished","calculateHandScore","newRound","setCardsToPlayers","createPortal","BorderOuterOutlined","TableOutlined","querySelector","body","winner","calculateHandWinner","goToNextHand","gameToUpdate","getTotalRemoteWonBid","trumpCards","updateHandCardsState","Loader","statsObj","LeagueSummary","getScoreRow","games","scoreReducer","getStatsRow","statsKey","getWinRateRow","calculateRate","sum","game","toPercentage","preCalculateRate","parseFloat","toFixed","sumObj","category","league","dbRef","gameKeys","lastKey","orderByKey","endAt","playerKey","LeagueService","Promise","inviteKey","setInviteObj","invited","setAllInvited","invitedRefs","playersKeys","removeAllInvited","sets","promise","all","gameInviteRef","Content","SubMenu","League","leagueRef","toggleDrawer","drawerVisible","setLoaderState","setNewGameDialogState","show","newGameDialog","addGame","leagueGames","blockedBy","newGameKey","gameTpl","initRoundData","totalBids","score0","aggregateScore0","won0","score1","aggregateScore1","won1","score2","aggregateScore2","won2","score3","aggregateScore3","won3","ACTIVE","gameDataTpl","updates","menuSelected","url","location","matchGame","pathname","handleMenuItemClick","newGameDialogHandler","leagueData","changedIndex","open","onHandleClick","onClose","getMenu","path","render","exact","selectedKeys","defaultOpenKeys","DashboardOutlined","GoldOutlined","toString","PlusOutlined","ExportOutlined","isAddGameOk","blockLeague","unblockLeague","invitePlayers","lastGame","App","onGameInvite","showGameInvite","acceptGameInvite","loader","closeGameInvite","inlineHeader","toggleHeaderInline","handleWindowSizeChange","inline","unlistenHistory","listen","action","unlistenWinResize","listenToWinResize","NotificationService","registerGameInvite","orientation","userAgent","phoneImg","alt","screenSize","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","basename","getElementById","URL","origin","response","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"yGAAA,IAAIA,EAAM,CACT,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,KAId,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,oBC1EpBU,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,kUCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,E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","file":"static/js/main.c16af109.chunk.js","sourcesContent":["var map = {\n\t\"./10-C.svg\": 453,\n\t\"./10-D.svg\": 454,\n\t\"./10-H.svg\": 455,\n\t\"./10-S.svg\": 456,\n\t\"./11-C.svg\": 457,\n\t\"./11-D.svg\": 458,\n\t\"./11-H.svg\": 459,\n\t\"./11-S.svg\": 460,\n\t\"./12-C.svg\": 461,\n\t\"./12-D.svg\": 462,\n\t\"./12-H.svg\": 463,\n\t\"./12-S.svg\": 464,\n\t\"./13-C.svg\": 465,\n\t\"./13-D.svg\": 466,\n\t\"./13-H.svg\": 467,\n\t\"./13-S.svg\": 468,\n\t\"./14-C.svg\": 469,\n\t\"./14-D.svg\": 470,\n\t\"./14-H.svg\": 471,\n\t\"./14-S.svg\": 472,\n\t\"./2-C.svg\": 473,\n\t\"./2-D.svg\": 474,\n\t\"./2-H.svg\": 475,\n\t\"./2-J.svg\": 476,\n\t\"./2-S.svg\": 477,\n\t\"./3-C.svg\": 478,\n\t\"./3-D.svg\": 479,\n\t\"./3-H.svg\": 480,\n\t\"./3-S.svg\": 481,\n\t\"./4-C.svg\": 482,\n\t\"./4-D.svg\": 483,\n\t\"./4-H.svg\": 484,\n\t\"./4-S.svg\": 485,\n\t\"./5-C.svg\": 486,\n\t\"./5-D.svg\": 487,\n\t\"./5-H.svg\": 488,\n\t\"./5-S.svg\": 489,\n\t\"./6-C.svg\": 490,\n\t\"./6-D.svg\": 491,\n\t\"./6-H.svg\": 492,\n\t\"./6-S.svg\": 493,\n\t\"./7-C.svg\": 494,\n\t\"./7-D.svg\": 495,\n\t\"./7-H.svg\": 496,\n\t\"./7-S.svg\": 497,\n\t\"./8-C.svg\": 498,\n\t\"./8-D.svg\": 499,\n\t\"./8-H.svg\": 500,\n\t\"./8-S.svg\": 501,\n\t\"./9-C.svg\": 502,\n\t\"./9-D.svg\": 503,\n\t\"./9-H.svg\": 504,\n\t\"./9-S.svg\": 505\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 213;","module.exports = __webpack_public_path__ + \"static/media/cards.03003d3d.png\";","module.exports = __webpack_public_path__ + \"static/media/phone.b4836590.png\";","module.exports = __webpack_public_path__ + \"static/media/playerTurn.303a9497.mp3\";","module.exports = __webpack_public_path__ + \"static/media/10-C.90a1d2da.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-D.1e7ceb93.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-H.a99c411d.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-S.8b991ebd.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-C.e4d58ae7.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-D.b2cc7b26.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-H.c357eab3.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-S.e9f02fbd.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-C.483c9a18.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-D.e34fab0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-H.ddc0d874.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-S.84f4e7a8.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-C.f612b546.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-D.0ff22a04.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-H.60e7d399.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-S.22bb59a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-C.49a458de.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-D.3fde324e.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-H.e892e743.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-S.78374225.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-C.8a51f4b1.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-D.dd5bdb07.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-H.15c2e192.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-J.2efb9493.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-S.bce46c7b.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-C.6f681593.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-D.15244443.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-H.5d6c501c.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-S.56340b99.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-C.b4c5fedb.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-D.c1449960.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-H.a23231b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-S.10c84208.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-C.0eb86f9c.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-D.152f12ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-H.8196387a.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-S.143b7322.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-C.4cb8bdad.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-D.bd92854e.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-H.19f2ecf2.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-S.ade7c7e4.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-C.d8d8520b.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-D.204f8d6f.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-H.f0681bb0.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-S.f6bb3b39.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-C.fe3de886.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-D.b6635e40.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-H.eac2a810.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-S.6e2329eb.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-C.a91a0922.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-D.2c4bfcfc.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-H.75cb4cf1.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-S.30d03378.svg\";","import firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/auth\";\n\n// Initialize Firebase\nconst config = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID\n};\nconst fire = firebase.initializeApp(config);\n\nconst auth = firebase.auth();\nconst db = firebase.database();\n\nexport { fire, db, auth };\n\n// export default fire;\n","import { auth } from './fire';\r\n\r\n// Sign Up\r\nexport const createUser = (email: string, password: string) =>\r\n  auth.createUserWithEmailAndPassword(email, password);\r\n\r\n// Sign In\r\nexport const signInUser = (email: string, password: string) =>\r\n  auth.signInWithEmailAndPassword(email, password);\r\n\r\n// Sign out\r\nexport const signOut = () => auth.signOut();\r\n","import { db } from \"./fire\";\n\n// User API\n\nexport const doCreateUser = (id: any, userInfo: any) =>\n  db.ref(`users/${id}`).set(userInfo);\n\nexport const onceGetUsers = () => db.ref(\"users\").once(\"value\");\n\nexport const onceGetLeagues = () => db.ref(\"leagues\").once(\"value\");\n","export interface IEventEmitter<T> {\r\n  on(handler: (data?: T) => void): void;\r\n  off(handler: (data?: T) => void): void;\r\n}\r\n\r\nexport type IHandler<T> = (data?: T) => void;\r\n\r\nexport class EventEmitter<T> {\r\n  private handlers: Array<IHandler<T>> = [];\r\n\r\n  public on(handler: IHandler<T>): void {\r\n    this.handlers.push(handler);\r\n  }\r\n\r\n  public off(handler: IHandler<T>): void {\r\n    this.handlers = this.handlers.filter(h => h !== handler);\r\n  }\r\n\r\n  public trigger(data?: T) {\r\n    this.handlers.slice(0).forEach(h => h(data));\r\n  }\r\n}\r\n","import { fire } from '../firebase';\r\nimport { EventEmitter } from '../utils/events/EventEmitter';\r\nimport { IGameInvite } from './LeagueSrv';\r\n\r\n// TODO: handle posible of many notification\r\n// for example: two game invites from two different leagues\r\nclass NotificationsService {\r\n  private gameInviteEventEmitter: EventEmitter<\r\n    IGameInvite\r\n  > = new EventEmitter();\r\n\r\n  public registerGameInvite(callback: () => void) {\r\n    this.gameInviteEventEmitter.on(callback);\r\n\r\n    const userId = fire.auth().currentUser?.uid;\r\n    const gameInvitesRef = fire\r\n      .database()\r\n      .ref()\r\n      .child(`notifications/gameInvites`);\r\n\r\n    gameInvitesRef\r\n      .child(`/invitedPlayers/${userId}`)\r\n      .on('child_added', (invite) => {\r\n        gameInvitesRef.child(invite.val()).once('value', (snapshot) => {\r\n          console.log(snapshot.val());\r\n          this.gameInviteEventEmitter.trigger(snapshot.val());\r\n        });\r\n      });\r\n  }\r\n}\r\n\r\nexport default new NotificationsService();\r\n","import React from 'react';\r\n\r\nexport type UserContext = firebase.User | null;\r\n\r\nconst AuthUserContext = React.createContext<UserContext>(null);\r\n\r\nexport default AuthUserContext;\r\n","import React from 'react';\r\nimport { fire } from '../firebase';\r\nimport AuthUserContext from './AuthUserContext';\r\n\r\nconst withAuthentication = (Component: React.ComponentType) => {\r\n  class WithAuthentication extends React.Component {\r\n    public state = {\r\n      authUser: null,\r\n    };\r\n\r\n    componentDidMount() {\r\n      fire.auth().onAuthStateChanged(authUser => {\r\n        authUser\r\n          ? this.setState({ authUser })\r\n          : this.setState({ authUser: null });\r\n      });\r\n    }\r\n\r\n    render() {\r\n      const { authUser } = this.state;\r\n\r\n      return (\r\n        <AuthUserContext.Provider value={authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  return WithAuthentication;\r\n};\r\n\r\nexport default withAuthentication;\r\n","import React from \"react\";\nimport { withRouter, Link, RouteComponentProps } from \"react-router-dom\";\nimport { Form, Input, Button } from \"antd\";\nimport {\n  MailOutlined,\n  LockOutlined,\n  ArrowLeftOutlined\n} from \"@ant-design/icons\";\nimport * as routes from \"../constants/routes\";\nimport { auth } from \"../firebase\";\nimport AuthUserContext from \"./AuthUserContext\";\n\nimport \"./Login.scss\";\nimport { IFormValues } from \"../models/common/BasicTypes\";\n\nconst FormItem = Form.Item;\n\nexport interface ILoginState {\n  isLoading: boolean;\n}\n\nexport interface ILoginProps extends RouteComponentProps {}\n\nclass Login extends React.Component<ILoginProps, ILoginState> {\n  state = {\n    isLoading: false\n  };\n\n  private handleSubmit = (values: IFormValues) => {\n    this.setState({ isLoading: true });\n\n    const { history } = this.props;\n    const { email, password } = values;\n\n    auth\n      .signInUser(email, password)\n      .then(authUser => {\n        console.log(authUser);\n        history.push(routes.MAIN);\n      })\n      .catch(error => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // ...\n        alert(error.message);\n        this.setState({ isLoading: false });\n      });\n  };\n\n  public render() {\n    const { history } = this.props;\n    const { isLoading } = this.state;\n\n    return (\n      <AuthUserContext.Consumer>\n        {authUser =>\n          !authUser ? (\n            <Form onFinish={this.handleSubmit} className=\"login-form\">\n              <FormItem\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                    message: \"The input is not valid E-mail!\"\n                  },\n                  {\n                    required: true,\n                    message: \"Please input your email!\"\n                  }\n                ]}\n              >\n                <Input\n                  prefix={<MailOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                  placeholder=\"email\"\n                  size=\"large\"\n                />\n              </FormItem>\n              <FormItem\n                name=\"password\"\n                rules={[\n                  { required: true, message: \"Please input your Password!\" }\n                ]}\n              >\n                <Input\n                  prefix={<LockOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                  type=\"password\"\n                  placeholder=\"password\"\n                  size=\"large\"\n                />\n              </FormItem>\n              <FormItem>\n                {/* <a className=\"login-form-forgot\" href=\"\">\n                  Forgot password\n                </a> */}\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  size=\"large\"\n                  className=\"login-form-button\"\n                  loading={isLoading}\n                >\n                  Log in\n                </Button>\n                Or <Link to={routes.SIGN_UP}>register now!</Link>\n              </FormItem>\n            </Form>\n          ) : (\n            <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\n              <p>You are already logged in,</p>\n              <Button\n                type=\"primary\"\n                size=\"small\"\n                onClick={() => history.goBack()}\n                icon={<ArrowLeftOutlined />}\n              >\n                Go back\n              </Button>{\" \"}\n              or <Link to={routes.MAIN}>Go Home</Link>\n            </div>\n          )\n        }\n      </AuthUserContext.Consumer>\n    );\n  }\n}\n\nexport default withRouter(Login);\n","export const SIGN_IN = '/login';\r\nexport const SIGN_UP = '/signup';\r\nexport const MAIN = '/';\r\nexport const LEAGUE = '/league';\r\nexport const GAME = '/game';","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Form, Input, Button } from 'antd';\nimport {\n  SmileOutlined,\n  UserOutlined,\n  MailOutlined,\n  LockOutlined,\n} from '@ant-design/icons';\nimport { auth, db } from '../firebase';\nimport './Login.scss';\nimport { IFormValues } from '../models/common/BasicTypes';\nimport { FormInstance } from 'antd/lib/form';\n\nconst FormItem = Form.Item;\n\ninterface ISignUpState {\n  confirmDirty: boolean;\n  isLoading: boolean;\n}\n\ninterface ISignUpProps extends RouteComponentProps {}\n\nclass SignUp extends React.Component<ISignUpProps, ISignUpState> {\n  private formRef = React.createRef<FormInstance>();\n\n  public constructor(props: ISignUpProps) {\n    super(props);\n\n    this.state = {\n      confirmDirty: false,\n      isLoading: false,\n    };\n  }\n\n  private handleConfirmBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  };\n\n  private compareToFirstPassword = (rule: any, value: any, callback: any) => {\n    const form = this.formRef.current;\n\n    if (form && value && value !== form.getFieldValue('password')) {\n      callback('Two passwords that you enter is inconsistent!');\n    } else {\n      callback();\n    }\n  };\n\n  private validateToNextPassword = (rule: any, value: any, callback: any) => {\n    const form = this.formRef.current;\n\n    if (value && this.state.confirmDirty) {\n      form && form.validateFields(['confirm']);\n    }\n    callback();\n  };\n\n  private handleSubmit = (values: IFormValues) => {\n    this.setState({ isLoading: true });\n\n    const { name, nickname, email, password } = values;\n    auth\n      .createUser(email, password)\n      .then(authUser => {\n        // Create a user in own accessible Firebase Database too\n        authUser &&\n          authUser.user &&\n          db\n            .doCreateUser(authUser.user.uid, { name, nickname, email })\n            .then(() => {\n              this.props.history.push('/');\n            })\n            .catch(error => {\n              // Handle Errors here.\n              var errorCode = error.code;\n              var errorMessage = error.message;\n              // ...\n              alert(error.message);\n              this.setState({ isLoading: false });\n            });\n      })\n      .catch(error => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // ...\n        alert(error.message);\n        this.setState({ isLoading: false });\n      });\n  };\n\n  public render() {\n    const { isLoading } = this.state;\n\n    return (\n      <Form\n        onFinish={this.handleSubmit}\n        ref={this.formRef}\n        className=\"login-form\"\n      >\n        <FormItem\n          name=\"name\"\n          rules={[{ required: true, message: 'Please input your name!' }]}\n        >\n          <Input\n            prefix={<UserOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Name\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"nickname\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Nickname!',\n            },\n          ]}\n        >\n          <Input\n            prefix={<SmileOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Nickname\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"email\"\n          rules={[\n            {\n              type: 'email',\n              message: 'The input is not valid E-mail!',\n            },\n            {\n              required: true,\n              message: 'Please input your email!',\n            },\n          ]}\n        >\n          <Input\n            prefix={<MailOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Email\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Password!',\n            },\n            {\n              validator: this.validateToNextPassword,\n            },\n          ]}\n        >\n          <Input\n            prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            type=\"password\"\n            placeholder=\"Password\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"confirm\"\n          rules={[\n            {\n              required: true,\n              message: 'Please confirm your password!',\n            },\n            {\n              validator: this.compareToFirstPassword,\n            },\n          ]}\n        >\n          <Input\n            prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            type=\"password\"\n            placeholder=\"Confirm password\"\n            onBlur={this.handleConfirmBlur}\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            size=\"large\"\n            className=\"login-form-button\"\n            loading={isLoading}\n          >\n            Sign Up\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n}\n\nexport default withRouter(SignUp);\n","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Spin } from 'antd';\nimport { fire } from '../firebase';\nimport * as routes from '../constants/routes';\nimport AuthUserContext, { UserContext } from './AuthUserContext';\n\ninterface IWithAuthorizationProps extends RouteComponentProps {}\n\nconst withAuthorization = <TProps,>(\n  authCondition: (authUser: UserContext) => boolean\n) => (Component: React.ComponentType<TProps>) => {\n  class WithAuthorization extends React.Component<\n    IWithAuthorizationProps & TProps\n  > {\n    public componentDidMount() {\n      fire.auth().onAuthStateChanged((authUser: UserContext) => {\n        if (!authCondition(authUser)) {\n          this.props.history.push(routes.SIGN_IN);\n        }\n      });\n    }\n\n    public render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            authUser ? (\n              <Component {...this.props} />\n            ) : (\n              <div className=\"full-view loader\">\n                <Spin\n                  size=\"large\"\n                  style={{ width: '100%', position: 'relative', top: '50%' }}\n                />\n              </div>\n            )\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withRouter(WithAuthorization);\n};\n\nexport default withAuthorization;\n","import React, { Component } from 'react';\nimport { Modal, Form, Input, Select, Spin } from 'antd';\nimport { fire } from '../firebase';\nimport { onceGetUsers, onceGetLeagues } from '../firebase/db';\nimport { IBasicDialogProps } from './Dialog';\nimport { IPlayer, IRawPlayer } from '../models/ILeagueModel';\nimport { FormInstance } from 'antd/lib/form/Form';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\ninterface INewLeagueState {\n  showDialog: boolean;\n  loading: boolean;\n  savingLeagueLoader: boolean;\n  users: { [userKey: string]: IRawPlayer };\n  count: number;\n}\n\nexport interface INewLeagueProps extends IBasicDialogProps<number> {}\n\nclass NewLeague extends Component<INewLeagueProps, INewLeagueState> {\n  private leagueID: number | undefined;\n  private formRef = React.createRef<FormInstance>();\n\n  constructor(props: INewLeagueProps) {\n    super(props);\n\n    this.state = {\n      showDialog: this.props.visible,\n      users: {},\n      count: 0,\n      loading: true,\n      // addPlayerCollapse: [],\n      savingLeagueLoader: false,\n    };\n  }\n\n  fetchPlayers() {\n    onceGetUsers().then((snapshot) => {\n      if (snapshot.val()) {\n        this.setState({ users: snapshot.val(), loading: false });\n      } else {\n        this.setState({ loading: false });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetchPlayers();\n  }\n\n  render() {\n    const { showDialog, users, loading, savingLeagueLoader } = this.state;\n\n    return (\n      <Modal\n        title=\"Create League\"\n        visible={showDialog}\n        destroyOnClose={true}\n        maskClosable={false}\n        confirmLoading={savingLeagueLoader}\n        onOk={this.onCreateLeague}\n        onCancel={this.closeModal}\n        afterClose={this.afterClose}\n        // width=\"600px\"\n        okText=\"Save & Play\"\n        getContainer=\".app\"\n      >\n        <Form ref={this.formRef} layout=\"vertical\">\n          <FormItem\n            label=\"Title\"\n            name=\"title\"\n            rules={[\n              { required: true, message: 'Please input the league title!' },\n            ]}\n          >\n            <Input />\n          </FormItem>\n          <FormItem label=\"Description\" name=\"description\">\n            <Input type=\"textarea\" />\n          </FormItem>\n          {\n            <FormItem\n              label=\"Players\"\n              name=\"players\"\n              rules={[{ required: true, len: 4, type: 'array' }]}\n            >\n              <Select\n                mode=\"multiple\"\n                notFoundContent={loading ? <Spin size=\"small\" /> : null}\n              >\n                {Object.keys(users).map((key) => (\n                  <Option key={key} value={key}>\n                    {users[key].nickname}\n                  </Option>\n                ))}\n              </Select>\n            </FormItem>\n          }\n        </Form>\n      </Modal>\n    );\n  }\n\n  private onCreateLeague = () => {\n    const form = this.formRef.current;\n    const { users } = this.state;\n\n    form &&\n      form\n        .validateFields(['title', 'description', 'players'])\n        .then((values) => {\n          const { description } = values;\n          this.setState({ savingLeagueLoader: true });\n\n          const players: IPlayer[] = values.players.map((key: string) => ({\n            key,\n            nickname: users[key].nickname,\n          }));\n\n          onceGetLeagues().then((snapshot) => {\n            const lastID = snapshot.val() && snapshot.val().lastID;\n            const newID = lastID ? lastID + 1 : 1;\n\n            fire\n              .database()\n              .ref('leagues/list/_' + newID)\n              .set({\n                ...values,\n                players,\n                description: description || '',\n                leagueID: newID,\n                active: true,\n              })\n              .then(() => this.setNewLeagueID(newID));\n            fire.database().ref('leagues/lastID').set(newID);\n          });\n        });\n  };\n\n  private setNewLeagueID = (leagueID: number) => {\n    this.leagueID = leagueID;\n\n    this.closeModal();\n  };\n  // in order to preserve the animation when closing\n  // there is also an inner state although visible state initialy is from props\n  private closeModal = () => {\n    this.setState({\n      showDialog: false,\n    });\n  };\n\n  private afterClose = () => {\n    const { onAfterClose } = this.props;\n\n    if (typeof onAfterClose === 'function') {\n      onAfterClose(this.leagueID);\n    }\n  };\n}\n\nexport default NewLeague;\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Modal, List } from 'antd';\r\nimport './ResumeLeague.scss';\r\n\r\nclass ResumeLeague extends Component {\r\n  state = {\r\n    showDialog: this.props.visible,\r\n  };\r\n\r\n  closeModal(leagueID) {\r\n    // if leagueID - first close the modal then afterClose will pass the leagueID to rout to the right location\r\n    this.leagueID = leagueID;\r\n\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { afterClose, activeLeagues } = this.props;\r\n    const { showDialog } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        title=\"Resume League\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        maskClosable={false}\r\n        width=\"600px\"\r\n        footer={null}\r\n        onCancel={() => this.closeModal()}\r\n        afterClose={() => afterClose(this.leagueID)}\r\n      >\r\n        <p>List of open leagues</p>\r\n        <List\r\n          itemLayout=\"horizontal\"\r\n          dataSource={activeLeagues}\r\n          renderItem={item => (\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                title={\r\n                  <a onClick={() => this.closeModal(item.leagueID)}>\r\n                    {item.title}\r\n                  </a>\r\n                }\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ResumeLeague);\r\n","export const hasTouch = (): boolean =>\n  !!window.navigator.maxTouchPoints ||\n  'ontouchstart' in document.documentElement;\n\nexport function addListener(\n  element: HTMLElement,\n  type: string,\n  callback: (e: Event) => void\n) {\n  element.addEventListener(type, callback);\n\n  return () => {\n    element.removeEventListener(type, callback);\n  };\n}\n\nexport function isMobileBrowser(): boolean {\n  return (\n    typeof window.orientation !== 'undefined' ||\n    navigator.userAgent.indexOf('IEMobile') !== -1\n  );\n}\n\nexport const unique = <T>(array: T[]) => Array.from(new Set(array));\n","import React from \"react\";\nimport { Motion, spring } from \"react-motion\";\nimport { addListener } from \"../../utils/Utils\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport \"./DragPad.scss\";\n\nconst springSetting1 = { stiffness: 180, damping: 10 };\nconst springSetting2 = { stiffness: 120, damping: 17 };\n\nexport function reorder(arr, from, to) {\n  const _arr = [...arr];\n\n  if (Math.abs(from - to) === arr.length - 1) {\n    [_arr[to], _arr[from]] = [_arr[from], _arr[to]];\n  } else if (from < to && to - from > 1) {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.unshift(_arr.pop());\n    _arr.splice(to, 0, val);\n  } else {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.splice(to, 0, val);\n  }\n\n  return _arr;\n}\n\nfunction clamp(n, min, max) {\n  return Math.max(Math.min(n, max), min);\n}\n\nconst allColors = [\"#EF767A\", \"#9acaff\", \"#49BEAA\", \"#49DCB1\"];\nconst [count, width, height] = [4, 80, 80];\n\n// indexed by visual position\n// const layout = [0, 1, 2, 3].map(n => {\n//   const row = Math.floor(n / 3);\n//   const col = n % 3;\n//   return [width * col, height * row];\n// });\n\nconst layout = [\n  [width * 1, height * 0],\n  [width * 2, height * 1],\n  [width * 1, height * 2],\n  [width * 0, height * 1]\n];\n\nexport default class DragPad extends React.Component {\n  unListenTouchmove;\n  unListenTouchend;\n  unListenMousemove;\n  unListenMouseup;\n  colors;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mouseXY: [0, 0],\n      mouseCircleDelta: [0, 0], // difference between mouse and circle pos for x + y coords, for dragging\n      lastPress: null, // key of the last pressed component\n      isPressed: false,\n      order: props.players,\n      from: null,\n      to: null\n    };\n\n    this.colors = props.players.reduce((colorObj, player, i) => {\n      colorObj[player.key] = allColors[i];\n\n      return colorObj;\n    }, {});\n  }\n\n  componentDidMount() {\n    this.unListenTouchmove = addListener(\n      window,\n      \"touchmove\",\n      this.handleTouchMove\n    );\n    this.unListenTouchend = addListener(window, \"touchend\", this.handleMouseUp);\n    this.unListenMousemove = addListener(\n      window,\n      \"mousemove\",\n      this.handleMouseMove\n    );\n    this.unListenMouseup = addListener(window, \"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    this.unListenTouchmove();\n    this.unListenTouchend();\n    this.unListenMousemove();\n    this.unListenMouseup();\n  }\n\n  handleTouchStart = (key, pressLocation, e) => {\n    this.handleMouseDown(key, pressLocation, e.touches[0]);\n  };\n\n  handleTouchMove = e => {\n    e.preventDefault();\n    this.handleMouseMove(e.touches[0]);\n  };\n\n  handleMouseMove = ({ pageX, pageY }) => {\n    const {\n      order,\n      lastPress,\n      isPressed,\n      mouseCircleDelta: [dx, dy]\n    } = this.state;\n\n    if (isPressed) {\n      const mouseXY = [pageX - dx, pageY - dy];\n\n      const col = clamp(Math.round(mouseXY[0] / width), 0, 2);\n      const row = clamp(\n        Math.round(mouseXY[1] / height),\n        0,\n        Math.floor(count / 2)\n      );\n\n      // if col === 1 && row === 0 => index = 0;\n      // if col === 2 && row === 1 => index = 1;\n      // if col === 1 && row === 2 => index = 2;\n      // if col === 0 && row === 1 => index = 3;\n\n      let to = null;\n\n      if (col === 1 && row === 0) {\n        to = 0;\n      } else if (col === 2 && row === 1) {\n        to = 1;\n      } else if (col === 1 && row === 2) {\n        to = 2;\n      } else if (col === 0 && row === 1) {\n        to = 3;\n      }\n\n      const from = order.findIndex(p => p.key === lastPress);\n\n      const newOrder =\n        typeof to === \"number\" && to !== from && reorder(order, from, to);\n\n      this.setState({\n        mouseXY,\n        order: newOrder ? newOrder : [...order],\n        from: newOrder ? from : this.state.from,\n        to: newOrder ? to : this.state.to\n      });\n    }\n  };\n\n  handleMouseDown = (key, [pressX, pressY], { pageX, pageY }) => {\n    this.setState({\n      lastPress: key,\n      isPressed: true,\n      mouseCircleDelta: [pageX - pressX, pageY - pressY],\n      mouseXY: [pressX, pressY]\n    });\n  };\n\n  handleMouseUp = () => {\n    this.setState({ isPressed: false, mouseCircleDelta: [0, 0] });\n\n    if (typeof this.props.onChange === \"function\") {\n      const { order, from, to } = this.state;\n      this.props.onChange(order, from, to);\n    }\n  };\n\n  render() {\n    const { order, lastPress, isPressed, mouseXY } = this.state;\n\n    return (\n      <div className=\"drag-pad\">\n        <div className=\"drag-pad-content\">\n          {order.map((player, key) => {\n            let style;\n            let x;\n            let y;\n            const visualPosition = order.findIndex(p => p.key === player.key);\n            // const visualPosition = order.indexOf(player.index);\n            if (player.key === lastPress && isPressed) {\n              [x, y] = mouseXY;\n              style = {\n                translateX: x,\n                translateY: y,\n                scale: spring(1.2, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            } else {\n              [x, y] = layout[visualPosition];\n              style = {\n                translateX: spring(x, springSetting2),\n                translateY: spring(y, springSetting2),\n                scale: spring(1, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            }\n            return (\n              <Motion key={player.key} style={style}>\n                {({ translateX, translateY, scale, boxShadow }) => (\n                  <div\n                    onMouseDown={this.handleMouseDown.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    onTouchStart={this.handleTouchStart.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    className=\"player-icon\"\n                    style={{\n                      backgroundColor: this.colors[player.key],\n                      WebkitTransform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      transform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      zIndex: player.key === lastPress ? 99 : visualPosition,\n                      boxShadow: `${boxShadow}px 5px 5px rgba(0,0,0,0.5)`\n                    }}\n                  >\n                    <UserOutlined />\n                    <span>{player.nickname}</span>\n                  </div>\n                )}\n              </Motion>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import NewLeagueDialog from '../dialogs/NewLeague';\nimport ResumeLeagueDialog from '../dialogs/ResumeLeague';\nimport ReorderPlayers from '../dialogs/ReorderPlayers';\nimport NewGameDialog from '../dialogs/NewGameDialog/NewGameDialog';\nimport GameInvite from '../dialogs/GameInvite';\n\nexport enum Dialogs {\n  NEW_LEAGUE = 'NEW_LEAGUE',\n  RESUME_LEAGUE = 'RESUME_LEAGUE',\n  REORDER_PLAYERS = 'REORDER_PLAYERS',\n  NEW_GAME = 'NEW_GAME',\n  GAME_INVITE = 'GAME_INVITE',\n}\n\nexport const DialogsMapping = {\n  [Dialogs.NEW_LEAGUE]: NewLeagueDialog,\n  [Dialogs.RESUME_LEAGUE]: ResumeLeagueDialog,\n  [Dialogs.REORDER_PLAYERS]: ReorderPlayers,\n  [Dialogs.NEW_GAME]: NewGameDialog,\n  [Dialogs.GAME_INVITE]: GameInvite,\n};\n","import React, { Component } from 'react';\nimport { Modal } from 'antd';\nimport DragPad from '../common/dragPad/DragPad';\nimport { IBasicDialogProps } from './Dialog';\nimport { IPlayer } from '../models/ILeagueModel';\n\ninterface IReorderPlayersState {\n  showDialog: boolean;\n  order: IPlayer[];\n}\n\nexport interface IReorderPlayersProps extends IBasicDialogProps<any> {\n  players: IPlayer[];\n  onOk: (order: IPlayer[]) => void;\n}\n\nexport default class ReorderPlayers extends Component<\n  IReorderPlayersProps,\n  IReorderPlayersState\n> {\n  constructor(props: IReorderPlayersProps) {\n    super(props);\n\n    this.state = {\n      showDialog: props.visible,\n      order: props.players,\n    };\n\n    this.handleOnCancel = this.handleOnCancel.bind(this);\n    this.handleOnOk = this.handleOnOk.bind(this);\n    this.afterClose = this.afterClose.bind(this);\n    this.handleDragChange = this.handleDragChange.bind(this);\n  }\n\n  public render() {\n    const { players } = this.props;\n    const { showDialog } = this.state;\n\n    return (\n      <Modal\n        title=\"Reorder Players\"\n        visible={showDialog}\n        destroyOnClose={true}\n        maskClosable={false}\n        width=\"600px\"\n        onOk={this.handleOnOk}\n        onCancel={this.handleOnCancel}\n        afterClose={this.afterClose}\n      >\n        <DragPad players={players} onChange={this.handleDragChange} />\n      </Modal>\n    );\n  }\n\n  private handleOnCancel() {\n    this.setState({\n      showDialog: false,\n    });\n  }\n\n  private handleOnOk() {\n    this.setState({\n      showDialog: false,\n    });\n\n    const { onOk } = this.props;\n    if (typeof onOk === 'function') {\n      const { order } = this.state;\n      onOk(order);\n    }\n  }\n\n  private afterClose() {\n    const { onAfterClose } = this.props;\n\n    if (typeof onAfterClose === 'function') {\n      onAfterClose();\n    }\n  }\n\n  private handleDragChange(order: IPlayer[]) {\n    this.setState({\n      order,\n    });\n  }\n}\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport './NewGameDialog.scss';\r\nimport { GameMode } from '../../models/IGameModel';\r\nimport { IBasicDialogProps } from '../Dialog';\r\n\r\ninterface INewGameDialogState {\r\n  showDialog: boolean;\r\n  modeSelected?: GameMode;\r\n}\r\n\r\nexport interface INewGameDialogProps extends IBasicDialogProps<GameMode> {}\r\n\r\nexport default class NewGameDialog extends React.Component<\r\n  INewGameDialogProps,\r\n  INewGameDialogState\r\n> {\r\n  public constructor(props: INewGameDialogProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showDialog: props.visible,\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    const { showDialog } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        wrapClassName=\"remote-local-dialog\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        closable={false}\r\n        maskClosable={false}\r\n        centered={true}\r\n        width=\"300px\"\r\n        okText={'Frontal'}\r\n        cancelText={'OnLine'}\r\n        onOk={this.setGameMode('local')}\r\n        onCancel={this.setGameMode('remote')}\r\n        afterClose={this.handleAfterClose}\r\n        bodyStyle={{ display: 'none' }}\r\n      />\r\n    );\r\n  }\r\n\r\n  private setGameMode = (mode: GameMode) => () => {\r\n    this.setState({\r\n      showDialog: false,\r\n      modeSelected: mode,\r\n    });\r\n  };\r\n\r\n  private handleAfterClose = () => {\r\n    const { onAfterClose } = this.props;\r\n\r\n    if (typeof onAfterClose === 'function' && this.state.modeSelected) {\r\n      onAfterClose(this.state.modeSelected);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport { IGameInvite } from '../services/LeagueSrv';\r\nimport { IBasicDialogProps } from './Dialog';\r\n\r\ninterface IGameInviteState {\r\n  showDialog: boolean;\r\n}\r\n\r\nexport interface IGameInviteProps extends IBasicDialogProps<any> {\r\n  invite: IGameInvite;\r\n  onOk: () => void;\r\n}\r\n\r\nexport default class GameInvite extends React.Component<\r\n  IGameInviteProps,\r\n  IGameInviteState\r\n> {\r\n  public constructor(props: IGameInviteProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showDialog: props.visible,\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    const { showDialog } = this.state;\r\n    const { leagueTitle, newGameId, inviter } = this.props.invite;\r\n\r\n    return (\r\n      <Modal\r\n        title=\"Game Invite\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        closable={true}\r\n        maskClosable={false}\r\n        centered={true}\r\n        width=\"300px\"\r\n        okText={'Join'}\r\n        cancelText={'Cancel'}\r\n        onOk={this.handleOk}\r\n        onCancel={this.handleCancel}\r\n        afterClose={this.handleAfterClose}\r\n      >\r\n        <div>\r\n          {`${inviter.nickname} from ${leagueTitle} invites you to join game ${newGameId}`}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  private handleOk = () => {\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n\r\n    const { onOk } = this.props;\r\n    if (typeof onOk === 'function') {\r\n      onOk();\r\n    }\r\n  };\r\n\r\n  private handleCancel = () => {\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n  };\r\n\r\n  private handleAfterClose = () => {\r\n    const { onAfterClose } = this.props;\r\n\r\n    if (typeof onAfterClose === 'function') {\r\n      onAfterClose();\r\n    }\r\n  };\r\n}\r\n","export enum CARDS {\r\n  SPADE = 'SPADE',\r\n  HART = 'HART',\r\n  DIAMOND = 'DIAMOND',\r\n  CLUB = 'CLUB',\r\n  NT = 'NT',\r\n}\r\n\r\nexport const CardsType = {\r\n  [CARDS.CLUB]: 'C',\r\n  [CARDS.DIAMOND]: 'D',\r\n  [CARDS.HART]: 'H',\r\n  [CARDS.SPADE]: 'S',\r\n};\r\n","import React from 'react';\nimport { DialogsMapping, Dialogs } from '../constants/dialogs';\nimport { INewGameDialogProps } from './NewGameDialog/NewGameDialog';\nimport { IGameInviteProps } from './GameInvite';\nimport { IReorderPlayersProps } from './ReorderPlayers';\nimport { INewLeagueProps } from './NewLeague';\n\nexport interface IBasicDialogProps<T> {\n  visible: boolean;\n  onAfterClose?: <T>(arg?: T) => void;\n}\n\n// TODO: remove the any once all the dialogs are ts and implement dinamic typing\nexport type DialogProps =\n  | INewGameDialogProps\n  | IGameInviteProps\n  | IReorderPlayersProps\n  | INewLeagueProps\n  | any;\n\nexport interface IDialogProps {\n  dialog: Dialogs;\n  dialogProps?: DialogProps;\n}\n\nconst Dialog: React.FC<IDialogProps> = (props) => {\n  const { dialog, dialogProps } = props;\n  const DialogEl = DialogsMapping[dialog];\n\n  return <DialogEl {...dialogProps} />;\n};\n\nexport default Dialog;\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport Dialog, { DialogProps } from '../dialogs/Dialog';\r\nimport { Dialogs } from '../constants/dialogs';\r\n\r\nexport interface IMainMenuItem {\r\n  text: string;\r\n  onClick?: () => void;\r\n  dialog?: Dialogs;\r\n  disabled?: boolean;\r\n  dialogProps: DialogProps;\r\n}\r\n\r\nexport interface IMainMenuProps {\r\n  items: IMainMenuItem[];\r\n}\r\n\r\nconst MainMenu = (props: IMainMenuProps) => {\r\n  return (\r\n    <ul className=\"app-menu\">\r\n      {props.items.map((item, index) => {\r\n        const { onClick, text, dialog, dialogProps, disabled } = item;\r\n\r\n        // the Dialog should not be instanced unless it's visible\r\n        // in some Dialogs there are calls to the DB\r\n        return (\r\n          <li key={index}>\r\n            <Button onClick={onClick} size=\"large\" disabled={disabled} block>\r\n              {text}\r\n            </Button>\r\n            {dialog && dialogProps.visible ? (\r\n              <Dialog dialog={dialog} dialogProps={dialogProps} />\r\n            ) : (\r\n              ''\r\n            )}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default MainMenu;\r\n","import React, { Component } from 'react';\nimport { fire, auth } from '../firebase';\nimport withAuthorization from '../authentication/withAuthorization';\nimport MainMenu from './MainMenu';\nimport * as routes from './../constants/routes';\nimport { Dialogs } from './../constants/dialogs';\n\nclass Main extends Component {\n  // Dialogs visible states controling if the Dialog should be instansiated or not\n  // this outer state is for saving unnecessary access to the DB\n  state = {\n    activeLeagues: [],\n    newLeague: false,\n    resumeLeague: false,\n  };\n\n  /* Create reference to activeLeagues in Firebase Database */\n  activeLeagues = fire\n    .database()\n    .ref('leagues/list')\n    .orderByChild('active')\n    .equalTo(true);\n\n  fetch() {\n    this.activeLeagues.on('value', (snapshot) => {\n      if (snapshot.val()) {\n        const userId = fire.auth().currentUser.uid;\n\n        // filtering leagues data by userId,\n        // TODO: check if possible to fix the data differently in the database for better queries\n        // TODO: fix the loader functionality\n        this.setState({\n          activeLeagues: Object.values(snapshot.val()).filter(({ players }) =>\n            Object.values(players).some(({ key }) => key === userId)\n          ),\n          loading: false,\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.activeLeagues.off('value');\n  }\n\n  showResumeLeagueDialog() {\n    this.setState({\n      resumeLeague: true,\n    });\n  }\n\n  closeResumeLeagueDialog(leagueID) {\n    this.setState({\n      resumeLeague: false,\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  showNewLeagueDialog() {\n    this.setState({\n      newLeague: true,\n    });\n  }\n\n  closeNewLeagueDialog(leagueID) {\n    this.setState({\n      newLeague: false,\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  navigateToLeague(leagueID) {\n    if (leagueID) {\n      this.props.history.push(`${routes.LEAGUE}/` + leagueID);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"app-main\">\n        <MainMenu\n          items={[\n            {\n              text: 'Resume League',\n              onClick: this.showResumeLeagueDialog.bind(this),\n              dialog: Dialogs.RESUME_LEAGUE,\n              disabled: this.state.activeLeagues.length === 0,\n              dialogProps: {\n                afterClose: this.closeResumeLeagueDialog.bind(this),\n                visible: this.state.resumeLeague,\n                activeLeagues: this.state.activeLeagues,\n              },\n            },\n            {\n              text: 'Create League',\n              onClick: this.showNewLeagueDialog.bind(this),\n              dialog: Dialogs.NEW_LEAGUE,\n              dialogProps: {\n                onAfterClose: this.closeNewLeagueDialog.bind(this),\n                visible: this.state.newLeague,\n              },\n            },\n            { text: 'Settings' },\n            { text: 'Scores' },\n            {\n              text: 'Sign Out',\n              onClick: auth.signOut,\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nconst authCondition = (authUser) => !!authUser;\n\nexport default withAuthorization(authCondition)(Main);\n","export enum INPUT_MODE {\r\n  BID = 'BID',\r\n  WON = 'WON',\r\n}\r\n\r\nexport enum GAME_STATUS {\r\n  ACTIVE = 'ACTIVE',\r\n  FINISHED = 'FINISHED',\r\n}\r\n","import { IPlayer } from '../models/ILeagueModel';\r\nimport { fire } from '../firebase';\r\nimport { CardsType } from '../constants/cards';\r\nimport {\r\n  IPlayerHand,\r\n  ICardsFromTo,\r\n  ICardsPosition,\r\n  IRoundData,\r\n} from '../models/IGameModel';\r\nimport { ThrownCardType } from '../game/ThrownCard/ThrownCard';\r\n\r\nexport const getTotalWonBid = (roundData: IRoundData) => {\r\n  let currentTotalBid: number = 0;\r\n  let currentTotalWon: number = 0;\r\n  let allHasWonInput: boolean = true;\r\n\r\n  for (const [key, value] of Object.entries(roundData)) {\r\n    if (key.indexOf('bid') > -1 && value !== null && value !== '') {\r\n      currentTotalBid += value * 1;\r\n    }\r\n\r\n    if (key.indexOf('won') > -1) {\r\n      if (value !== null && value !== '') {\r\n        currentTotalWon += value * 1;\r\n      } else {\r\n        allHasWonInput = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { currentTotalBid, currentTotalWon, allHasWonInput };\r\n};\r\n\r\nexport const getTotalRemoteWonBid = (roundData: IRoundData) => {\r\n  let currentTotalBid: number = 0;\r\n  let currentTotalWon: number = 0;\r\n\r\n  [0, 1, 2, 3].forEach((player) => {\r\n    currentTotalBid += +roundData[`bid${player}`];\r\n    currentTotalWon += +roundData[`won${player}`];\r\n  });\r\n\r\n  return { currentTotalBid, currentTotalWon };\r\n};\r\n\r\nexport const calcIfRoundFell = (roundData: IRoundData): boolean => {\r\n  let didRoundFell = true;\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    const bid = `bid${i}`;\r\n    const won = `won${i}`;\r\n\r\n    if (\r\n      typeof roundData[bid] !== 'number' ||\r\n      typeof roundData[won] !== 'number'\r\n    ) {\r\n      didRoundFell = false;\r\n      break;\r\n    } else if (roundData[bid] === roundData[won]) {\r\n      didRoundFell = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return didRoundFell;\r\n};\r\n\r\nexport const cardsList: string[] = (function () {\r\n  const arr: string[] = [];\r\n  for (const type of Object.values(CardsType)) {\r\n    for (let i = 2; i < 15; i++) {\r\n      arr.push(`${i}-${type}`);\r\n    }\r\n  }\r\n\r\n  return arr;\r\n})();\r\n\r\nconst cardsFamilyScoreMap = {\r\n  [CardsType.CLUB]: 0,\r\n  [CardsType.DIAMOND]: 1,\r\n  [CardsType.HART]: 2,\r\n  [CardsType.SPADE]: 3,\r\n};\r\n\r\nexport const getDevicePlayerIndex = (players: IPlayer[]): number => {\r\n  return players.findIndex(\r\n    (player) => player.key === fire.auth().currentUser?.uid\r\n  );\r\n};\r\n\r\nexport const nextPlayerIndex = (index: number) => {\r\n  return index + 1 > 3 ? index + 1 - 4 : index + 1;\r\n};\r\n\r\nexport const dealCards = (players: IPlayer[]) => {\r\n  const shuffledCards = shuffleCards(cardsList);\r\n  const arrayOf4: string[][] = [[], [], [], []];\r\n\r\n  for (let i = 0; i < 52; i += 4) {\r\n    for (let j = 0; j < arrayOf4.length; j++) {\r\n      arrayOf4[j].push(shuffledCards[i + j]);\r\n    }\r\n  }\r\n\r\n  sortCardsArrays(arrayOf4);\r\n\r\n  return setCardsByPlayer(players, arrayOf4);\r\n};\r\n\r\nexport const shuffleCards = (cardsArray: string[]) => {\r\n  const cardsList = [...cardsArray];\r\n\r\n  for (let i = cardsList.length - 1; i > 0; i--) {\r\n    let j = Math.floor(Math.random() * (i + 1));\r\n    [cardsList[i], cardsList[j]] = [cardsList[j], cardsList[i]];\r\n  }\r\n\r\n  return cardsList;\r\n};\r\n\r\nconst setCardsByPlayer = (players: IPlayer[], cardsArr: string[][]) =>\r\n  players.reduce((obj, player, index) => {\r\n    obj[player.key] = cardsArr[index];\r\n    return obj;\r\n  }, {} as { [key: string]: string[] });\r\n\r\nconst sortCardsArrays = (cardsArray: string[][]) => {\r\n  cardsArray.forEach((arr) => sortCards(arr));\r\n};\r\n\r\nconst sortCards = (cards: string[]) =>\r\n  cards.sort((cardX, cardY) => {\r\n    const [cardXNum, cardXType] = cardX.split('-');\r\n    const [cardYNum, cardYType] = cardY.split('-');\r\n\r\n    if (cardsFamilyScoreMap[cardXType] < cardsFamilyScoreMap[cardYType]) {\r\n      return 1;\r\n    }\r\n    if (cardsFamilyScoreMap[cardXType] > cardsFamilyScoreMap[cardYType]) {\r\n      return -1;\r\n    }\r\n\r\n    return +cardXNum - +cardYNum;\r\n  });\r\n\r\nexport const uniqueHand = (hand: IPlayerHand[]) => {\r\n  const uniqueResult = [];\r\n  const map = new Map();\r\n\r\n  for (const playerHand of hand) {\r\n    if (!map.has(playerHand.player)) {\r\n      map.set(playerHand.player, true);\r\n\r\n      uniqueResult.push(playerHand);\r\n    }\r\n  }\r\n\r\n  return uniqueResult;\r\n};\r\n\r\nconst CARD_WIDTH = 90;\r\nconst CARD_HEIGHT = 126;\r\nconst CARD_MARKER_HEIGHT = 188;\r\n\r\nexport const getFromToCalc = (\r\n  thrownType: ThrownCardType,\r\n  markerTop: number,\r\n  markerWidth: number,\r\n  ownThrownCardInitPos: ICardsPosition\r\n): ICardsFromTo => {\r\n  switch (thrownType) {\r\n    case 'right':\r\n      return {\r\n        from: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth + CARD_WIDTH,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth / 2,\r\n        },\r\n      };\r\n\r\n    case 'left':\r\n      return {\r\n        from: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: -CARD_WIDTH,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth / 2 - CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'top':\r\n      return {\r\n        from: {\r\n          top: CARD_HEIGHT / 2,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT * 0.8,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    case 'bottom':\r\n      let fromTop: number | undefined = undefined;\r\n      let fromLeft: number | undefined = undefined;\r\n\r\n      if (ownThrownCardInitPos) {\r\n        fromTop = ownThrownCardInitPos.top;\r\n        fromLeft = ownThrownCardInitPos.left;\r\n      }\r\n\r\n      return {\r\n        from:\r\n          typeof fromTop === 'number' && typeof fromLeft === 'number'\r\n            ? {\r\n                top: fromTop,\r\n                left: fromLeft,\r\n              }\r\n            : undefined,\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT * 0.2,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    default:\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop,\r\n          left: markerWidth / 2,\r\n        },\r\n      };\r\n  }\r\n};\r\n\r\nexport const getToWinnerCalc = (\r\n  direction: ThrownCardType,\r\n  markerTop: number,\r\n  markerWidth: number\r\n) => {\r\n  switch (direction) {\r\n    case 'right':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth + CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'left':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: -CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'top':\r\n      return {\r\n        to: {\r\n          top: 0,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    case 'bottom':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT + CARD_HEIGHT * 3,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n  }\r\n};\r\n","import React from 'react';\n\nexport const Spade = () => (\n\t<svg  x=\"0px\" y=\"0px\" viewBox=\"0 0 511.96 511.96\" style={{enableBackground:'new 0 0 511.96 511.96'}} width=\"1em\" height=\"1em\">\n\t\t<g>\n\t\t\t<path d=\"M302.728,390.351c16.49,15.934,26.368,25.759,55.905,24.541c43.494-1.783,83.871-25.459,106.364-62.729\n\t\t\t\tc38.78-64.247,17.576-128.53-23.702-166.824L272.705,6.528c-9.507-8.704-24.082-8.704-33.589,0L68.073,185.34\n\t\t\t\tc-40.13,37.226-57.256,99.037-23.729,161.483c21.283,39.645,61.767,66.357,106.726,68.087c29.281,1.121,40.801-8.66,57.759-24.488\n\t\t\t\tc4.458-4.167,11.767-1.033,11.767,5.076l0.009,29.987c0,16.172-4.228,32.071-12.253,46.115l-15.519,27.154\n\t\t\t\tc-3.354,5.888,0.892,13.206,7.671,13.206h110.813c6.78,0,11.034-7.318,7.671-13.206l-15.519-27.154\n\t\t\t\tc-8.024-14.045-12.244-29.943-12.244-46.115v-30.296C291.226,389.213,298.429,386.202,302.728,390.351\"/>\n\t\t\t<path style={{fill:'#2A2D33'}}  d=\"M427.21,329.362c-8.701,14.419-21.869,26.091-37.482,33.362c-10.397,4.841-21.597,7.606-32.91,8.072\n\t\t\t\tc-4.871,0.201-8.657,4.312-8.457,9.184c0.201,4.871,4.312,8.657,9.184,8.457c13.661-0.563,27.144-3.891,39.635-9.707\n\t\t\t\tc18.759-8.735,34.611-22.785,45.145-40.244c19.021-31.51,20.189-64.061,7.087-94.822c-1.911-4.485-7.096-6.573-11.581-4.662\n\t\t\t\tc-4.485,1.911-6.573,7.096-4.662,11.581C444.131,276.316,443.177,302.911,427.21,329.362z\"/>\n\t\t</g>\n\t</svg>\n);\n\nexport const Hart = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 510.977 510.977\" style={{enableBackground:'new 0 0 510.977 510.977'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path style={{fill:'#D71E00'}} d=\"M255.22,105.177c19.535-49.77,61.325-87.79,113.231-87.79c43.705,0,79.625,23.111,108.871,54.44\n        c38.859,41.622,56.17,137.216-15.863,209.24c-36.546,36.546-205.815,212.524-205.815,212.524S86.384,317.613,49.838,281.066\n        c-72.033-72.024-55.578-167.618-15.863-209.24c29.581-31.002,65.165-54.44,108.871-54.44\n        C194.751,17.386,235.685,55.407,255.22,105.177\"/>\n      <path style={{fill:'#B21606'}} d=\"M429.848,94.824c26.006,21.865,39.538,63.103,31.858,97.341c-0.675,2.978-1.395,6.021-2.154,9.091\n        c-1.17,4.733,1.718,9.518,6.45,10.689c4.733,1.17,9.518-1.718,10.689-6.45c0.787-3.183,1.534-6.339,2.238-9.446\n        c9.114-40.635-6.622-88.592-37.718-114.736c-16.942-14.251-37.574-20.273-68.03-20.273c-4.875,0-8.828,3.952-8.828,8.828\n        s3.952,8.828,8.828,8.828C399.8,78.694,416.45,83.554,429.848,94.824z\"/>\n    </g>\n  </svg>\n);\n\nexport const Diamond = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <polygon style={{fill:'#D71E00'}} points=\"256,0 45.714,256 256,512 466.286,256 \t\"/>\n      <path style={{fill:'#B21606'}} d=\"M248.872,448.656c-3.162,3.937-2.533,9.692,1.404,12.853c3.937,3.162,9.692,2.533,12.853-1.404\n        l64-79.698c3.162-3.937,2.533-9.692-1.404-12.853c-3.937-3.162-9.692-2.533-12.853,1.404L248.872,448.656z\"/>\n    </g>\n  </svg>\n);\n\nexport const Club = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 511.998 511.998\" style={{enableBackground: 'new 0 0 511.998 511.998'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path d=\"M419.381,199.229c-26.651-12.378-51.541-12.674-74.177-7.186c18.441-21.827,29.058-50.472,27.396-81.642\n        C369.438,51,320.017,2.36,260.58,0.087c-66.578-2.542-121.353,50.67-121.353,116.682c0,28.699,10.393,54.937,27.567,75.273\n        c-22.636-5.488-47.526-5.192-74.177,7.186c-41.023,19.061-69.569,59.401-70.153,104.628\n        c-0.835,65.204,51.757,118.317,116.763,118.317c31.412,0,59.859-12.459,80.842-32.633v34.403c0,16.501-4.303,32.714-12.495,47.041\n        l-15.755,27.576c-3.422,5.991,0.907,13.438,7.797,13.438h112.766c6.899,0,11.219-7.446,7.797-13.438l-15.755-27.576\n        c-8.183-14.327-12.495-30.54-12.495-47.041V389.54c20.992,20.175,49.439,32.633,80.842,32.633\n        c65.006,0,117.607-53.113,116.763-118.317C488.95,258.629,460.403,218.289,419.381,199.229\"/>\n      <path style={{fill:'#2A2D33'}} d=\"M423.915,355.877c-13.621,13.805-31.752,21.385-51.142,21.385c-4.961,0-8.982,4.022-8.982,8.982\n        c0,4.961,4.022,8.982,8.982,8.982c24.196,0,46.934-9.506,63.927-26.729c16.991-17.2,26.197-40.066,25.888-64.288\n        c-0.063-4.96-4.136-8.93-9.096-8.867c-4.96,0.063-8.93,4.136-8.867,9.096C444.872,323.859,437.529,342.095,423.915,355.877z\"/>\n    </g>\n  </svg>  \n);\n\nexport const ChangePlayers = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <g>\n        <path d=\"M170.256,403.875c10.65-12.234,17.122-28.196,17.122-45.652c0-38.393-31.234-69.627-69.627-69.627\n          c-14.451,0-27.886,4.428-39.024,11.994c-1.632-10.049-2.463-20.254-2.463-30.537c0-49.249,18.842-95.868,53.054-131.273\n          c25.408-26.294,57.27-44.329,92.103-52.568l-23.142,27.868l23.133,19.21l59.366-71.49L201.539,17.43l-14.69,26.236l24.912,13.95\n          c-39.327,9.833-75.273,30.476-104.065,60.27c-39.659,41.041-61.5,95.081-61.5,152.168c0,20.2,2.752,40.155,8.17,59.414\n          c-3.996,8.772-6.241,18.504-6.241,28.756c0,17.491,6.497,33.483,17.185,45.726c-37.719,14.016-64.668,50.375-64.668,92.914v15.034\n          h234.473v-15.034C235.117,454.25,208.078,417.838,170.256,403.875z M117.752,318.665c21.813,0,39.558,17.746,39.558,39.558\n          s-17.746,39.558-39.559,39.558c-21.812,0-39.557-17.746-39.557-39.558S95.94,318.665,117.752,318.665z M32.362,481.828\n          c6.879-30.85,34.471-53.977,67.363-53.977h36.311c32.892,0,60.484,23.128,67.363,53.977H32.362z\"/>\n      </g>\n    </g>\n    <g>\n      <g>\n        <path d=\"M511.357,208.266c0-42.611-27.04-79.025-64.86-92.988c10.65-12.233,17.122-28.196,17.122-45.652\n          C463.619,31.234,432.385,0,393.992,0c-38.393,0-69.627,31.234-69.627,69.626c0,17.491,6.497,33.483,17.186,45.726\n          c-37.719,14.016-64.667,50.375-64.667,92.915v15.034h171.669c3.701,14.892,5.576,30.234,5.576,45.751\n          c0,45.405-16.341,89.291-46.014,123.576c-21.289,24.598-48.406,43.143-78.51,54.073l19.818-31.008l-25.335-16.193l-50.044,78.3\n          L358.173,512l11.325-27.855l-25.967-10.556c33.429-12.822,63.523-33.788,87.321-61.284\n          c34.401-39.748,53.347-90.623,53.347-143.254c0-15.46-1.611-30.777-4.793-45.751h31.952V208.266z M393.992,30.069\n          c21.813,0,39.558,17.746,39.558,39.557c0,21.813-17.746,39.558-39.558,39.558s-39.558-17.746-39.558-39.558\n          C354.434,47.814,372.179,30.069,393.992,30.069z M308.603,193.232c6.879-30.851,34.471-53.978,67.363-53.978h36.311\n          c32.892,0,60.484,23.128,67.363,53.978H308.603z\"/>\n      </g>\n    </g>\n    <g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n  </svg>\n);\n","import React from 'react';\nimport { Row, Col } from 'antd';\nimport { TrophyTwoTone } from '@ant-design/icons';\nimport { cardsRenderer } from './renderers';\n\nconst MobileTable = (props) => {\n  const {\n    dataSource: rounds,\n    players,\n    currentRound,\n    leagueScores,\n    gameID,\n  } = props;\n\n  // const onDragEnd = (fromIndex, toIndex) => {\n  //   console.log(\"onDragEnd\");\n  // };\n\n  return (\n    <div className=\"game-table\">\n      <h3 className=\"game-header\">Game {gameID}</h3>\n      <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n        <Col span={4}>\n          <div className=\"table-cell\">round</div>\n        </Col>\n        {getTableHeaders(players)}\n      </Row>\n\n      {rounds.map((round, i) => (\n        <Row\n          gutter={1}\n          className={`table-row ${\n            currentRound - 1 === i ? 'current-round' : ''\n          } ${round.fell ? 'round-fell' : ''}`}\n          key={i}\n        >\n          <Col span={4}>\n            <div className=\"table-cell\">\n              {i + 1}{' '}\n              {round.factor > 1 && (\n                <span className=\"round-factor\">{`x${round.factor}`}</span>\n              )}\n            </div>\n          </Col>\n          {getRoundCol(players, round)}\n        </Row>\n      ))}\n\n      <Row gutter={1} className={`table-row`}>\n        <Col span={4}>\n          <div className=\"table-cell\">\n            <TrophyTwoTone twoToneColor=\"#52c41a\" />\n          </div>\n        </Col>\n        {getLeagueScoresCol(players, leagueScores)}\n      </Row>\n    </div>\n  );\n};\n\nexport default MobileTable;\n\n///////////////////////////\n//\n// helpers\n//\n///////////////////////////\n\nexport const getTableHeaders = (players) =>\n  players.map(({ index: playerIndex, playerName }) => (\n    <Col key={playerIndex} span={5}>\n      <div className=\"table-cell\">{playerName}</div>\n    </Col>\n  ));\n\nconst getRoundCol = (players, roundData) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div\n        className={`table-cell score-cell ${\n          roundData[`bid${playerIndex}`] !== roundData[`won${playerIndex}`]\n            ? 'fell'\n            : ''\n        } ${playerIndex === roundData.highestBidder ? 'highest-bidder' : ''}`}\n      >\n        {roundData[`aggregateScore${playerIndex}`]}\n        {playerIndex === roundData.highestBidder && (\n          <span className=\"trump\">\n            {cardsRenderer(roundData.trump).children}\n          </span>\n        )}\n      </div>\n    </Col>\n  ));\n\nconst getLeagueScoresCol = (players, leagueScores) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div className={`table-cell`}>\n        {leagueScores[`leagueScore${playerIndex}`] !== ''\n          ? leagueScores[`leagueScore${playerIndex}`]\n          : '-'}\n      </div>\n    </Col>\n  ));\n","import React from \"react\";\nimport Icon from \"@ant-design/icons\";\nimport { Spade, Hart, Diamond, Club } from \"../cards/Icons\";\nimport { CARDS } from \"../../constants/cards\";\n\nexport const cardsRenderer = text => {\n  let card;\n  switch (text) {\n    case CARDS.SPADE:\n      card = <Icon component={Spade} />;\n      break;\n    case CARDS.HART:\n      card = <Icon component={Hart} />;\n      break;\n    case CARDS.DIAMOND:\n      card = <Icon component={Diamond} />;\n      break;\n    case CARDS.CLUB:\n      card = <Icon component={Club} />;\n      break;\n    case CARDS.NT:\n      card = \"NT\";\n      break;\n  }\n  return {\n    children: card\n  };\n};\n","import React, { Component } from 'react';\nimport { Button, Modal } from 'antd';\nimport Icon, { QuestionOutlined } from '@ant-design/icons';\nimport { Spade, Hart, Diamond, Club } from './Icons';\nimport './Modal.scss';\n\nclass CardsModal extends Component {\n  state = { visible: false };\n\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleCancel = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  onTrumpSelect(value) {\n    this.props.onChange(value);\n    this.setState({\n      visible: false,\n    });\n  }\n\n  trumpIconMap = {\n    SPADE: Spade,\n    HART: Hart,\n    DIAMOND: Diamond,\n    CLUB: Club,\n    NT: 'NT',\n  };\n\n  render() {\n    const { trump, disabled } = this.props;\n\n    return (\n      <div className=\"cards-modal\">\n        trump\n        <Button\n          ghost\n          className=\"card-btn\"\n          onClick={this.showModal}\n          disabled={disabled}\n        >\n          {trump ? (\n            trump === 'NT' ? (\n              'NT'\n            ) : (\n              <Icon component={this.trumpIconMap[trump]} />\n            )\n          ) : (\n            <QuestionOutlined />\n          )}\n        </Button>\n        <Modal\n          footer={null}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          className=\"cards-modal-dialog\"\n        >\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'SPADE')}\n          >\n            <Icon component={Spade} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'HART')}\n          >\n            <Icon component={Hart} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'DIAMOND')}\n          >\n            <Icon component={Diamond} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'CLUB')}\n          >\n            <Icon component={Club} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'NT')}\n          >\n            NT\n          </Button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default CardsModal;\n","import React, { Component } from 'react';\r\nimport { Button } from 'antd';\r\nimport './Pad.scss';\r\n\r\nexport default class NumbersPad extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMore: false,\r\n    };\r\n\r\n    this.toggleMore = this.toggleMore.bind(this);\r\n    this.onBtnClick = this.onBtnClick.bind(this);\r\n  }\r\n\r\n  toggleMore() {\r\n    this.setState({\r\n      showMore: !this.state.showMore,\r\n    });\r\n  }\r\n\r\n  onBtnClick(e) {\r\n    this.props.onSelect(e.target.textContent * 1);\r\n  }\r\n\r\n  render() {\r\n    const { disabled } = this.props;\r\n    const btnSize = 'default';\r\n    const { showMore } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"dial-pad\">\r\n          {!showMore ? this.getButtons(0, 10) : this.getButtons(10, 4)}\r\n          <Button\r\n            size={btnSize}\r\n            onClick={this.toggleMore}\r\n            className=\"more-less-btn\"\r\n            disabled={disabled}\r\n          >\r\n            {!showMore ? 'More...' : 'Less...'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getButtons = (baseNum, amount) => {\r\n    const { disabled, disabledNumber } = this.props;\r\n    const btnSize = 'default';\r\n\r\n    return Array(amount)\r\n      .fill(baseNum)\r\n      .map((num, i) => (\r\n        <Button\r\n          key={i}\r\n          onClick={this.onBtnClick}\r\n          size={btnSize}\r\n          disabled={disabled || disabledNumber === i + num}\r\n        >\r\n          {i + num}\r\n        </Button>\r\n      ));\r\n  };\r\n}\r\n","import React, { Component } from 'react';\n\nexport const CSS_TRANSITIONS = {\n  FADE_IN: 'fade-in',\n  SLIDE_UP: 'slide-up'\n}\n\nexport default class Css extends Component {\n  componentDidMount() {\n    const type = this.props.type;\n    this.div.classList.add(type);\n    setTimeout(() => this.div.classList.remove(type), 400);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.children !== this.props.children) {\n      const type = this.props.type;\n      this.div.classList.add(type);\n      setTimeout(() => this.div.classList.remove(type), 400);\n    }\n  }\n  render() {\n    return (\n      <div\n        className={''}\n        ref={(el) => this.div = el}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport './Pad.css';\nimport Css, { CSS_TRANSITIONS } from '../transition/Css';\n\nconst PlayerPad = (props) => {\n  const { name, bid, won, score } = props;\n\n  return (\n    <div className=\"player-pad\">\n      <div className=\"pad-name\">\n        {name}&nbsp;\n        {score !== undefined &&\n          <span className=\"pad-score\">\n            [<Css type={CSS_TRANSITIONS.SLIDE_UP}>{score}</Css>]\n        </span>}\n      </div>\n\n      <div className=\"pad-bid-won\">\n        Bid: {typeof bid === 'number' ? bid : ' '} Won: {won}\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerPad;","import React from 'react';\nimport './TwoWayArrow.css';\n\nexport const TWO_WAY_ARROW_DIRECTION = {\n  TOP: 'top',\n  BOTTOM: 'bottom'\n};\n\n// TODO: add option for horizontal arrow \n// https://codepen.io/hakimel/pen/gfIsk \n// https://codepen.io/Sloebel/pen/MdLKdY\n\nconst TwoWayArrow = (props) => {\n  return (\n    <div className={`arrow-indicator ${props.direction || ''}`}>\n      <span><i></i><i></i></span>\n      <i></i>\n      <span><i></i><i></i></span>\n    </div>\n  )\n};\n\nexport default TwoWayArrow;","import React, { useCallback } from 'react';\r\nimport './PlayCard.scss';\r\n\r\nexport interface IPlayCardProps {\r\n  card: string;\r\n  preSelected: boolean;\r\n  thrown: boolean;\r\n  disabled: boolean;\r\n  onCardClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\r\n}\r\n\r\nconst PlayCard = (props: IPlayCardProps) => {\r\n  const { card, preSelected, thrown, onCardClick, disabled } = props;\r\n\r\n  const clickHandler = useCallback(\r\n    (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      if (!disabled) {\r\n        onCardClick(event);\r\n      }\r\n    },\r\n    [onCardClick, disabled]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={`play-card ${preSelected ? 'pre-selected' : ''} ${\r\n        thrown ? 'thrown' : ''\r\n      } ${disabled ? 'disabled' : ''}`}\r\n      onClick={clickHandler}\r\n    >\r\n      <img src={require(`../../images/playCards/${card}.svg`)} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayCard;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './ThrownCard.scss';\r\n\r\nexport type ThrownCardType = 'top' | 'left' | 'right' | 'bottom';\r\n\r\nexport interface IThrownCardProps {\r\n  card?: string;\r\n  thrownType: ThrownCardType;\r\n  from?: { top: number; left: number };\r\n  to: { top: number; left: number };\r\n  hasWinner?: boolean;\r\n}\r\n\r\nconst ThrownCard = (props: IThrownCardProps) => {\r\n  const { card, thrownType, from, to, hasWinner } = props;\r\n  const [style, setStyle] = useState(from ? from : to);\r\n\r\n  useEffect(() => {\r\n    setStyle(to);\r\n  }, [to]);\r\n\r\n  return (\r\n    <div\r\n      className={`thrown-card ${thrownType} ${hasWinner ? 'has-winner' : ''}`}\r\n      style={{ ...style }}\r\n    >\r\n      {card && (\r\n        <img\r\n          src={require(`../../images/playCards/${card}.svg`)}\r\n          style={{ width: '90px' }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThrownCard;\r\n","import React, { Component } from 'react';\nimport { Radio, Switch, Badge, Row, Col, Modal, message, Button } from 'antd';\nimport Icon from '@ant-design/icons';\nimport CardsModal from '../../common/cards/Modal';\nimport { ChangePlayers } from '../../common/cards/Icons';\nimport NumbersPad from '../../common/numbers/Pad';\nimport PlayerPad from '../../common/player/Pad';\nimport { INPUT_MODE } from '../../constants/states';\nimport './GamePad.scss';\nimport Dialog from '../../dialogs/Dialog';\nimport { Dialogs } from '../../constants/dialogs';\nimport { PlayersContext } from '../GameTab';\nimport Css, { CSS_TRANSITIONS } from '../../common/transition/Css';\nimport TwoWayArrow, {\n  TWO_WAY_ARROW_DIRECTION,\n} from '../../common/twoWayArrow/TwoWayArrow';\nimport PlayCard from '../PlayCard/PlayCard';\nimport ThrownCard from '../ThrownCard/ThrownCard';\nimport {\n  nextPlayerIndex,\n  uniqueHand,\n  getFromToCalc,\n  getToWinnerCalc,\n} from '../../utils/game-utils';\nimport playerTurn from '../../assets/sounds/playerTurn.mp3';\n\nconst confirm = Modal.confirm;\nmessage.config({\n  top: 100,\n  maxCount: 3,\n});\n\nclass GamePad extends Component {\n  audio = new Audio(playerTurn);\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedPlayer: undefined,\n      reorderPlayersDialogVisible: false,\n      preSelectedCard: undefined,\n      thrownCard: undefined,\n      thrownCards: [],\n      handCardType: undefined,\n    };\n\n    this.handleSwitchMode = this.handleSwitchMode.bind(this);\n    this.handleCardsPadChange = this.handleCardsPadChange.bind(this);\n    this.handleNumberSelect = this.handleNumberSelect.bind(this);\n    this.setSelectedPlayer = this.setSelectedPlayer.bind(this);\n    this.showChangeHighestBidderConfirm = this.showChangeHighestBidderConfirm.bind(\n      this\n    );\n    this.showChangePlayerDialog = this.showChangePlayerDialog.bind(this);\n    this.handleReorderPlayersAfterClose = this.handleReorderPlayersAfterClose.bind(\n      this\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.gameMode === 'remote') {\n      const { devicePlayerIndex, ownCardsState } = this.props;\n      const currentRoundData = this.getRoundData();\n      const { handsState, currentHand, inputMode } = currentRoundData;\n\n      const {\n        allRounds: prevAllRounds,\n        currentRound: prevCurrentRound,\n      } = prevProps;\n      const prevCurrentRoundData =\n        prevAllRounds.length && prevAllRounds[prevCurrentRound - 1];\n\n      if (\n        prevCurrentRoundData.inputMode !== inputMode &&\n        inputMode === INPUT_MODE.WON\n      ) {\n        this.setState({\n          selectedPlayer: currentRoundData.highestBidder,\n        });\n      }\n\n      const prevHandsState = prevCurrentRoundData.handsState;\n      if (prevHandsState !== handsState) {\n        const stateToUpdate = {};\n        const thrown =\n          handsState &&\n          handsState[currentHand] &&\n          (handsState[currentHand]['thrownCards'] || []).find(\n            (thrown) => thrown.player === devicePlayerIndex\n          );\n\n        if (thrown && thrown.card && (ownCardsState || []).length > 1) {\n          stateToUpdate.thrownCard = thrown.card;\n        } else {\n          stateToUpdate.thrownCard = undefined;\n        }\n\n        if (handsState) {\n          const thrownCards = handsState[currentHand]['thrownCards']\n            ? uniqueHand([\n                ...this.state.thrownCards,\n                ...handsState[currentHand]['thrownCards'],\n              ])\n            : [];\n\n          stateToUpdate.thrownCards = thrownCards;\n          stateToUpdate.selectedPlayer = handsState[currentHand]['turnOf'];\n          stateToUpdate.handCardType =\n            thrownCards[0] && thrownCards[0].card.split('-')[1];\n        } else {\n          stateToUpdate.thrownCards = [];\n          stateToUpdate.selectedPlayer = currentRoundData.highestBidder;\n          stateToUpdate.handCardType = undefined;\n        }\n\n        if (\n          inputMode === INPUT_MODE.WON &&\n          stateToUpdate.selectedPlayer === devicePlayerIndex\n        ) {\n          this.playAudio();\n        }\n\n        this.setState(stateToUpdate);\n      }\n    }\n  }\n\n  handleSwitchMode(checked) {\n    const { onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { trump, segment, handsState } = roundData;\n\n    if (segment === 0) {\n      return message.warning('Total Bids are 13?!?!');\n    }\n\n    if (this.state.thrownCard || handsState) {\n      return message.warning('Can`t change bids after a card was thrown');\n    }\n\n    const everyoneBid = this.isAllBids(roundData);\n\n    if (trump && everyoneBid) {\n      this.setState({\n        selectedPlayer: undefined,\n      });\n\n      onChange({\n        ...roundData,\n        inputMode: checked ? INPUT_MODE.WON : INPUT_MODE.BID,\n      });\n    } else {\n      message.warning('Bids are not completed');\n    }\n  }\n\n  setSelectedPlayer(e) {\n    const { gameMode } = this.props;\n    const roundData = this.getRoundData();\n\n    if (gameMode === 'remote' && roundData.inputMode === INPUT_MODE.WON) {\n      return;\n    }\n\n    if (e.target.type === 'radio') {\n      this.setState({\n        selectedPlayer: e.target.value,\n      });\n    }\n  }\n\n  handleCardsPadChange(trump) {\n    const { onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode } = roundData;\n\n    if (inputMode !== INPUT_MODE.WON) {\n      onChange({ ...roundData, trump });\n    }\n  }\n\n  handleNumberSelect(num) {\n    const { players, currentRound, onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode, highestBidder } = roundData;\n    const { selectedPlayer } = this.state;\n    const mode = inputMode === INPUT_MODE.BID ? 'bid' : 'won';\n    const prop = mode + selectedPlayer;\n\n    const newRoundData = {};\n\n    if (inputMode === INPUT_MODE.BID) {\n      if (currentRound === 13) {\n        if (\n          (num >= 5 && !roundData[`bid${highestBidder}`]) ||\n          roundData[`bid${highestBidder}`] < num\n        ) {\n          newRoundData.highestBidder = selectedPlayer;\n        }\n      } else {\n        const nextPlayer = this.getNextPlayer(selectedPlayer, players);\n\n        if (\n          roundData[`bid${nextPlayer}`] === '' ||\n          nextPlayer === highestBidder\n        ) {\n          // validate first bid is more then 5\n          if (\n            (!highestBidder && highestBidder !== 0) ||\n            highestBidder === selectedPlayer\n          ) {\n            if (num < 5) {\n              return message.warning('First Bid should be more then 5');\n            } else {\n              newRoundData.highestBidder = selectedPlayer;\n            }\n          } else if (num >= 5) {\n            this.showChangeHighestBidderConfirm(\n              onChange,\n              roundData,\n              prop,\n              num,\n              selectedPlayer,\n              players\n            );\n          } else if (\n            !Number.isInteger(\n              roundData[`bid${this.getBeforePlayer(selectedPlayer, players)}`]\n            )\n          ) {\n            return message.warning('The Bids are not in the right order!!');\n          }\n        } else {\n          return message.warning(\n            'The Next Player already Bid, Can not change bid'\n          );\n        }\n      }\n    }\n\n    newRoundData[prop] = num;\n    onChange({ ...roundData, ...newRoundData }, selectedPlayer);\n  }\n\n  calculateDisableNum() {\n    const { players } = this.props;\n    const roundData = this.getRoundData();\n    const { highestBidder, inputMode } = roundData;\n    const { selectedPlayer } = this.state;\n\n    if (typeof selectedPlayer !== 'number') return undefined;\n\n    if (inputMode !== INPUT_MODE.BID) return undefined;\n\n    if (this.getNextPlayer(selectedPlayer, players) !== highestBidder)\n      return undefined;\n\n    // get the list of players bided before\n    const beforePlayers = this.getBeforePlayers(selectedPlayer, players);\n\n    // loop through 3 players before selectedPlayer\n    // if all bid already return segment else return undefined\n\n    let bids = 0;\n\n    for (const player of beforePlayers) {\n      const aBid = roundData[`bid${player}`];\n      if (aBid === null) return undefined;\n\n      bids += aBid;\n    }\n\n    return 13 - bids;\n  }\n\n  showChangeHighestBidderConfirm(\n    onChange,\n    roundData,\n    prop,\n    num,\n    selectedPlayer,\n    players\n  ) {\n    const getBeforePlayer = this.getBeforePlayer;\n\n    confirm({\n      title: 'Change Highest Bidder?',\n      content: '(will reset the rest of the bids)',\n      okType: 'danger',\n      onOk() {\n        onChange(\n          {\n            ...roundData,\n            bid0: null,\n            bid1: null,\n            bid2: null,\n            bid3: null,\n            [prop]: num,\n            highestBidder: selectedPlayer,\n          },\n          selectedPlayer\n        );\n      },\n      onCancel() {\n        if (!roundData[`bid${getBeforePlayer(selectedPlayer, players)}`]) {\n          message.warning('The Bids are not in the right order!!');\n          onChange({ ...roundData }, selectedPlayer);\n        } else {\n          onChange({ ...roundData, [prop]: num }, selectedPlayer);\n        }\n      },\n    });\n  }\n\n  getNextPlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    const nextIndex = index + 1 > 3 ? index + 1 - 4 : index + 1;\n\n    return players[nextIndex].index;\n  };\n\n  getBeforePlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    const beforeIndex = index - 1 > -1 ? index - 1 : index - 1 + 4;\n\n    return players[beforeIndex].index;\n  };\n\n  getBeforePlayers = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    return players\n      .filter((player) => index !== player.index)\n      .map((player) => player.index);\n  };\n\n  // getAfterPlayers = (selectedPlayer) => [1, 2, 3].map(afterPlayer => selectedPlayer + afterPlayer > 4 ? selectedPlayer + afterPlayer - 4 : selectedPlayer + afterPlayer);\n\n  getPlayerAggregateScore = (roundsData, roundIndex, playerIndex) => {\n    const roundData = roundsData[roundIndex];\n\n    if (!roundData) {\n      return 0;\n    }\n\n    const aggregateScore = roundData[`aggregateScore${playerIndex}`];\n    // if round.fell == true, look for round before\n    if (typeof aggregateScore === 'number' && !roundData.fell) {\n      return aggregateScore;\n    }\n\n    return this.getPlayerAggregateScore(\n      roundsData,\n      roundIndex - 1,\n      playerIndex\n    );\n  };\n\n  render() {\n    const { devicePlayerIndex, gameMode } = this.props;\n    const currentRoundData = this.getRoundData();\n    const {\n      round,\n      check,\n      trump,\n      segment,\n      inputMode,\n      fell,\n      factor,\n    } = currentRoundData;\n    const { selectedPlayer, reorderPlayersDialogVisible } = this.state;\n    const isAllBids = this.isAllBids(currentRoundData);\n    const playersButtons = this.getPlayersButtons();\n\n    return (\n      <Radio.Group\n        buttonStyle=\"solid\"\n        className={`game-pad-container ${fell ? 'round-fell' : ''}`}\n        onChange={this.setSelectedPlayer}\n        value={selectedPlayer}\n      >\n        <h3>Round: {round}</h3>\n        <Row type=\"flex\" justify=\"space-around\">\n          <Col>\n            <Switch\n              onChange={this.handleSwitchMode}\n              checkedChildren=\" Won \"\n              unCheckedChildren=\" Bid \"\n              checked={inputMode === INPUT_MODE.WON}\n            />\n            <div className=\"segment\">\n              Bids:{' '}\n              <Css type={CSS_TRANSITIONS.FADE_IN}>\n                {!isAllBids ? `${segment && 13 + segment}` : segment}\n              </Css>\n              <TwoWayArrow\n                direction={\n                  isAllBids &&\n                  (segment > 0\n                    ? TWO_WAY_ARROW_DIRECTION.TOP\n                    : TWO_WAY_ARROW_DIRECTION.BOTTOM)\n                }\n              />\n            </div>\n            <div>Check: {check ? 'yes' : 'no'}</div>\n            <Css type={CSS_TRANSITIONS.FADE_IN}>\n              {fell ? <div className=\"fell-indicator\">round fell</div> : ''}\n            </Css>\n            {!fell && factor > 1 && (\n              <div className=\"factor-indicator\">{`x${factor}`}</div>\n            )}\n          </Col>\n          <Col className=\"item item2\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex + 1)]}\n          </Col>\n          <Col>\n            <CardsModal\n              trump={trump}\n              onChange={this.handleCardsPadChange}\n              disabled={inputMode === INPUT_MODE.WON}\n            />\n          </Col>\n        </Row>\n\n        <div\n          className=\"thrown-cards-marker\"\n          ref={(el) => (this.cardsMarkerRef = el)}\n        ></div>\n\n        <Row type=\"flex\" justify=\"space-around\">\n          <Col className=\"item item4\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex)]}\n          </Col>\n          <Col style={{ zIndex: 1 }}>\n            {gameMode === 'remote' && inputMode === INPUT_MODE.WON ? (\n              <div className=\"number-pad-placement\"></div>\n            ) : (\n              <NumbersPad\n                disabledNumber={this.calculateDisableNum()}\n                onSelect={this.handleNumberSelect}\n                disabled={selectedPlayer === undefined}\n              />\n            )}\n          </Col>\n          <Col className=\"item item6\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex + 2)]}\n          </Col>\n        </Row>\n        <Row type=\"flex\" justify=\"center\" style={{ position: 'relative' }}>\n          <Col className=\"item item8\">{playersButtons[devicePlayerIndex]}</Col>\n          {gameMode !== 'remote' &&\n            round === 1 &&\n            inputMode === INPUT_MODE.BID && (\n              <div>\n                <Button\n                  type=\"dashed\"\n                  shape=\"circle\"\n                  className=\"change-players-btn\"\n                  onClick={this.showChangePlayerDialog}\n                >\n                  <Icon component={ChangePlayers} />\n                </Button>\n                {reorderPlayersDialogVisible && (\n                  <PlayersContext.Consumer>\n                    {({ players, reorderPlayers }) => (\n                      <Dialog\n                        dialog={Dialogs.REORDER_PLAYERS}\n                        dialogProps={{\n                          onOk: reorderPlayers,\n                          onAfterClose: this.handleReorderPlayersAfterClose,\n                          visible: reorderPlayersDialogVisible,\n                          players,\n                        }}\n                      />\n                    )}\n                  </PlayersContext.Consumer>\n                )}\n              </div>\n            )}\n        </Row>\n        {gameMode === 'remote' && this.getThrownCardsPlacement()}\n        {this.getCards()}\n      </Radio.Group>\n    );\n  }\n\n  getPlayersButtons = () => {\n    const { allRounds, currentRound, players } = this.props;\n    const currentRoundData = allRounds.length && allRounds[currentRound - 1];\n    const highestBidder = currentRoundData.highestBidder;\n\n    return players.map(({ index: playerIndex, playerName }, i) => {\n      return (\n        <Badge key={playerIndex} dot={highestBidder === playerIndex}>\n          <Radio.Button value={playerIndex}>\n            <PlayerPad\n              name={playerName}\n              bid={currentRoundData[`bid${playerIndex}`]}\n              won={currentRoundData[`won${playerIndex}`]}\n              score={this.getPlayerAggregateScore(\n                allRounds,\n                currentRound - 1,\n                playerIndex\n              )}\n            />\n          </Radio.Button>\n        </Badge>\n      );\n    });\n  };\n\n  showChangePlayerDialog() {\n    this.setState({\n      reorderPlayersDialogVisible: true,\n    });\n  }\n\n  handleReorderPlayersAfterClose() {\n    this.setState({\n      reorderPlayersDialogVisible: false,\n    });\n  }\n\n  getCards() {\n    const { ownCardsState, devicePlayerIndex } = this.props;\n    const {\n      preSelectedCard,\n      thrownCard,\n      handCardType,\n      selectedPlayer,\n    } = this.state;\n\n    if (ownCardsState) {\n      const hasCardType = Object.values(ownCardsState).some(\n        (card) => card.split('-')[1] === handCardType\n      );\n      const isDevicePlayer = devicePlayerIndex === selectedPlayer;\n\n      return (\n        <div className=\"cards-container\">\n          {Object.values(ownCardsState).map((card) => (\n            <PlayCard\n              key={card}\n              card={card}\n              preSelected={preSelectedCard === card}\n              thrown={thrownCard === card}\n              onCardClick={this.handleCardClick(card)}\n              disabled={\n                isDevicePlayer &&\n                hasCardType &&\n                card.split('-')[1] !== handCardType\n              }\n            />\n          ))}\n        </div>\n      );\n    }\n\n    return '';\n  }\n\n  // TODO: memoize it\n  getThrownCardsPlacement() {\n    if (!this.cardsMarkerRef) {\n      return '';\n    }\n    const currentRoundData = this.getRoundData();\n    const { handsState, currentHand } = currentRoundData;\n    const handWinner = handsState && handsState[currentHand].handWinner;\n    const { thrownCards } = this.state;\n    const { devicePlayerIndex } = this.props;\n    const fn = nextPlayerIndex;\n\n    const playerOnPadMap = {\n      [devicePlayerIndex]: 'bottom',\n      [fn(devicePlayerIndex)]: 'left',\n      [fn(devicePlayerIndex + 1)]: 'top',\n      [fn(devicePlayerIndex + 2)]: 'right',\n    };\n\n    const toWinner =\n      handWinner !== undefined &&\n      this.getFromTo(playerOnPadMap[handWinner], true);\n\n    return (\n      <div className=\"hand-cards-container\">\n        {thrownCards.map((thrown) => {\n          const { from, to } =\n            toWinner || this.getFromTo(playerOnPadMap[thrown.player]);\n\n          return (\n            <ThrownCard\n              key={thrown.player}\n              thrownType={playerOnPadMap[thrown.player]}\n              card={thrown.card}\n              from={from}\n              to={to}\n              hasWinner={handWinner !== undefined}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  handleCardClick = (card) => (e) => {\n    const { preSelectedCard, selectedPlayer } = this.state;\n    const {\n      currentRound,\n      devicePlayerIndex,\n      onCardThrown,\n      ownCardsState,\n    } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode } = roundData;\n\n    if (inputMode === INPUT_MODE.WON && selectedPlayer === devicePlayerIndex) {\n      if (preSelectedCard === card) {\n        // throw card\n\n        // set the initial position of own thrown card\n        const top = e.currentTarget.offsetParent.offsetTop - 15;\n        const left = e.currentTarget.offsetLeft;\n        this.ownThrownCardInitPos = { top, left };\n\n        this.setState({\n          thrownCards: [\n            ...this.state.thrownCards,\n            {\n              player: selectedPlayer,\n              card,\n            },\n          ],\n        });\n\n        onCardThrown(card, selectedPlayer, currentRound, roundData.currentHand);\n\n        this.setState({\n          thrownCard: card,\n          // preSelectedCard: undefined,\n        });\n      } else {\n        this.setState({\n          preSelectedCard: card,\n        });\n      }\n    }\n  };\n\n  // calculate end position by thrownType\n  getFromTo(type, toWinner) {\n    const markerTop = this.cardsMarkerRef && this.cardsMarkerRef.offsetTop;\n    const markerWidth = this.cardsMarkerRef && this.cardsMarkerRef.offsetWidth;\n\n    if (toWinner) {\n      return getToWinnerCalc(type, markerTop, markerWidth);\n    }\n\n    return getFromToCalc(\n      type,\n      markerTop,\n      markerWidth,\n      this.ownThrownCardInitPos\n    );\n  }\n\n  // TODO: memoize it\n  isAllBids = (roundData) =>\n    Array(4)\n      .fill(1)\n      .every((_, i) => typeof roundData[`bid${i}`] === 'number');\n\n  getRoundData() {\n    const { allRounds, currentRound } = this.props;\n    return allRounds.length && allRounds[currentRound - 1];\n  }\n\n  playAudio() {\n    this.audio.play();\n  }\n}\n\nexport default GamePad;\n","import React, { Component } from 'react';\nimport { Button } from 'antd';\nimport { RightOutlined, LeftOutlined } from '@ant-design/icons';\nimport MobileTable from '../common/table/MobileTable';\nimport GamePad from './GamePad/GamePad';\nimport { hasTouch, addListener } from '../utils/Utils';\n\nexport default class GameMobileView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.carouselEl = React.createRef();\n    this.carouselSwipedRight = this.carouselSwipedRight.bind(this);\n    this.carouselSwipedLeft = this.carouselSwipedLeft.bind(this);\n  }\n\n  componentDidMount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft = addListener(\n        this.carouselEl,\n        'swiped-left',\n        this.carouselSwipedLeft\n      );\n      this.unListenSwipedRight = addListener(\n        this.carouselEl,\n        'swiped-right',\n        this.carouselSwipedRight\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft();\n      this.unListenSwipedRight();\n    }\n  }\n\n  carouselSwipedLeft = () => {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== 'panel') {\n      onCurrentViewChange('panel');\n    } else {\n      this.carouselEl.classList.add('bounce-left');\n      setTimeout(() => this.carouselEl.classList.remove('bounce-left'), 400);\n    }\n  };\n\n  carouselSwipedRight() {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== 'table') {\n      onCurrentViewChange('table');\n    } else {\n      this.carouselEl.classList.add('bounce-right');\n      setTimeout(() => this.carouselEl.classList.remove('bounce-right'), 400);\n    }\n  }\n\n  nextRound = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round < 13) {\n      goToRound && goToRound(round + 1);\n    }\n  };\n\n  toRoundBefore = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round !== 1) {\n      goToRound && goToRound(round - 1);\n    }\n  };\n\n  render() {\n    const {\n      gameID,\n      gameMode,\n      ownCardsState,\n      currentView,\n      rounds,\n      playersColumns,\n      currentRound,\n      handleSave,\n      leagueScores,\n      devicePlayerIndex,\n      handleCardThrown,\n    } = this.props;\n\n    return (\n      <div\n        className={`game-mobile-view ${\n          gameMode === 'remote' ? 'mode-remote' : ''\n        }`}\n      >\n        <div className=\"my-carousel\" ref={(el) => (this.carouselEl = el)}>\n          <div className={`my-carousel-slides-container ${currentView}`}>\n            <div className=\"my-carousel-slide\">\n              <MobileTable\n                dataSource={rounds}\n                leagueScores={leagueScores}\n                players={playersColumns}\n                currentRound={currentRound}\n                gameID={gameID}\n              />\n            </div>\n            <div className=\"my-carousel-slide\">\n              <GamePad\n                gameMode={gameMode}\n                ownCardsState={ownCardsState}\n                onCardThrown={handleCardThrown}\n                currentRound={currentRound}\n                allRounds={rounds}\n                players={playersColumns}\n                devicePlayerIndex={devicePlayerIndex}\n                onChange={handleSave}\n              />\n            </div>\n          </div>\n        </div>\n        {gameMode !== 'remote' ||\n          (((ownCardsState || []).length === 0 || currentView === 'table') && (\n            <div className=\"round-navigation\">\n              {currentRound !== 1 && (\n                <Button\n                  type=\"primary\"\n                  className=\"left\"\n                  ghost\n                  onClick={this.toRoundBefore}\n                >\n                  <LeftOutlined />\n                  {`Round ${currentRound - 1}`}\n                </Button>\n              )}\n\n              {currentRound !== 13 && (\n                <Button type=\"primary\" ghost onClick={this.nextRound}>\n                  {`Round ${Number(currentRound) + 1}`}\n                  <RightOutlined />\n                </Button>\n              )}\n            </div>\n          ))}\n      </div>\n    );\n  }\n}\n","export const GAME_DEFAULT_SCORES = [10, 7, 3, 1];","import { fire } from '../firebase';\r\n\r\nexport default class GameService {\r\n  // the request to set cards by player will happen only if current user is the dealer\r\n  // but if the data already exist it will not override it (by database rules)\r\n  public static setCardsToPlayers(\r\n    gameKey: string,\r\n    round: number,\r\n    cardsByPlayer: {\r\n      [key: string]: string[];\r\n    }\r\n  ) {\r\n    fire\r\n      .database()\r\n      .ref()\r\n      .child(`cardsByGame/${gameKey}/round${round}`)\r\n      .update(\r\n        {\r\n          cardsState: cardsByPlayer,\r\n        },\r\n        (error) => {\r\n          if (error) {\r\n            console.error('cards state probably already exists');\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  public static updateHandCardsState(\r\n    gameKey: string,\r\n    round: number,\r\n    cardIndex: string\r\n  ) {\r\n    const userId = fire.auth().currentUser?.uid;\r\n\r\n    if (userId) {\r\n      fire\r\n        .database()\r\n        .ref()\r\n        .child(`cardsByGame/${gameKey}/round${round}/cardsState/${userId}`)\r\n        .update({ [`${cardIndex}`]: null });\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fire } from './../firebase';\nimport { Button, message } from 'antd';\nimport { TableOutlined, BorderOuterOutlined } from '@ant-design/icons';\nimport {\n  getDevicePlayerIndex,\n  dealCards,\n  nextPlayerIndex,\n  getTotalWonBid,\n  calcIfRoundFell,\n  getTotalRemoteWonBid,\n} from '../utils/game-utils';\nimport './GameTab.scss';\nimport { GAME_STATUS, INPUT_MODE } from '../constants/states';\n// import Loader from '../common/loader/Loader';\nimport GameMobileView from './GameMobileView';\nimport { GAME_DEFAULT_SCORES } from '../constants/scores';\nimport GameService from '../services/GameSrv';\nimport { CardsType } from '../constants/cards';\n\nexport const PlayersContext = React.createContext();\n\nclass GameTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      players: props.players,\n      devicePlayerIndex: null, //this.getDevicePlayerIndex(props.players),\n      columns: [], //this.initColumns(props.players),\n      currentView: 'table',\n      gameData: {\n        currentRound: 1,\n        dealer: undefined,\n        rounds: [],\n        totalScore0: 0,\n        totalScore1: 0,\n        totalScore2: 0,\n        totalScore3: 0,\n        status: '',\n      },\n      gameSummary: {\n        // leagueScore0: '',\n        // leagueScore1: '',\n        // leagueScore2: '',\n        // leagueScore3: '',\n      },\n    };\n\n    this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.setCurrentViewState = this.setCurrentViewState.bind(this);\n    // this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.handleReorderPlayers = this.handleReorderPlayers.bind(this);\n  }\n\n  fetch() {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID, gameID } = params;\n\n    const db = fire.database();\n\n    if (this.gameRef) {\n      this.gameRef.off('value');\n    }\n\n    this.leagueGamesRef = db\n      .ref(`leagueGames/_${leagueID * 1}`)\n      .orderByChild('gameID')\n      .equalTo(gameID * 1);\n\n    this.leagueGamesRef.once('value', (snapshot) => {\n      const gameData = Object.values(snapshot.val())[0];\n      const gameKey = Object.keys(snapshot.val())[0];\n      this.gameKey = gameKey;\n      this.gameRef = db.ref(`games/${gameKey}`);\n      this.gameSummaryRef = db.ref(\n        `leagueGamesSummary/_${leagueID * 1}/${gameKey}/players`\n      );\n      const { gameMode } = gameData;\n\n      const players = gameData.playersOrder\n        ? gameData.playersOrder\n        : this.props.players;\n\n      this.setState({\n        players,\n        columns: this.initColumns(players),\n        devicePlayerIndex: getDevicePlayerIndex(players),\n      });\n\n      this.gameRef.on('value', (snap) => {\n        const gameRefData = snap.val();\n\n        this.setState({\n          gameData: {\n            ...this.state.gameData,\n            gameMode,\n            ...gameRefData,\n          },\n        });\n\n        this.props.loaderStateCb(false);\n      });\n\n      this.gameSummaryRef.on('value', (snap) => {\n        this.setState({\n          gameSummary: {\n            ...snap.val(),\n          },\n        });\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameRef.off('value');\n    this.gameSummaryRef.off('value');\n    if (this.ownCardsStateRef) {\n      this.ownCardsStateRef.off('value');\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.match.params.gameID !== this.props.match.params.gameID) {\n      this.fetch();\n    }\n\n    const { gameData } = this.state;\n\n    if (\n      prevState.gameData.gameMode !== gameData.gameMode ||\n      prevState.gameData.currentRound !== gameData.currentRound\n    ) {\n      this.handleGameModeChange();\n    }\n\n    if (prevState.gameData !== gameData) {\n      const { currentRound, dealer, gameMode } = gameData;\n      const roundData = this.getRoundData(currentRound);\n\n      if (gameMode === 'remote' && roundData) {\n        const { handsState, currentHand } = roundData;\n        const currentHandState = handsState && handsState[currentHand];\n        const userId = fire.auth().currentUser?.uid;\n\n        if (\n          currentHandState &&\n          (currentHandState.thrownCards || []).length === 4 &&\n          currentHandState.status === 'ACTIVE'\n        ) {\n          setTimeout(() => {\n            if (dealer === userId) {\n              this.handleHandFinished(roundData);\n            }\n          }, 2500);\n        }\n\n        if (\n          currentHand === 13 &&\n          handsState[currentHand].status === 'FINISHED' &&\n          dealer === userId\n        ) {\n          this.calculateHandScore(roundData);\n        }\n      }\n    }\n  }\n\n  handleSave = (row, player) => {\n    const stateToUpdate = {};\n    let summaryToUpdate;\n    const prevRounds = this.state.gameData.rounds;\n    const newData = [...prevRounds];\n    const index = newData.findIndex((item) => row.round === item.round);\n\n    const item = newData[index];\n\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n\n    // reference to the new Data relevant row to update with score and segment\n    row = newData[index];\n\n    if (typeof player === 'number') {\n      // calculate score\n      this.calculatePlayerScore(row, player, newData, index, stateToUpdate);\n\n      //update O/U\n      const {\n        currentTotalBid,\n        currentTotalWon,\n        allHasWonInput,\n      } = getTotalWonBid(row);\n\n      row.segment = currentTotalBid !== null ? currentTotalBid - 13 : null;\n      row.check = allHasWonInput && currentTotalWon === 13;\n\n      // calculate if round fell - change next round factor\n      if (row.check) {\n        const didRoundFell = calcIfRoundFell(row);\n\n        if (didRoundFell) {\n          row.fell = true;\n\n          if (row.round < 12) {\n            // because metaData index is zero based row.round value is next round index\n            newData[row.round].factor = row.factor * 2;\n          } else if (row.factor > 1) {\n            newData[row.round].factor = row.factor;\n          }\n        } else if (row.fell) {\n          row.fell = false;\n          if (newData[row.round]) {\n            newData[row.round].factor =\n              row.factor > 1 ? row.factor / 2 : row.factor;\n          }\n\n          for (let i = 0; i < 4; i++) {\n            this.calculatePlayerScore(row, i, newData, index, stateToUpdate);\n          }\n        }\n\n        // calculate round summary stats\n        summaryToUpdate = this.calculateSummary(newData, index);\n\n        if (row.round === 13 && !row.fell) {\n          stateToUpdate.status = GAME_STATUS.FINISHED;\n          this.updateGameStatus(GAME_STATUS.FINISHED);\n\n          // round summary league scores\n          const {\n            totalScore0,\n            totalScore1,\n            totalScore2,\n            totalScore3,\n          } = this.state.gameData;\n          const scores = { totalScore0, totalScore1, totalScore2, totalScore3 };\n          scores[`totalScore${player}`] = stateToUpdate[`totalScore${player}`];\n          summaryToUpdate = this.calculateLeagueScores(scores, summaryToUpdate);\n        }\n\n        this.gameSummaryRef.update(this.mapToPlayersObj(summaryToUpdate));\n      }\n    }\n\n    if (this.state.gameData.gameMode === 'remote') {\n      console.log(row.inputMode);\n      // prev round inputMode === BID\n      // round inputMode === WON\n      // set players with won === 0;\n      const prevRound = prevRounds[index];\n\n      if (\n        prevRound.inputMode === INPUT_MODE.BID &&\n        row.inputMode === INPUT_MODE.WON\n      ) {\n        [0, 1, 2, 3].forEach((player) => {\n          row[`won${player}`] = 0;\n        });\n      }\n    }\n\n    stateToUpdate.rounds = newData;\n\n    // this.setState(stateToUpdate);\n    this.gameRef.update(stateToUpdate);\n  };\n\n  handleCardThrown = (card, player, currentRound, currentHand) => {\n    const roundData = this.getRoundData(currentRound);\n    const thrownCards =\n      (roundData &&\n        roundData.handsState &&\n        roundData.handsState[currentHand].thrownCards) ||\n      [];\n    const newThrownCards = [...thrownCards, { player, card }];\n\n    const {\n      gameData: { ownCardsState },\n    } = this.state;\n\n    this.gameRef\n      .child(`rounds/${currentRound - 1}/handsState/${currentHand}`)\n      .update({\n        status: 'ACTIVE',\n        turnOf: newThrownCards.length !== 4 ? nextPlayerIndex(player) : null,\n        thrownCards: newThrownCards,\n      })\n      .then(() => this.updateOwnCardState(card, currentRound, ownCardsState));\n  };\n\n  calculatePlayerScore = (\n    round,\n    player,\n    roundsData,\n    currentRound,\n    stateToUpdate\n  ) => {\n    let rowScore;\n\n    const bid = round[`bid${player}`];\n    const won = round[`won${player}`];\n\n    if (won !== '' && bid !== '') {\n      if (won === bid) {\n        if (won * 1 === 0) {\n          rowScore = round.segment > 0 ? 25 : 50;\n        } else {\n          rowScore = Math.pow(won, 2) + 10;\n        }\n      } else {\n        const diff = Math.abs(won - bid);\n\n        if (bid * 1 === 0) {\n          rowScore = -(round.segment > 0 ? 25 : 50) + (diff - 1) * 10;\n        } else {\n          rowScore = diff * -10;\n        }\n      }\n\n      rowScore *= round.factor;\n\n      round[`score${player}`] = rowScore;\n\n      //calculate aggregate score\n      let aggregateScore = 0;\n      for (let i = 0; i <= currentRound; i++) {\n        const round = roundsData[i];\n\n        if (typeof round[`score${player}`] === 'number' && !round.fell) {\n          aggregateScore += round[`score${player}`];\n        }\n      }\n      round[`aggregateScore${player}`] = aggregateScore;\n      stateToUpdate[`totalScore${player}`] = round[`aggregateScore${player}`];\n    }\n  };\n\n  calculateLeagueScores = (scores, summaryToUpdate) => {\n    const sortedScores = Object.keys(scores).sort(\n      (a, b) => scores[b] - scores[a]\n    );\n\n    sortedScores.forEach((scoreIndex, i) => {\n      const score = scores[scoreIndex];\n      let leagueScore = GAME_DEFAULT_SCORES[i];\n\n      // score < 0 => -1\n      if (score < 0) {\n        leagueScore--;\n      }\n\n      // score reminder from 100 == 0 => leagueScore + 1\n      if (score % 100 === 0) {\n        leagueScore++;\n      }\n\n      // score > 300 => +3\n      if (score > 300) {\n        leagueScore += 3;\n      }\n\n      // score < -100 => -3\n      if (score < -100) {\n        leagueScore -= 3;\n      }\n\n      summaryToUpdate[`${scoreIndex.slice(-1)}`].leagueScore = leagueScore;\n    });\n\n    return summaryToUpdate;\n  };\n\n  calculateSummary = (roundsData, currentRoundIndex) => {\n    const currentRound = currentRoundIndex + 1;\n    const playersSummary = {};\n\n    for (let pIndex = 0; pIndex < 4; pIndex++) {\n      playersSummary[pIndex] = {};\n      let stood = 0;\n      let totalRounds = 0;\n      let totalHBrounds = 0;\n      let stoodWhileHB = 0;\n      let stoodInOver = 0;\n      let totalOverRounds = 0;\n      let stoodInUnder = 0;\n      let totalNTrounds = 0;\n      let stoodInNT = 0;\n      let stoodWhenLastBidder = 0;\n      let totalStoodWhenLastBidder = 0;\n\n      for (let rIndex = 0; rIndex < currentRound; rIndex++) {\n        const round = roundsData[rIndex];\n        if (!round.fell) {\n          totalRounds++;\n          const highestBidder = round.highestBidder === pIndex;\n          const lastBidder =\n            !highestBidder &&\n            (pIndex + 1 > 3 ? 0 : pIndex + 1) === round.highestBidder;\n\n          if (highestBidder) {\n            totalHBrounds++;\n          } else if (lastBidder) {\n            totalStoodWhenLastBidder++;\n          }\n\n          if (round.segment > 0) {\n            totalOverRounds++;\n          }\n\n          if (round.trump === 'NT') {\n            totalNTrounds++;\n          }\n\n          if (round[`bid${pIndex}`] === round[`won${pIndex}`]) {\n            stood++;\n\n            if (highestBidder) {\n              stoodWhileHB++;\n            } else if (lastBidder) {\n              stoodWhenLastBidder++;\n            }\n\n            if (round.trump === 'NT') {\n              stoodInNT++;\n            }\n\n            round.segment > 0 ? stoodInOver++ : stoodInUnder++;\n          }\n        }\n      }\n\n      const successRate = { wins: stood, total: totalRounds };\n      const successRateHB = { wins: stoodWhileHB, total: totalHBrounds };\n      const successRateOver = { wins: stoodInOver, total: totalOverRounds };\n      const successRateUnder = {\n        wins: stoodInUnder,\n        total: totalRounds - totalOverRounds,\n      };\n      const successRateNT = { wins: stoodInNT, total: totalNTrounds };\n      const successRateLastBidder = {\n        wins: stoodWhenLastBidder,\n        total: totalStoodWhenLastBidder,\n      };\n\n      playersSummary[pIndex] = {\n        successRate: Number.isNaN(successRate) ? '' : successRate,\n        successRateHB,\n        successRateOver,\n        successRateUnder,\n        successRateNT,\n        successRateLastBidder,\n      };\n    }\n\n    return playersSummary;\n  };\n\n  mapToPlayersObj = (summaryToUpdate) => {\n    const { players, gameSummary } = this.state;\n\n    return players.reduce((obj, player, index) => {\n      obj[player.key] = {\n        ...gameSummary[player.key],\n        ...summaryToUpdate[index],\n      };\n\n      return obj;\n    }, {});\n  };\n\n  updateGameStatus = (status) => {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID } = params;\n\n    fire\n      .database()\n      .ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`)\n      .update({ status });\n  };\n\n  toggleSlide = () => {\n    const currentView = this.state.currentView === 'panel' ? 'table' : 'panel';\n    this.setCurrentViewState(currentView);\n  };\n\n  setCurrentViewState(currentView) {\n    this.setState({ currentView });\n  }\n\n  selectActiveRound(newRound) {\n    const { gameData, currentView } = this.state;\n    const { rounds, currentRound, gameMode, dealer } = gameData;\n    const userId = fire.auth().currentUser?.uid;\n\n    if (\n      Number(newRound) < Number(currentRound) ||\n      rounds[currentRound - 1].check\n    ) {\n      this.gameRef.update({\n        currentRound: Number(newRound),\n      });\n\n      if (currentView === 'table') {\n        this.toggleSlide();\n      }\n\n      if (\n        gameMode === 'remote' &&\n        dealer === userId &&\n        !rounds[newRound - 1].handsState\n      ) {\n        // deal cards\n        const { players } = this.state;\n        const cardsByPlayer = dealCards(players);\n\n        // *** if cards already exist for this round firebase will block the update\n        GameService.setCardsToPlayers(this.gameKey, newRound, cardsByPlayer);\n      }\n    } else {\n      message.warning('Current round is not completed');\n    }\n  }\n\n  handleReorderPlayers(newOrder) {\n    this.setState({\n      players: newOrder,\n      devicePlayerIndex: getDevicePlayerIndex(newOrder),\n      columns: this.initColumns(newOrder),\n    });\n\n    const { params } = this.props.match;\n    const { leagueID } = params;\n    fire\n      .database()\n      .ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`)\n      .update({ playersOrder: newOrder });\n  }\n\n  getLeagueScores = () => {\n    const players = this.state.players;\n    const { gameSummary } = this.state;\n\n    if (Object.keys(gameSummary).length === 0) {\n      return {\n        leagueScore0: '',\n        leagueScore1: '',\n        leagueScore2: '',\n        leagueScore3: '',\n      };\n    }\n\n    return players.reduce((summaryObj, player, i) => {\n      summaryObj[`leagueScore${i}`] = gameSummary[player.key].leagueScore;\n      return summaryObj;\n    }, {});\n  };\n\n  render() {\n    const {\n      columns,\n      currentView,\n      gameData,\n      players,\n      devicePlayerIndex,\n    } = this.state;\n    const { rounds, currentRound, gameMode, ownCardsState } = gameData;\n    const { match } = this.props;\n    const { params } = match;\n    const { gameID } = params;\n    const playersColumns = columns.slice(0, 4);\n\n    return (\n      <PlayersContext.Provider\n        value={{ players, reorderPlayers: this.handleReorderPlayers }}\n      >\n        {createPortal(\n          <Button\n            className=\"toggle-view-btn\"\n            type=\"link\"\n            onClick={this.toggleSlide}\n            icon={\n              currentView === 'table' ? (\n                <BorderOuterOutlined />\n              ) : (\n                <TableOutlined />\n              )\n            }\n          />,\n          document.querySelector('#app-header') || document.body\n        )}\n\n        <GameMobileView\n          gameID={gameID}\n          gameMode={gameMode}\n          currentView={currentView}\n          rounds={rounds}\n          ownCardsState={ownCardsState}\n          handleCardThrown={this.handleCardThrown}\n          // handState={}\n          playersColumns={playersColumns}\n          devicePlayerIndex={devicePlayerIndex}\n          currentRound={currentRound}\n          handleSave={this.handleSave}\n          onCurrentViewChange={this.setCurrentViewState}\n          goToRound={this.selectActiveRound}\n          leagueScores={this.getLeagueScores()}\n        />\n      </PlayersContext.Provider>\n    );\n  }\n\n  initColumns = (players) => {\n    return players.map(({ nickname }, i) => {\n      return {\n        playerName: nickname,\n        index: i,\n      };\n    });\n  };\n\n  getRoundData(roundIndex) {\n    return this.state.gameData.rounds.find(\n      (round) => round.round === roundIndex\n    );\n  }\n\n  handleGameModeChange() {\n    const { gameData, players } = this.state;\n    const { gameMode } = gameData;\n\n    if (gameMode === 'remote') {\n      const { currentRound, dealer } = gameData;\n      const userId = fire.auth().currentUser?.uid;\n\n      this.ownCardsStateRef = fire\n        .database()\n        .ref(\n          `cardsByGame/${this.gameKey}/round${currentRound}/cardsState/${userId}`\n        );\n\n      this.ownCardsStateRef.on('value', (snap) => {\n        console.log(snap.val());\n        this.setState((state) => {\n          return {\n            gameData: {\n              ...state.gameData,\n              ownCardsState: snap.val() || [],\n            },\n          };\n        });\n\n        const {\n          gameData: { currentRound },\n        } = this.state;\n        const roundData = this.getRoundData(currentRound);\n\n        // if current round === 1 and no handsState and gameMode === remote then deal cards\n        if (\n          !snap.val() &&\n          currentRound === 1 &&\n          !roundData.handsState &&\n          dealer === userId\n        ) {\n          const cardsByPlayer = dealCards(players);\n          GameService.setCardsToPlayers(\n            this.gameKey,\n            currentRound,\n            cardsByPlayer\n          );\n        }\n      });\n    } else if (gameData.ownCardsState) {\n      this.setState({\n        gameData: {\n          ...gameData,\n          ownCardsState: undefined,\n        },\n      });\n    }\n  }\n\n  handleHandFinished(roundData) {\n    const winner = this.calculateHandWinner(roundData);\n    const { round, handsState, currentHand } = roundData;\n\n    this.gameRef\n      .child(`rounds/${round - 1}`)\n      .update({\n        [`won${winner.player}`]: roundData[`won${winner.player}`]\n          ? roundData[`won${winner.player}`] + 1\n          : 1,\n        handsState: {\n          ...handsState,\n          [currentHand]: {\n            ...handsState[currentHand],\n            status: 'FINISHED',\n            handWinner: winner.player,\n          },\n          [currentHand + 1]: {\n            status: 'ACTIVE',\n            turnOf: winner.player,\n            thrownCards: [],\n          },\n        },\n      })\n      .then(() =>\n        setTimeout(\n          () => currentHand !== 13 && this.goToNextHand(roundData, winner),\n          200\n        )\n      );\n  }\n\n  goToNextHand(roundData, winner) {\n    const { round, handsState, currentHand } = roundData;\n\n    this.gameRef.child(`rounds/${round - 1}`).update({\n      // [`won${winner.player}`]: roundData[`won${winner.player}`]\n      //   ? roundData[`won${winner.player}`] + 1\n      //   : 1,\n      currentHand: currentHand + 1,\n      // handsState: {\n      //   // ...handsState,\n      //   [currentHand + 1]: {\n      //     status: 'ACTIVE',\n      //     turnOf: winner.player,\n      //     thrownCards: [],\n      //   },\n      // },\n    });\n  }\n\n  calculateHandScore(roundData) {\n    const gameData = { ...this.state.gameData };\n    const { rounds: allRounds, currentRound } = gameData;\n    const newRound = { ...roundData };\n    const gameToUpdate = {};\n\n    [0, 1, 2, 3].forEach((player) =>\n      this.calculatePlayerScore(\n        newRound,\n        player,\n        allRounds,\n        currentRound - 1,\n        gameToUpdate\n      )\n    );\n\n    // calc if round check\n    // update O/U\n    const { currentTotalWon } = getTotalRemoteWonBid(newRound);\n\n    newRound.check = currentTotalWon === 13;\n\n    // calculate if round fell - change next round factor\n    if (newRound.check) {\n      const didRoundFell = calcIfRoundFell(newRound);\n\n      if (didRoundFell) {\n        newRound.fell = true;\n\n        if (newRound.round < 12) {\n          // because metaData index is zero based row.round value is next round index\n          allRounds[newRound.round].factor = newRound.factor * 2;\n        } else if (newRound.factor > 1) {\n          allRounds[newRound.round].factor = newRound.factor;\n        }\n      } else if (newRound.fell) {\n        newRound.fell = false;\n        if (allRounds[newRound.round]) {\n          allRounds[newRound.round].factor =\n            newRound.factor > 1 ? newRound.factor / 2 : newRound.factor;\n        }\n\n        for (let i = 0; i < 4; i++) {\n          this.calculatePlayerScore(\n            newRound,\n            i,\n            allRounds,\n            currentRound - 1,\n            gameToUpdate\n          );\n        }\n      }\n\n      // calculate round summary stats\n      let summaryToUpdate = this.calculateSummary(allRounds, currentRound - 1);\n\n      if (newRound.round === 13 && !newRound.fell) {\n        gameToUpdate.status = GAME_STATUS.FINISHED;\n        this.updateGameStatus(GAME_STATUS.FINISHED);\n\n        // round summary league scores\n        const {\n          totalScore0,\n          totalScore1,\n          totalScore2,\n          totalScore3,\n        } = gameToUpdate;\n        const scores = { totalScore0, totalScore1, totalScore2, totalScore3 };\n        // scores[`totalScore${player}`] = gameToUpdate[`totalScore${player}`];\n        summaryToUpdate = this.calculateLeagueScores(scores, summaryToUpdate);\n      }\n\n      this.gameSummaryRef.update(this.mapToPlayersObj(summaryToUpdate));\n    }\n\n    allRounds.splice(currentRound - 1, 1, newRound);\n\n    gameToUpdate.rounds = allRounds;\n\n    this.gameRef.update(gameToUpdate);\n  }\n\n  // TODO: move this method to game-utils once roundData is properly typed\n  calculateHandWinner(roundData) {\n    const { trump, handsState, currentHand } = roundData;\n    const currentHandState = handsState && handsState[currentHand];\n    const { thrownCards } = currentHandState;\n\n    const trumpCards = thrownCards.filter(\n      (thrown) => thrown.card.split('-')[1] === CardsType[trump]\n    );\n\n    if (trumpCards.length) {\n      const thrownSorted = trumpCards.sort(\n        (a, b) => +b.card.split('-')[0] - +a.card.split('-')[0]\n      );\n\n      return thrownSorted[0];\n    } else {\n      const handCardType = thrownCards[0].card.split('-')[1];\n      const thrownSorted = thrownCards\n        .filter((thrown) => thrown.card.split('-')[1] === handCardType)\n        .sort((a, b) => +b.card.split('-')[0] - +a.card.split('-')[0]);\n\n      return thrownSorted[0];\n    }\n  }\n\n  updateOwnCardState(thrownCard, currentRound, ownCardsState) {\n    const cardIndex = Object.keys(ownCardsState).find(\n      (index) => ownCardsState[index] === thrownCard\n    );\n    GameService.updateHandCardsState(this.gameKey, currentRound, cardIndex);\n  }\n}\n\nexport default GameTab;\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\ninterface ILoaderProps {\r\n  className?: string;\r\n}\r\n\r\nconst Loader = (props: ILoaderProps) => (\r\n  <div className={`full-view loader ${props.className ? props.className : ''}`}>\r\n    <Spin\r\n      size=\"large\"\r\n      style={{ width: '100%', position: 'relative', top: '50%' }}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","import React, { Component } from 'react';\nimport { fire } from '../firebase';\nimport './LeagueSummary.css';\nimport { Row, Col } from 'antd';\n\nconst statsObj = {\n  successRate: 'Succes Win Rates',\n  successRateHB: 'Highest Bidding Win Rates',\n  successRateOver: 'Over Win Rate',\n  successRateUnder: 'Under Win Rate',\n  successRateNT: 'NT Win Rates',\n  successRateLastBidder: 'Last Bidder Win Rate',\n};\n\nexport default class LeagueSummary extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      players: props.league.players,\n    };\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameSummaryRef.off('value');\n  }\n\n  fetch() {\n    const {\n      league: { leagueID },\n    } = this.props;\n    const { players } = this.state;\n\n    const dbRef = fire.database().ref();\n    this.gameSummaryRef = dbRef.child(`leagueGamesSummary/_${leagueID}`);\n    this.leagueGamesRef = dbRef\n      .child(`leagueGames/_${leagueID}`)\n      .orderByChild('status')\n      .equalTo('FINISHED');\n\n    this.leagueGamesRef.on('value', (snap) => {\n      if (snap.val()) {\n        const gameKeys = Object.keys(snap.val());\n        const lastKey = gameKeys[gameKeys.length - 1];\n\n        this.gameSummaryRef\n          .orderByKey()\n          .endAt(lastKey)\n          .on('value', (snap) => {\n            const gameSummary = Object.values(snap.val());\n            this.setState({\n              players: players.map((player) => {\n                const playerKey = player.key;\n\n                return {\n                  ...player,\n                  games: gameSummary.map((game, i) => game.players[playerKey]),\n                };\n              }),\n            });\n          });\n      }\n    });\n  }\n\n  render() {\n    const { league } = this.props;\n    const { title } = league;\n    const { players } = this.state;\n\n    return (\n      <div className=\"game-summery\">\n        <h3>{title}</h3>\n\n        <h3>League Score:</h3>\n        <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n          {this.getTableHeaders(players)}\n        </Row>\n        <Row gutter={1}>{this.getScoreRow(players)}</Row>\n        {Object.keys(statsObj).map(this.getStatsRow)}\n      </div>\n    );\n  }\n\n  getTableHeaders = (players) =>\n    players.map(({ key, nickname }) => (\n      <Col key={key} span={6}>\n        <div className=\"table-cell\">{nickname}</div>\n      </Col>\n    ));\n\n  getScoreRow = (players) =>\n    players.map((player) => (\n      <Col span={6} key={player.key}>\n        <div className=\"table-cell\">\n          {player.games && this.scoreReducer(player.games, 'leagueScore')}\n        </div>\n      </Col>\n    ));\n\n  getStatsRow = (statsKey) => {\n    const { players } = this.state;\n\n    return (\n      <div className=\"stats-row\" key={statsKey}>\n        <h4>{statsObj[statsKey]}</h4>\n        <Row gutter={1}>{this.getWinRateRow(players, statsKey)}</Row>\n      </div>\n    );\n  };\n\n  getWinRateRow = (players, statsKey) =>\n    players.map((player) => (\n      <Col span={6} key={player.key}>\n        <div className=\"table-cell\">\n          {player.games && this.calculateRate(player.games, statsKey)}%\n        </div>\n      </Col>\n    ));\n\n  scoreReducer = (games, prop) =>\n    games.reduce((sum, game) => sum + Number(game[prop]), 0);\n\n  calculateRate = (games, prop) =>\n    this.toPercentage(this.preCalculateRate(games, prop));\n\n  toPercentage = ({ wins, total }) =>\n    Number.parseFloat((wins / total) * 100).toFixed(0);\n\n  preCalculateRate = (games, prop) =>\n    games.reduce(\n      (sumObj, game) => {\n        const category = game[prop];\n        sumObj.wins += category.wins;\n        sumObj.total += category.total;\n        return sumObj;\n      },\n      { wins: 0, total: 0 }\n    );\n}\n","import { fire } from '../firebase';\r\nimport { IPlayer, ILeagueModel } from '../models/ILeagueModel';\r\n\r\ninterface IInvited {\r\n  // [userID: string]: { [inviteKey: string]: boolean };\r\n  [userID: string]: string; //{ [inviteKey: string]: boolean };\r\n}\r\n\r\nexport interface IGameInvite {\r\n  inviteKey: string;\r\n  leagueID: number;\r\n  leagueTitle: string;\r\n  newGameId: number;\r\n  inviter: IPlayer;\r\n  // joinedPlayers\r\n}\r\n\r\ninterface IInviteObj {\r\n  invited: IInvited;\r\n  invite: IGameInvite;\r\n}\r\n\r\nexport default class LeagueService {\r\n  public static invitePlayers(\r\n    league: Partial<ILeagueModel>,\r\n    newGameId: number\r\n  ): Promise<boolean> {\r\n    // TODO: add reject when after a xxx seconds with not enough joined players\r\n    // TODO: upgrade the promise to allow cancel\r\n    return new Promise<boolean>((resolve) => {\r\n      // create firebase ref to notification/gameInvites\r\n      const gameInvitesRef = fire\r\n        .database()\r\n        .ref()\r\n        .child('notifications/gameInvites');\r\n\r\n      // generate new key\r\n      const inviteKey = gameInvitesRef.push().key;\r\n      const { invited, invite } = LeagueService.setInviteObj(\r\n        league,\r\n        inviteKey as string,\r\n        newGameId\r\n      );\r\n\r\n      // update the invantation and invited list\r\n      const update = {\r\n        [`${inviteKey}`]: invite,\r\n      };\r\n\r\n      gameInvitesRef\r\n        .update(update)\r\n        .then(() => LeagueService.setAllInvited(invited, gameInvitesRef))\r\n        .then((invitedRefs) => {\r\n          // setTimeout(() => {\r\n          //   gameInvitesRef\r\n          //     .child(`${inviteKey}/joinedPlayers`)\r\n          //     .push('QVU5a8IMtPZkqo76vgRAvErZ3pm2');\r\n          // }, 2000);\r\n          // setTimeout(() => {\r\n          //   gameInvitesRef\r\n          //     .child(`${inviteKey}/joinedPlayers`)\r\n          //     .push('6fosZWZDV5g0yB7Js8IQhk3ADHh2');\r\n          // }, 2500);\r\n\r\n          const playersKeys = Object.keys(invited);\r\n\r\n          // listen to changes in the invantation (joinedPlayers)\r\n          gameInvitesRef\r\n            .child(`${inviteKey}/joinedPlayers`)\r\n            .on('child_added', (player: firebase.database.DataSnapshot) => {\r\n              console.log(player.val());\r\n              // resolve when all players joined\r\n              const index = playersKeys.indexOf(player.val());\r\n\r\n              if (index > -1) {\r\n                playersKeys.splice(index, 1);\r\n              }\r\n\r\n              console.log(playersKeys);\r\n\r\n              if (!playersKeys.length) {\r\n                gameInvitesRef\r\n                  .child(`${inviteKey}/joinedPlayers`)\r\n                  .off('child_added');\r\n\r\n                LeagueService.removeAllInvited(invitedRefs);\r\n                resolve();\r\n              }\r\n            });\r\n        });\r\n    });\r\n  }\r\n\r\n  public static setInviteObj(\r\n    league: Partial<ILeagueModel>,\r\n    inviteKey: string,\r\n    newGameId: number\r\n  ): IInviteObj {\r\n    const { players, leagueID, title } = league;\r\n    const userId = fire.auth().currentUser?.uid;\r\n    const inviter = players?.find((player) => player.key === userId) as IPlayer;\r\n    const invited = (players as IPlayer[])\r\n      .filter((player) => player.key !== userId)\r\n      .reduce((invited, player) => {\r\n        invited[player.key] = inviteKey;\r\n\r\n        return invited;\r\n      }, {} as IInvited);\r\n\r\n    return {\r\n      invited,\r\n      invite: {\r\n        inviter,\r\n        inviteKey,\r\n        leagueID: leagueID as number,\r\n        leagueTitle: title as string,\r\n        newGameId,\r\n      },\r\n    };\r\n  }\r\n\r\n  public static setAllInvited(\r\n    invited: IInvited,\r\n    gameInvitesRef: firebase.database.Reference\r\n  ): Promise<firebase.database.Reference[]> {\r\n    const sets: Promise<firebase.database.Reference>[] = [];\r\n\r\n    Object.keys(invited).forEach((playerKey) => {\r\n      const promise = gameInvitesRef\r\n        .child(`invitedPlayers/${playerKey}`)\r\n        .push(invited[playerKey]);\r\n\r\n      sets.push(promise);\r\n    });\r\n\r\n    return Promise.all(sets);\r\n  }\r\n\r\n  public static removeAllInvited(invitedRefs: firebase.database.Reference[]) {\r\n    invitedRefs.forEach((ref: firebase.database.Reference) => {\r\n      ref.set(null);\r\n    });\r\n  }\r\n\r\n  public static acceptGameInvite(invite: IGameInvite): Promise<any> {\r\n    const { inviteKey } = invite;\r\n    const gameInviteRef = fire\r\n      .database()\r\n      .ref()\r\n      .child(`notifications/gameInvites/${inviteKey}/joinedPlayers`);\r\n    const userId = fire.auth().currentUser?.uid;\r\n\r\n    // TODO: listen also if game was added before resolve,\r\n    // otherwise the navigation to the new game is before the game is actually created\r\n    return new Promise((resolve) => {\r\n      gameInviteRef.push(userId).then(() => {\r\n        gameInviteRef.on('value', (snap) => {\r\n          if (Object.values(snap.val()).length === 3) {\r\n            gameInviteRef.off('value');\r\n            resolve();\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\nimport { fire } from '../firebase';\nimport { Route, Link, RouteComponentProps } from 'react-router-dom';\nimport withAuthorization from '../authentication/withAuthorization';\nimport { Menu, Layout, message } from 'antd';\nimport {\n  DashboardOutlined,\n  GoldOutlined,\n  ExportOutlined,\n  PlusOutlined,\n} from '@ant-design/icons';\nimport './League.scss';\nimport GameTab from '../game/GameTab';\nimport * as routes from '../constants/routes';\nimport gameDataTpl from '../dataTemplates/gameTpl';\nimport RcDrawer from 'rc-drawer';\nimport 'rc-drawer/assets/index.css';\nimport Loader from '../common/loader/Loader';\nimport { GAME_STATUS } from '../constants/states';\nimport LeagueSummary from '../leagueSummary/LeagueSummary';\nimport Dialog from '../dialogs/Dialog';\nimport { Dialogs } from '../constants/dialogs';\nimport { ILeagueModel, IPlayer } from '../models/ILeagueModel';\nimport { ClickParam } from 'antd/lib/menu';\nimport { GameMode } from '../models/IGameModel';\nimport { UserContext } from '../authentication/AuthUserContext';\nimport LeagueService from '../services/LeagueSrv';\n\nconst { Content } = Layout;\nconst SubMenu = Menu.SubMenu;\n\nexport interface ILeagueState {\n  loading: boolean;\n  menuSelected: string | 'dashboard';\n  league: Partial<ILeagueModel>;\n  leagueGames: Array<any>;\n  drawerVisible: boolean;\n  newGameDialog: boolean;\n}\n\ntype TParams = { leagueID?: string };\n\nexport interface ILeagueProps extends RouteComponentProps<TParams> {}\n\nclass League extends React.Component<ILeagueProps, ILeagueState> {\n  private leagueRef: firebase.database.Reference;\n  private leagueGamesRef: firebase.database.Reference;\n\n  constructor(props: ILeagueProps) {\n    super(props);\n\n    const { location, match } = props;\n    const { leagueID } = match.params;\n\n    const matchGame = location.pathname.match(/game\\/[1-9]/g) || [];\n    const gameID = matchGame.length ? matchGame[0].split('/')[1] : false;\n\n    this.state = {\n      loading: false,\n      menuSelected: gameID || 'dashboard',\n      league: { title: '', players: [] },\n      leagueGames: [],\n      drawerVisible: false,\n      newGameDialog: false,\n      // activeGame: `0`\n    };\n\n    /* Create reference to messages in Firebase Database */\n    const dbRef = fire.database().ref();\n    this.leagueRef = dbRef.child(`leagues/list/_${leagueID}`);\n    this.leagueGamesRef = dbRef.child(`leagueGames/_${leagueID}`);\n\n    this.handleMenuItemClick = this.handleMenuItemClick.bind(this);\n    this.newGameDialogHandler = this.newGameDialogHandler.bind(this);\n  }\n\n  public componentDidMount() {\n    this.fetch();\n  }\n\n  public componentWillUnmount() {\n    this.leagueRef.off('value');\n  }\n\n  private fetch() {\n    this.setState({ loading: true });\n    this.leagueRef.on('value', (snapshot) => {\n      const leagueData: ILeagueModel = snapshot.val();\n      console.log(leagueData);\n      if (leagueData) {\n        this.setState({\n          league: {\n            ...this.state.league,\n            ...leagueData,\n          },\n          loading: false,\n        });\n      }\n    });\n\n    this.leagueGamesRef.on('child_added', (snapshot) => {\n      this.setState((prevState) => {\n        return { leagueGames: [...prevState.leagueGames, snapshot.val()] };\n      });\n    });\n\n    this.leagueGamesRef.on('child_changed', (snapshot) => {\n      console.log('child_changed', snapshot.val());\n      this.setState((prevState) => {\n        const leagueGames = prevState.leagueGames;\n        const changedIndex = leagueGames.findIndex(\n          (game) => game.gameID === snapshot.val().gameID\n        );\n\n        return {\n          leagueGames: [\n            ...leagueGames.slice(0, changedIndex),\n            {\n              ...snapshot.val(),\n            },\n            ...leagueGames.slice(changedIndex + 1),\n          ],\n        };\n      });\n    });\n  }\n\n  public render() {\n    const { match } = this.props;\n    const { league, loading, drawerVisible } = this.state;\n    const { leagueID, players } = league;\n\n    return (\n      <Layout className=\"league-container\">\n        <RcDrawer\n          getContainer=\".app\"\n          width=\"250px\"\n          open={drawerVisible}\n          onHandleClick={this.toggleDrawer}\n          onClose={this.toggleDrawer}\n        >\n          <div className=\"drawer-title\">{league.title}</div>\n          {this.getMenu()}\n        </RcDrawer>\n        {loading && <Loader className=\"with-mask\" />}\n        <Layout>\n          <Content>\n            <Route\n              path={`${routes.LEAGUE}/:leagueID/game/:gameID`}\n              render={(props) =>\n                !!leagueID ? (\n                  <GameTab\n                    {...props}\n                    players={players}\n                    // loading={loading}\n                    loaderStateCb={this.setLoaderState}\n                  />\n                ) : (\n                  <Loader />\n                )\n              }\n            />\n            <Route\n              exact\n              path={match.url}\n              render={(props) =>\n                !!leagueID ? (\n                  <LeagueSummary {...props} league={league} />\n                ) : (\n                  <Loader />\n                )\n              }\n            />\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n\n  private getMenu() {\n    const { match } = this.props;\n    const { leagueGames, menuSelected, newGameDialog } = this.state;\n\n    return (\n      <Menu\n        mode=\"inline\"\n        selectedKeys={[menuSelected]}\n        defaultOpenKeys={['gamesSub']}\n        onClick={this.handleMenuItemClick}\n        className=\"league-menu\"\n      >\n        <Menu.Item key=\"dashboard\">\n          <DashboardOutlined />\n          <Link to={`${match.url}`}>League Summary</Link>\n        </Menu.Item>\n        <SubMenu\n          key=\"gamesSub\"\n          title={\n            <span>\n              <GoldOutlined />\n              <span>Games</span>\n            </span>\n          }\n        >\n          {leagueGames.map((game, i) => (\n            <Menu.Item key={game.gameID.toString()}>\n              <Link to={`${match.url}${routes.GAME}/${game.gameID}`}>\n                Game {game.gameID}\n              </Link>\n            </Menu.Item>\n          ))}\n\n          <Menu.Item key=\"new_game\">\n            <PlusOutlined />\n            <span>New Game</span>\n          </Menu.Item>\n        </SubMenu>\n        {newGameDialog && (\n          <Dialog\n            dialog={Dialogs.NEW_GAME}\n            dialogProps={{\n              visible: true,\n              onAfterClose: this.newGameDialogHandler,\n            }}\n          />\n        )}\n        <Menu.Item key=\"main_menu\">\n          <ExportOutlined className={'rotate-180'} />\n          <Link to={`/`}>To Main Menu</Link>\n        </Menu.Item>\n      </Menu>\n    );\n  }\n\n  private toggleDrawer = () => {\n    this.setState({\n      drawerVisible: !this.state.drawerVisible,\n    });\n  };\n\n  private setLoaderState = (loading: boolean) => {\n    this.setState({ loading });\n  };\n\n  private handleMenuItemClick(item: ClickParam) {\n    const key = item.key;\n\n    if (key === 'new_game') {\n      if (this.isAddGameOk()) {\n        // trying to block the leauge database by adding to the league blockedBy attribute value with the user Id\n        // together with the database rules preventing other user from updating the league data\n        this.blockLeague().then(\n          () => {\n            this.setNewGameDialogState(true);\n          },\n          (error: Error | null) => {\n            console.error(error);\n            message.warning('One of the players is blocking!!');\n          }\n        );\n      } else {\n        message.warning('Last Game is not finished yet!!');\n      }\n    } else if (key !== 'main_menu' && key !== this.state.menuSelected) {\n      this.setState({ menuSelected: key });\n    }\n\n    setTimeout(this.toggleDrawer, 200);\n  }\n\n  private blockLeague() {\n    const userId = fire.auth().currentUser?.uid;\n\n    return this.leagueRef.child('blockedBy').set(userId);\n  }\n\n  private unblockLeague() {\n    this.leagueRef.update({\n      blockedBy: null,\n    });\n  }\n\n  private setNewGameDialogState = (show: boolean) => {\n    this.setState({\n      newGameDialog: show,\n    });\n  };\n\n  private newGameDialogHandler(gameMode: GameMode) {\n    this.setState({\n      newGameDialog: false,\n    });\n\n    if (gameMode === 'local') {\n      this.unblockLeague();\n      this.addGame(gameMode);\n    } else if (gameMode === 'remote') {\n      this.setState({ loading: true });\n      // ask other players to join the game\n      const { league, leagueGames } = this.state;\n      const newGameId = leagueGames.length + 1;\n\n      LeagueService.invitePlayers({ ...league }, newGameId).then(() => {\n        console.log('inventation resolved- ok to add game');\n        this.addGame('remote');\n        this.setState({ loading: false });\n      });\n    }\n  }\n\n  private addGame = (gameMode: GameMode) => {\n    const { league, leagueGames } = this.state;\n    const { leagueID, players, blockedBy } = league;\n\n    const { history, match } = this.props;\n    const newGameId = leagueGames.length + 1;\n\n    const newGameKey = fire.database().ref().child('games').push().key;\n\n    const gameTpl = gameDataTpl(players, gameMode);\n    const updates: { [key: string]: any } = {};\n\n    updates[`/games/${newGameKey}`] = {\n      gameID: newGameId,\n      dealer: gameMode === 'remote' && blockedBy ? blockedBy : '',\n      ...gameTpl.gameData,\n    };\n    updates[`/leagueGames/_${leagueID}/${newGameKey}`] = {\n      gameID: newGameId,\n      gameMode,\n      status: GAME_STATUS.ACTIVE,\n    };\n    updates[`/leagueGamesSummary/_${leagueID}/${newGameKey}`] = {\n      ...gameTpl.gameSummary,\n    };\n\n    fire\n      .database()\n      .ref()\n      .update(updates, (error) => {\n        if (!error) {\n          this.setState({ menuSelected: `${newGameId}` });\n          history.push(`${match.url}${routes.GAME}/${newGameId}`);\n        }\n      });\n  };\n\n  private isAddGameOk() {\n    const { leagueGames } = this.state;\n    const lastGame = leagueGames[leagueGames.length - 1];\n\n    return !lastGame || lastGame.status === GAME_STATUS.FINISHED;\n  }\n}\n\nconst authCondition = (authUser: UserContext) => !!authUser;\n\nexport default withAuthorization<ILeagueProps>(authCondition)(League);\n","import { INPUT_MODE, GAME_STATUS } from '../constants/states';\n\nexport default function gameDataTpl(players, gameMode) {\n  const rounds = [];\n  const initRoundData = {\n    segment: '',\n    totalBids: '',\n    trump: '',\n    check: false,\n    factor: 1,\n    fell: false,\n    highestBidder: '',\n    inputMode: INPUT_MODE.BID,\n    score0: '',\n    aggregateScore0: '',\n    bid0: '',\n    won0: '',\n    score1: '',\n    aggregateScore1: '',\n    bid1: '',\n    won1: '',\n    score2: '',\n    aggregateScore2: '',\n    bid2: '',\n    won2: '',\n    score3: '',\n    aggregateScore3: '',\n    bid3: '',\n    won3: '',\n  };\n\n  if (gameMode === 'remote') {\n    initRoundData.currentHand = 1;\n  }\n\n  for (let i = 0; i < 13; i++) {\n    rounds.push({ round: i + 1, ...initRoundData });\n  }\n\n  return {\n    gameData: {\n      rounds,\n      currentRound: 1,\n      totalScore0: 0,\n      totalScore1: 0,\n      totalScore2: 0,\n      totalScore3: 0,\n      status: GAME_STATUS.ACTIVE,\n    },\n    gameSummary: {\n      players: players.reduce((summaryObj, player) => {\n        summaryObj[player.key] = {\n          leagueScore: '',\n          successRate: '',\n          successRateHB: '',\n          successRateOver: '',\n          successRateUnder: '',\n          successRateNT: '',\n        };\n\n        return summaryObj;\n      }, {}),\n    },\n  };\n}\n","import React, { Component } from 'react';\nimport { withRouter, Route } from 'react-router-dom';\nimport NotificationService from './services/NotificationSrv';\nimport { fire } from './firebase';\nimport cards from './cards.png';\nimport phoneImg from './images/phone.png';\nimport * as routes from './constants/routes';\nimport withAuthentication from './authentication/withAuthentication';\nimport './App.scss';\nimport 'antd/dist/antd.css';\nimport Login from './authentication/Login';\nimport SignUp from './authentication/SignUp';\nimport Main from './main/Main';\nimport League from './league/League.tsx';\nimport { addListener, isMobileBrowser } from './utils/Utils';\nimport { Dialogs } from './constants/dialogs';\nimport Dialog from './dialogs/Dialog';\nimport LeagueService from './services/LeagueSrv';\nimport Loader from './common/loader/Loader';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inlineHeader: false,\n      showGameInvite: false,\n      loader: false,\n    };\n\n    this.toggleHeaderInline = this.toggleHeaderInline.bind(this);\n    this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n  }\n\n  // set main header state by router value\n  // if in main menu page header is bigger\n  toggleHeaderInline(inline = true) {\n    this.setState({\n      inlineHeader: inline,\n    });\n  }\n\n  // set if view is mobile size\n  handleWindowSizeChange() {\n    this.setState({\n      // isMobile: window.innerWidth < 1095,\n    });\n  }\n\n  // init window resize listener\n  listenToWinResize(callback) {\n    return addListener(window, 'resize', callback);\n  }\n\n  componentWillMount() {\n    const { pathname } = this.props.location;\n    // set initial header state\n    this.toggleHeaderInline(pathname !== '/');\n\n    // listen to routing changes\n    this.unlistenHistory = this.props.history.listen((location, action) => {\n      const { pathname } = location;\n      this.toggleHeaderInline(pathname !== '/' && pathname !== '/login');\n    });\n\n    this.unlistenWinResize = this.listenToWinResize(\n      this.handleWindowSizeChange\n    );\n  }\n\n  componentWillUnmount() {\n    this.unlistenHistory();\n    this.unlistenWinResize();\n  }\n\n  componentDidMount() {\n    fire.auth().onAuthStateChanged((authUser) => {\n      if (authUser) {\n        NotificationService.registerGameInvite(this.onGameInvite);\n      }\n    });\n  }\n\n  render() {\n    const { inlineHeader, showGameInvite, invite, loader } = this.state;\n\n    return (\n      <div\n        className={`app-wrapper ${\n          isMobileBrowser() ? 'mobile-mode' : 'desktop-mode'\n        }`}\n      >\n        <img src={phoneImg} />\n        <div className={`app ${inlineHeader ? 'inline-header' : ''}`}>\n          <header id=\"app-header\">\n            <img src={cards} className=\"app-logo\" alt=\"logo\" />\n            <h1 className=\"app-title\">Sub Whist</h1>\n          </header>\n          {loader && <Loader className=\"with-mask\" />}\n          <div className=\"app-content\">\n            <Route exact path=\"/\" component={Main} />\n            <Route exact path={routes.SIGN_IN} component={Login} />\n            <Route exact path={routes.SIGN_UP} component={SignUp} />\n            <Route\n              path={`${routes.LEAGUE}/:leagueID`}\n              render={(props) => <League {...props} screenSize={442} />}\n            />\n          </div>\n        </div>\n        {showGameInvite && (\n          <Dialog\n            dialog={Dialogs.GAME_INVITE}\n            dialogProps={{\n              visible: true,\n              invite,\n              onAfterClose: this.closeGameInvite,\n              onOk: this.acceptGameInvite,\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  onGameInvite = (invite) => {\n    this.setState({\n      showGameInvite: true,\n      invite,\n    });\n  };\n\n  acceptGameInvite = () => {\n    const { invite } = this.state;\n\n    this.setState({ loader: true });\n    LeagueService.acceptGameInvite(invite).then(\n      () => {\n        this.setState({ loader: false });\n        const { history } = this.props;\n        const { leagueID, newGameId } = invite;\n\n        setTimeout(\n          () => history.push(`${routes.LEAGUE}/${leagueID}/game/${newGameId}`),\n          500\n        );\n      },\n      () => {\n        this.setState({ loader: false });\n      }\n    );\n  };\n\n  closeGameInvite = () => {\n    this.setState({\n      showGameInvite: false,\n    });\n  };\n}\n\nexport default withRouter(withAuthentication(App));\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"pure-swipe\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport \"./index.scss\";\n\nReactDOM.render(\n  <Router basename={process.env.PUBLIC_URL}>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}