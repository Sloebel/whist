{"version":3,"sources":["images/playCards sync /^/.*/.svg$","cards.png","images/phone.png","images/playCards/10-C.svg","images/playCards/10-D.svg","images/playCards/10-H.svg","images/playCards/10-S.svg","images/playCards/11-C.svg","images/playCards/11-D.svg","images/playCards/11-H.svg","images/playCards/11-S.svg","images/playCards/12-C.svg","images/playCards/12-D.svg","images/playCards/12-H.svg","images/playCards/12-S.svg","images/playCards/13-C.svg","images/playCards/13-D.svg","images/playCards/13-H.svg","images/playCards/13-S.svg","images/playCards/14-C.svg","images/playCards/14-D.svg","images/playCards/14-H.svg","images/playCards/14-S.svg","images/playCards/2-C.svg","images/playCards/2-D.svg","images/playCards/2-H.svg","images/playCards/2-J.svg","images/playCards/2-S.svg","images/playCards/3-C.svg","images/playCards/3-D.svg","images/playCards/3-H.svg","images/playCards/3-S.svg","images/playCards/4-C.svg","images/playCards/4-D.svg","images/playCards/4-H.svg","images/playCards/4-S.svg","images/playCards/5-C.svg","images/playCards/5-D.svg","images/playCards/5-H.svg","images/playCards/5-S.svg","images/playCards/6-C.svg","images/playCards/6-D.svg","images/playCards/6-H.svg","images/playCards/6-S.svg","images/playCards/7-C.svg","images/playCards/7-D.svg","images/playCards/7-H.svg","images/playCards/7-S.svg","images/playCards/8-C.svg","images/playCards/8-D.svg","images/playCards/8-H.svg","images/playCards/8-S.svg","images/playCards/9-C.svg","images/playCards/9-D.svg","images/playCards/9-H.svg","images/playCards/9-S.svg","firebase/fire.ts","firebase/auth.ts","firebase/db.ts","utils/events/EventEmitter.ts","services/NotificationSrv.ts","authentication/AuthUserContext.ts","authentication/withAuthentication.tsx","authentication/Login.tsx","constants/routes.ts","authentication/SignUp.tsx","authentication/withAuthorization.tsx","dialogs/NewLeague.tsx","dialogs/ResumeLeague.js","utils/Utils.ts","common/dragPad/DragPad.js","constants/dialogs.ts","dialogs/ReorderPlayers.tsx","dialogs/NewGameDialog/NewGameDialog.tsx","dialogs/GameInvite.tsx","constants/cards.ts","dialogs/Dialog.tsx","main/MainMenu.tsx","main/Main.js","constants/states.ts","utils/game-utils.ts","common/cards/Icons.js","common/table/MobileTable.js","common/table/renderers.js","common/cards/Modal.js","common/numbers/Pad.js","common/transition/Css.js","common/player/Pad.js","common/twoWayArrow/TwoWayArrow.jsx","game/PlayCard/PlayCard.tsx","game/ThrownCard/ThrownCard.tsx","game/GamePad/GamePad.js","game/GameMobileView.js","constants/scores.ts","services/GameSrv.ts","game/GameTab.js","common/loader/Loader.tsx","leagueSummary/LeagueSummary.js","services/LeagueSrv.ts","league/League.tsx","dataTemplates/gameTpl.js","App.js","registerServiceWorker.js","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","fire","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","auth","db","database","createUser","email","password","createUserWithEmailAndPassword","signInUser","signInWithEmailAndPassword","signOut","doCreateUser","userInfo","ref","set","onceGetUsers","once","onceGetLeagues","EventEmitter","handlers","handler","this","push","filter","h","data","slice","forEach","gameInviteEventEmitter","callback","on","userId","currentUser","uid","gameInvitesRef","child","invite","val","snapshot","console","log","trigger","AuthUserContext","React","createContext","withAuthentication","Component","state","authUser","onAuthStateChanged","setState","Provider","value","props","FormItem","Item","Login","isLoading","handleSubmit","values","history","then","catch","error","message","alert","Consumer","style","textAlign","marginTop","type","size","onClick","goBack","icon","ArrowLeftOutlined","to","onFinish","className","name","rules","required","prefix","MailOutlined","color","placeholder","LockOutlined","htmlType","loading","withRouter","SignUp","formRef","createRef","handleConfirmBlur","target","confirmDirty","compareToFirstPassword","rule","form","current","getFieldValue","validateToNextPassword","validateFields","nickname","user","UserOutlined","SmileOutlined","validator","onBlur","withAuthorization","authCondition","WithAuthorization","width","position","top","Option","NewLeague","leagueID","onCreateLeague","users","description","savingLeagueLoader","players","key","lastID","newID","active","setNewLeagueID","closeModal","showDialog","afterClose","onAfterClose","visible","count","fetchPlayers","title","destroyOnClose","maskClosable","confirmLoading","onOk","onCancel","okText","getContainer","layout","label","len","mode","notFoundContent","ResumeLeague","activeLeagues","footer","itemLayout","dataSource","renderItem","item","Meta","hasTouch","window","navigator","maxTouchPoints","document","documentElement","addListener","element","addEventListener","removeEventListener","springSetting1","stiffness","damping","springSetting2","clamp","n","min","max","Math","Dialogs","allColors","height","DragPad","handleTouchStart","pressLocation","handleMouseDown","touches","handleTouchMove","preventDefault","handleMouseMove","pageX","pageY","order","lastPress","isPressed","mouseCircleDelta","dx","dy","mouseXY","col","round","row","floor","from","findIndex","p","newOrder","arr","_arr","abs","length","splice","unshift","pop","reorder","pressX","pressY","handleMouseUp","onChange","colors","reduce","colorObj","player","i","unListenTouchmove","unListenTouchend","unListenMousemove","unListenMouseup","x","y","visualPosition","translateX","translateY","scale","spring","boxShadow","onMouseDown","bind","onTouchStart","backgroundColor","WebkitTransform","transform","zIndex","ReorderPlayers","handleOnCancel","handleOnOk","handleDragChange","NewGameDialog","setGameMode","modeSelected","handleAfterClose","wrapClassName","closable","centered","cancelText","bodyStyle","display","GameInvite","handleOk","handleCancel","leagueTitle","newGameId","inviter","CARDS","DialogsMapping","NEW_LEAGUE","NewLeagueDialog","RESUME_LEAGUE","ResumeLeagueDialog","REORDER_PLAYERS","NEW_GAME","GAME_INVITE","Dialog","dialog","dialogProps","DialogEl","MainMenu","items","index","text","disabled","block","Main","newLeague","resumeLeague","orderByChild","equalTo","some","fetch","off","navigateToLeague","showResumeLeagueDialog","closeResumeLeagueDialog","showNewLeagueDialog","closeNewLeagueDialog","INPUT_MODE","GAME_STATUS","CardsType","CLUB","DIAMOND","HART","SPADE","getTotalWonBid","roundData","currentTotalBid","currentTotalWon","allHasWonInput","entries","indexOf","calcIfRoundFell","didRoundFell","bid","won","cardsList","cardsFamilyScoreMap","getDevicePlayerIndex","nextPlayerIndex","dealCards","shuffledCards","shuffleCards","arrayOf4","j","sortCardsArrays","setCardsByPlayer","cardsArray","random","cardsArr","obj","sortCards","cards","sort","cardX","cardY","split","cardXNum","cardXType","cardYNum","cardYType","Spade","viewBox","enableBackground","d","fill","Hart","Diamond","points","Club","ChangePlayers","MobileTable","rounds","currentRound","leagueScores","gameID","gutter","marginBottom","span","getTableHeaders","fell","factor","getRoundCol","TrophyTwoTone","twoToneColor","getLeagueScoresCol","playerIndex","playerName","highestBidder","card","Icon","component","NT","children","cardsRenderer","trump","CardsModal","showModal","trumpIconMap","ghost","QuestionOutlined","onTrumpSelect","NumbersPad","getButtons","baseNum","amount","disabledNumber","Array","num","onBtnClick","showMore","toggleMore","onSelect","textContent","CSS_TRANSITIONS","Css","div","classList","add","setTimeout","remove","prevProps","el","PlayerPad","score","undefined","TWO_WAY_ARROW_DIRECTION","TwoWayArrow","direction","PlayCard","preSelected","thrown","onCardClick","clickHandler","useCallback","event","src","require","ThrownCard","thrownType","hasWinner","useState","setStyle","useEffect","confirm","config","maxCount","GamePad","getNextPlayer","selectedPlayer","getBeforePlayer","getBeforePlayers","getPlayerAggregateScore","roundsData","roundIndex","aggregateScore","getPlayersButtons","allRounds","currentRoundData","dot","Button","handleCardClick","preSelectedCard","devicePlayerIndex","onCardThrown","ownCardsState","getRoundData","inputMode","WON","currentTarget","offsetParent","offsetTop","left","offsetLeft","ownThrownCardInitPos","thrownCards","currentHand","thrownCard","isAllBids","every","_","reorderPlayersDialogVisible","handCardType","handleSwitchMode","handleCardsPadChange","handleNumberSelect","setSelectedPlayer","showChangeHighestBidderConfirm","showChangePlayerDialog","handleReorderPlayersAfterClose","gameMode","handsState","prevAllRounds","prevCurrentRound","prevCurrentRoundData","stateToUpdate","find","hand","uniqueResult","Map","playerHand","has","uniqueHand","checked","segment","warning","everyoneBid","BID","prop","newRoundData","nextPlayer","Number","isInteger","beforePlayers","bids","aBid","content","okType","bid0","bid1","bid2","bid3","check","playersButtons","Group","buttonStyle","justify","checkedChildren","unCheckedChildren","cardsMarkerRef","calculateDisableNum","shape","PlayersContext","reorderPlayers","getThrownCardsPlacement","getCards","hasCardType","isDevicePlayer","handWinner","fn","playerOnPadMap","toWinner","getFromTo","markerTop","markerWidth","offsetWidth","CARD_MARKER_HEIGHT","CARD_HEIGHT","CARD_WIDTH","getToWinnerCalc","fromTop","fromLeft","getFromToCalc","GameMobileView","carouselSwipedLeft","currentView","onCurrentViewChange","carouselEl","nextRound","goToRound","toRoundBefore","carouselSwipedRight","unListenSwipedLeft","unListenSwipedRight","playersColumns","handleSave","handleCardThrown","LeftOutlined","RightOutlined","GAME_DEFAULT_SCORES","GameService","gameKey","cardsByPlayer","update","cardsState","cardIndex","GameTab","summaryToUpdate","newData","gameData","calculatePlayerScore","calculateSummary","status","FINISHED","updateGameStatus","scores","totalScore0","totalScore1","totalScore2","totalScore3","calculateLeagueScores","gameSummaryRef","mapToPlayersObj","gameRef","newThrownCards","turnOf","updateOwnCardState","rowScore","pow","diff","a","b","scoreIndex","leagueScore","currentRoundIndex","playersSummary","pIndex","stood","totalRounds","totalHBrounds","stoodWhileHB","stoodInOver","totalOverRounds","stoodInUnder","totalNTrounds","stoodInNT","stoodWhenLastBidder","totalStoodWhenLastBidder","rIndex","lastBidder","successRate","wins","total","successRateHB","successRateOver","successRateUnder","successRateNT","successRateLastBidder","isNaN","gameSummary","match","params","toggleSlide","setCurrentViewState","getLeagueScores","leagueScore0","leagueScore1","leagueScore2","leagueScore3","summaryObj","initColumns","columns","dealer","selectActiveRound","handleReorderPlayers","leagueGamesRef","playersOrder","snap","gameRefData","loaderStateCb","ownCardsStateRef","prevState","handleGameModeChange","currentHandState","handleHandFinished","calculateHandScore","newRound","setCardsToPlayers","createPortal","BorderOuterOutlined","TableOutlined","querySelector","body","winner","calculateHandWinner","goToNextHand","gameToUpdate","trumpCards","updateHandCardsState","Loader","statsObj","LeagueSummary","getScoreRow","games","scoreReducer","getStatsRow","statsKey","getWinRateRow","calculateRate","sum","game","toPercentage","preCalculateRate","parseFloat","toFixed","sumObj","category","league","dbRef","gameKeys","lastKey","orderByKey","endAt","playerKey","LeagueService","Promise","inviteKey","setInviteObj","invited","setAllInvited","invitedRefs","playersKeys","removeAllInvited","sets","promise","all","gameInviteRef","Content","SubMenu","League","leagueRef","toggleDrawer","drawerVisible","setLoaderState","setNewGameDialogState","show","newGameDialog","addGame","leagueGames","blockedBy","newGameKey","gameTpl","initRoundData","totalBids","score0","aggregateScore0","won0","score1","aggregateScore1","won1","score2","aggregateScore2","won2","score3","aggregateScore3","won3","ACTIVE","gameDataTpl","updates","menuSelected","url","location","matchGame","pathname","handleMenuItemClick","newGameDialogHandler","leagueData","changedIndex","open","onHandleClick","onClose","getMenu","path","render","exact","selectedKeys","defaultOpenKeys","DashboardOutlined","GoldOutlined","toString","PlusOutlined","ExportOutlined","isAddGameOk","blockLeague","unblockLeague","invitePlayers","lastGame","App","onGameInvite","showGameInvite","acceptGameInvite","loader","closeGameInvite","inlineHeader","toggleHeaderInline","handleWindowSizeChange","inline","unlistenHistory","listen","action","unlistenWinResize","listenToWinResize","NotificationService","registerGameInvite","orientation","userAgent","phoneImg","alt","screenSize","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","basename","getElementById","URL","origin","response","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"yGAAA,IAAIA,EAAM,CACT,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,aAAc,IACd,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,IACb,YAAa,KAId,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,oBC1EpBU,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,kUCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,oBCA3CD,EAAOC,QAAU,IAA0B,iC,4fCarCC,G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","file":"static/js/main.936b4644.chunk.js","sourcesContent":["var map = {\n\t\"./10-C.svg\": 452,\n\t\"./10-D.svg\": 453,\n\t\"./10-H.svg\": 454,\n\t\"./10-S.svg\": 455,\n\t\"./11-C.svg\": 456,\n\t\"./11-D.svg\": 457,\n\t\"./11-H.svg\": 458,\n\t\"./11-S.svg\": 459,\n\t\"./12-C.svg\": 460,\n\t\"./12-D.svg\": 461,\n\t\"./12-H.svg\": 462,\n\t\"./12-S.svg\": 463,\n\t\"./13-C.svg\": 464,\n\t\"./13-D.svg\": 465,\n\t\"./13-H.svg\": 466,\n\t\"./13-S.svg\": 467,\n\t\"./14-C.svg\": 468,\n\t\"./14-D.svg\": 469,\n\t\"./14-H.svg\": 470,\n\t\"./14-S.svg\": 471,\n\t\"./2-C.svg\": 472,\n\t\"./2-D.svg\": 473,\n\t\"./2-H.svg\": 474,\n\t\"./2-J.svg\": 475,\n\t\"./2-S.svg\": 476,\n\t\"./3-C.svg\": 477,\n\t\"./3-D.svg\": 478,\n\t\"./3-H.svg\": 479,\n\t\"./3-S.svg\": 480,\n\t\"./4-C.svg\": 481,\n\t\"./4-D.svg\": 482,\n\t\"./4-H.svg\": 483,\n\t\"./4-S.svg\": 484,\n\t\"./5-C.svg\": 485,\n\t\"./5-D.svg\": 486,\n\t\"./5-H.svg\": 487,\n\t\"./5-S.svg\": 488,\n\t\"./6-C.svg\": 489,\n\t\"./6-D.svg\": 490,\n\t\"./6-H.svg\": 491,\n\t\"./6-S.svg\": 492,\n\t\"./7-C.svg\": 493,\n\t\"./7-D.svg\": 494,\n\t\"./7-H.svg\": 495,\n\t\"./7-S.svg\": 496,\n\t\"./8-C.svg\": 497,\n\t\"./8-D.svg\": 498,\n\t\"./8-H.svg\": 499,\n\t\"./8-S.svg\": 500,\n\t\"./9-C.svg\": 501,\n\t\"./9-D.svg\": 502,\n\t\"./9-H.svg\": 503,\n\t\"./9-S.svg\": 504\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 213;","module.exports = __webpack_public_path__ + \"static/media/cards.03003d3d.png\";","module.exports = __webpack_public_path__ + \"static/media/phone.b4836590.png\";","module.exports = __webpack_public_path__ + \"static/media/10-C.90a1d2da.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-D.1e7ceb93.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-H.a99c411d.svg\";","module.exports = __webpack_public_path__ + \"static/media/10-S.8b991ebd.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-C.e4d58ae7.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-D.b2cc7b26.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-H.c357eab3.svg\";","module.exports = __webpack_public_path__ + \"static/media/11-S.e9f02fbd.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-C.483c9a18.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-D.e34fab0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-H.ddc0d874.svg\";","module.exports = __webpack_public_path__ + \"static/media/12-S.84f4e7a8.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-C.f612b546.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-D.0ff22a04.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-H.60e7d399.svg\";","module.exports = __webpack_public_path__ + \"static/media/13-S.22bb59a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-C.49a458de.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-D.3fde324e.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-H.e892e743.svg\";","module.exports = __webpack_public_path__ + \"static/media/14-S.78374225.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-C.8a51f4b1.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-D.dd5bdb07.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-H.15c2e192.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-J.2efb9493.svg\";","module.exports = __webpack_public_path__ + \"static/media/2-S.bce46c7b.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-C.6f681593.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-D.15244443.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-H.5d6c501c.svg\";","module.exports = __webpack_public_path__ + \"static/media/3-S.56340b99.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-C.b4c5fedb.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-D.c1449960.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-H.a23231b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/4-S.10c84208.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-C.0eb86f9c.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-D.152f12ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-H.8196387a.svg\";","module.exports = __webpack_public_path__ + \"static/media/5-S.143b7322.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-C.4cb8bdad.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-D.bd92854e.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-H.19f2ecf2.svg\";","module.exports = __webpack_public_path__ + \"static/media/6-S.ade7c7e4.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-C.d8d8520b.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-D.204f8d6f.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-H.f0681bb0.svg\";","module.exports = __webpack_public_path__ + \"static/media/7-S.f6bb3b39.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-C.fe3de886.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-D.b6635e40.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-H.eac2a810.svg\";","module.exports = __webpack_public_path__ + \"static/media/8-S.6e2329eb.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-C.a91a0922.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-D.2c4bfcfc.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-H.75cb4cf1.svg\";","module.exports = __webpack_public_path__ + \"static/media/9-S.30d03378.svg\";","import firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/auth\";\n\n// Initialize Firebase\nconst config = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID\n};\nconst fire = firebase.initializeApp(config);\n\nconst auth = firebase.auth();\nconst db = firebase.database();\n\nexport { fire, db, auth };\n\n// export default fire;\n","import { auth } from './fire';\r\n\r\n// Sign Up\r\nexport const createUser = (email: string, password: string) =>\r\n  auth.createUserWithEmailAndPassword(email, password);\r\n\r\n// Sign In\r\nexport const signInUser = (email: string, password: string) =>\r\n  auth.signInWithEmailAndPassword(email, password);\r\n\r\n// Sign out\r\nexport const signOut = () => auth.signOut();\r\n","import { db } from \"./fire\";\n\n// User API\n\nexport const doCreateUser = (id: any, userInfo: any) =>\n  db.ref(`users/${id}`).set(userInfo);\n\nexport const onceGetUsers = () => db.ref(\"users\").once(\"value\");\n\nexport const onceGetLeagues = () => db.ref(\"leagues\").once(\"value\");\n","export interface IEventEmitter<T> {\r\n  on(handler: (data?: T) => void): void;\r\n  off(handler: (data?: T) => void): void;\r\n}\r\n\r\nexport type IHandler<T> = (data?: T) => void;\r\n\r\nexport class EventEmitter<T> {\r\n  private handlers: Array<IHandler<T>> = [];\r\n\r\n  public on(handler: IHandler<T>): void {\r\n    this.handlers.push(handler);\r\n  }\r\n\r\n  public off(handler: IHandler<T>): void {\r\n    this.handlers = this.handlers.filter(h => h !== handler);\r\n  }\r\n\r\n  public trigger(data?: T) {\r\n    this.handlers.slice(0).forEach(h => h(data));\r\n  }\r\n}\r\n","import { fire } from '../firebase';\r\nimport { EventEmitter } from '../utils/events/EventEmitter';\r\nimport { IGameInvite } from './LeagueSrv';\r\n\r\n// TODO: handle posible of many notification\r\n// for example: two game invites from two different leagues\r\nclass NotificationsService {\r\n  private gameInviteEventEmitter: EventEmitter<\r\n    IGameInvite\r\n  > = new EventEmitter();\r\n\r\n  public registerGameInvite(callback: () => void) {\r\n    this.gameInviteEventEmitter.on(callback);\r\n\r\n    const userId = fire.auth().currentUser?.uid;\r\n    const gameInvitesRef = fire\r\n      .database()\r\n      .ref()\r\n      .child(`notifications/gameInvites`);\r\n\r\n    gameInvitesRef\r\n      .child(`/invitedPlayers/${userId}`)\r\n      .on('child_added', (invite) => {\r\n        gameInvitesRef.child(invite.val()).once('value', (snapshot) => {\r\n          console.log(snapshot.val());\r\n          this.gameInviteEventEmitter.trigger(snapshot.val());\r\n        });\r\n      });\r\n  }\r\n}\r\n\r\nexport default new NotificationsService();\r\n","import React from 'react';\r\n\r\nexport type UserContext = firebase.User | null;\r\n\r\nconst AuthUserContext = React.createContext<UserContext>(null);\r\n\r\nexport default AuthUserContext;\r\n","import React from 'react';\r\nimport { fire } from '../firebase';\r\nimport AuthUserContext from './AuthUserContext';\r\n\r\nconst withAuthentication = (Component: React.ComponentType) => {\r\n  class WithAuthentication extends React.Component {\r\n    public state = {\r\n      authUser: null,\r\n    };\r\n\r\n    componentDidMount() {\r\n      fire.auth().onAuthStateChanged(authUser => {\r\n        authUser\r\n          ? this.setState({ authUser })\r\n          : this.setState({ authUser: null });\r\n      });\r\n    }\r\n\r\n    render() {\r\n      const { authUser } = this.state;\r\n\r\n      return (\r\n        <AuthUserContext.Provider value={authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  return WithAuthentication;\r\n};\r\n\r\nexport default withAuthentication;\r\n","import React from \"react\";\nimport { withRouter, Link, RouteComponentProps } from \"react-router-dom\";\nimport { Form, Input, Button } from \"antd\";\nimport {\n  MailOutlined,\n  LockOutlined,\n  ArrowLeftOutlined\n} from \"@ant-design/icons\";\nimport * as routes from \"../constants/routes\";\nimport { auth } from \"../firebase\";\nimport AuthUserContext from \"./AuthUserContext\";\n\nimport \"./Login.scss\";\nimport { IFormValues } from \"../models/common/BasicTypes\";\n\nconst FormItem = Form.Item;\n\nexport interface ILoginState {\n  isLoading: boolean;\n}\n\nexport interface ILoginProps extends RouteComponentProps {}\n\nclass Login extends React.Component<ILoginProps, ILoginState> {\n  state = {\n    isLoading: false\n  };\n\n  private handleSubmit = (values: IFormValues) => {\n    this.setState({ isLoading: true });\n\n    const { history } = this.props;\n    const { email, password } = values;\n\n    auth\n      .signInUser(email, password)\n      .then(authUser => {\n        console.log(authUser);\n        history.push(routes.MAIN);\n      })\n      .catch(error => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // ...\n        alert(error.message);\n        this.setState({ isLoading: false });\n      });\n  };\n\n  public render() {\n    const { history } = this.props;\n    const { isLoading } = this.state;\n\n    return (\n      <AuthUserContext.Consumer>\n        {authUser =>\n          !authUser ? (\n            <Form onFinish={this.handleSubmit} className=\"login-form\">\n              <FormItem\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                    message: \"The input is not valid E-mail!\"\n                  },\n                  {\n                    required: true,\n                    message: \"Please input your email!\"\n                  }\n                ]}\n              >\n                <Input\n                  prefix={<MailOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                  placeholder=\"email\"\n                  size=\"large\"\n                />\n              </FormItem>\n              <FormItem\n                name=\"password\"\n                rules={[\n                  { required: true, message: \"Please input your Password!\" }\n                ]}\n              >\n                <Input\n                  prefix={<LockOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\n                  type=\"password\"\n                  placeholder=\"password\"\n                  size=\"large\"\n                />\n              </FormItem>\n              <FormItem>\n                {/* <a className=\"login-form-forgot\" href=\"\">\n                  Forgot password\n                </a> */}\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  size=\"large\"\n                  className=\"login-form-button\"\n                  loading={isLoading}\n                >\n                  Log in\n                </Button>\n                Or <Link to={routes.SIGN_UP}>register now!</Link>\n              </FormItem>\n            </Form>\n          ) : (\n            <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\n              <p>You are already logged in,</p>\n              <Button\n                type=\"primary\"\n                size=\"small\"\n                onClick={() => history.goBack()}\n                icon={<ArrowLeftOutlined />}\n              >\n                Go back\n              </Button>{\" \"}\n              or <Link to={routes.MAIN}>Go Home</Link>\n            </div>\n          )\n        }\n      </AuthUserContext.Consumer>\n    );\n  }\n}\n\nexport default withRouter(Login);\n","export const SIGN_IN = '/login';\r\nexport const SIGN_UP = '/signup';\r\nexport const MAIN = '/';\r\nexport const LEAGUE = '/league';\r\nexport const GAME = '/game';","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Form, Input, Button } from 'antd';\nimport {\n  SmileOutlined,\n  UserOutlined,\n  MailOutlined,\n  LockOutlined,\n} from '@ant-design/icons';\nimport { auth, db } from '../firebase';\nimport './Login.scss';\nimport { IFormValues } from '../models/common/BasicTypes';\nimport { FormInstance } from 'antd/lib/form';\n\nconst FormItem = Form.Item;\n\ninterface ISignUpState {\n  confirmDirty: boolean;\n  isLoading: boolean;\n}\n\ninterface ISignUpProps extends RouteComponentProps {}\n\nclass SignUp extends React.Component<ISignUpProps, ISignUpState> {\n  private formRef = React.createRef<FormInstance>();\n\n  public constructor(props: ISignUpProps) {\n    super(props);\n\n    this.state = {\n      confirmDirty: false,\n      isLoading: false,\n    };\n  }\n\n  private handleConfirmBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  };\n\n  private compareToFirstPassword = (rule: any, value: any, callback: any) => {\n    const form = this.formRef.current;\n\n    if (form && value && value !== form.getFieldValue('password')) {\n      callback('Two passwords that you enter is inconsistent!');\n    } else {\n      callback();\n    }\n  };\n\n  private validateToNextPassword = (rule: any, value: any, callback: any) => {\n    const form = this.formRef.current;\n\n    if (value && this.state.confirmDirty) {\n      form && form.validateFields(['confirm']);\n    }\n    callback();\n  };\n\n  private handleSubmit = (values: IFormValues) => {\n    this.setState({ isLoading: true });\n\n    const { name, nickname, email, password } = values;\n    auth\n      .createUser(email, password)\n      .then(authUser => {\n        // Create a user in own accessible Firebase Database too\n        authUser &&\n          authUser.user &&\n          db\n            .doCreateUser(authUser.user.uid, { name, nickname, email })\n            .then(() => {\n              this.props.history.push('/');\n            })\n            .catch(error => {\n              // Handle Errors here.\n              var errorCode = error.code;\n              var errorMessage = error.message;\n              // ...\n              alert(error.message);\n              this.setState({ isLoading: false });\n            });\n      })\n      .catch(error => {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // ...\n        alert(error.message);\n        this.setState({ isLoading: false });\n      });\n  };\n\n  public render() {\n    const { isLoading } = this.state;\n\n    return (\n      <Form\n        onFinish={this.handleSubmit}\n        ref={this.formRef}\n        className=\"login-form\"\n      >\n        <FormItem\n          name=\"name\"\n          rules={[{ required: true, message: 'Please input your name!' }]}\n        >\n          <Input\n            prefix={<UserOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Name\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"nickname\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Nickname!',\n            },\n          ]}\n        >\n          <Input\n            prefix={<SmileOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Nickname\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"email\"\n          rules={[\n            {\n              type: 'email',\n              message: 'The input is not valid E-mail!',\n            },\n            {\n              required: true,\n              message: 'Please input your email!',\n            },\n          ]}\n        >\n          <Input\n            prefix={<MailOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            placeholder=\"Email\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Password!',\n            },\n            {\n              validator: this.validateToNextPassword,\n            },\n          ]}\n        >\n          <Input\n            prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            type=\"password\"\n            placeholder=\"Password\"\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem\n          name=\"confirm\"\n          rules={[\n            {\n              required: true,\n              message: 'Please confirm your password!',\n            },\n            {\n              validator: this.compareToFirstPassword,\n            },\n          ]}\n        >\n          <Input\n            prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />}\n            type=\"password\"\n            placeholder=\"Confirm password\"\n            onBlur={this.handleConfirmBlur}\n            size=\"large\"\n          />\n        </FormItem>\n        <FormItem>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            size=\"large\"\n            className=\"login-form-button\"\n            loading={isLoading}\n          >\n            Sign Up\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n}\n\nexport default withRouter(SignUp);\n","import React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Spin } from 'antd';\nimport { fire } from '../firebase';\nimport * as routes from '../constants/routes';\nimport AuthUserContext, { UserContext } from './AuthUserContext';\n\ninterface IWithAuthorizationProps extends RouteComponentProps {}\n\nconst withAuthorization = <TProps,>(\n  authCondition: (authUser: UserContext) => boolean\n) => (Component: React.ComponentType<TProps>) => {\n  class WithAuthorization extends React.Component<\n    IWithAuthorizationProps & TProps\n  > {\n    public componentDidMount() {\n      fire.auth().onAuthStateChanged((authUser: UserContext) => {\n        if (!authCondition(authUser)) {\n          this.props.history.push(routes.SIGN_IN);\n        }\n      });\n    }\n\n    public render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            authUser ? (\n              <Component {...this.props} />\n            ) : (\n              <div className=\"full-view loader\">\n                <Spin\n                  size=\"large\"\n                  style={{ width: '100%', position: 'relative', top: '50%' }}\n                />\n              </div>\n            )\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withRouter(WithAuthorization);\n};\n\nexport default withAuthorization;\n","import React, { Component } from 'react';\nimport { Modal, Form, Input, Select, Spin } from 'antd';\nimport { fire } from '../firebase';\nimport { onceGetUsers, onceGetLeagues } from '../firebase/db';\nimport { IBasicDialogProps } from './Dialog';\nimport { IPlayer, IRawPlayer } from '../models/ILeagueModel';\nimport { FormInstance } from 'antd/lib/form/Form';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\ninterface INewLeagueState {\n  showDialog: boolean;\n  loading: boolean;\n  savingLeagueLoader: boolean;\n  users: { [userKey: string]: IRawPlayer };\n  count: number;\n}\n\nexport interface INewLeagueProps extends IBasicDialogProps<number> {}\n\nclass NewLeague extends Component<INewLeagueProps, INewLeagueState> {\n  private leagueID: number | undefined;\n  private formRef = React.createRef<FormInstance>();\n\n  constructor(props: INewLeagueProps) {\n    super(props);\n\n    this.state = {\n      showDialog: this.props.visible,\n      users: {},\n      count: 0,\n      loading: true,\n      // addPlayerCollapse: [],\n      savingLeagueLoader: false,\n    };\n  }\n\n  fetchPlayers() {\n    onceGetUsers().then((snapshot) => {\n      if (snapshot.val()) {\n        this.setState({ users: snapshot.val(), loading: false });\n      } else {\n        this.setState({ loading: false });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetchPlayers();\n  }\n\n  render() {\n    const { showDialog, users, loading, savingLeagueLoader } = this.state;\n\n    return (\n      <Modal\n        title=\"Create League\"\n        visible={showDialog}\n        destroyOnClose={true}\n        maskClosable={false}\n        confirmLoading={savingLeagueLoader}\n        onOk={this.onCreateLeague}\n        onCancel={this.closeModal}\n        afterClose={this.afterClose}\n        // width=\"600px\"\n        okText=\"Save & Play\"\n        getContainer=\".app\"\n      >\n        <Form ref={this.formRef} layout=\"vertical\">\n          <FormItem\n            label=\"Title\"\n            name=\"title\"\n            rules={[\n              { required: true, message: 'Please input the league title!' },\n            ]}\n          >\n            <Input />\n          </FormItem>\n          <FormItem label=\"Description\" name=\"description\">\n            <Input type=\"textarea\" />\n          </FormItem>\n          {\n            <FormItem\n              label=\"Players\"\n              name=\"players\"\n              rules={[{ required: true, len: 4, type: 'array' }]}\n            >\n              <Select\n                mode=\"multiple\"\n                notFoundContent={loading ? <Spin size=\"small\" /> : null}\n              >\n                {Object.keys(users).map((key) => (\n                  <Option key={key} value={key}>\n                    {users[key].nickname}\n                  </Option>\n                ))}\n              </Select>\n            </FormItem>\n          }\n        </Form>\n      </Modal>\n    );\n  }\n\n  private onCreateLeague = () => {\n    const form = this.formRef.current;\n    const { users } = this.state;\n\n    form &&\n      form\n        .validateFields(['title', 'description', 'players'])\n        .then((values) => {\n          const { description } = values;\n          this.setState({ savingLeagueLoader: true });\n\n          const players: IPlayer[] = values.players.map((key: string) => ({\n            key,\n            nickname: users[key].nickname,\n          }));\n\n          onceGetLeagues().then((snapshot) => {\n            const lastID = snapshot.val() && snapshot.val().lastID;\n            const newID = lastID ? lastID + 1 : 1;\n\n            fire\n              .database()\n              .ref('leagues/list/_' + newID)\n              .set({\n                ...values,\n                players,\n                description: description || '',\n                leagueID: newID,\n                active: true,\n              })\n              .then(() => this.setNewLeagueID(newID));\n            fire.database().ref('leagues/lastID').set(newID);\n          });\n        });\n  };\n\n  private setNewLeagueID = (leagueID: number) => {\n    this.leagueID = leagueID;\n\n    this.closeModal();\n  };\n  // in order to preserve the animation when closing\n  // there is also an inner state although visible state initialy is from props\n  private closeModal = () => {\n    this.setState({\n      showDialog: false,\n    });\n  };\n\n  private afterClose = () => {\n    const { onAfterClose } = this.props;\n\n    if (typeof onAfterClose === 'function') {\n      onAfterClose(this.leagueID);\n    }\n  };\n}\n\nexport default NewLeague;\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Modal, List } from 'antd';\r\nimport './ResumeLeague.scss';\r\n\r\nclass ResumeLeague extends Component {\r\n  state = {\r\n    showDialog: this.props.visible,\r\n  };\r\n\r\n  closeModal(leagueID) {\r\n    // if leagueID - first close the modal then afterClose will pass the leagueID to rout to the right location\r\n    this.leagueID = leagueID;\r\n\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { afterClose, activeLeagues } = this.props;\r\n    const { showDialog } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        title=\"Resume League\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        maskClosable={false}\r\n        width=\"600px\"\r\n        footer={null}\r\n        onCancel={() => this.closeModal()}\r\n        afterClose={() => afterClose(this.leagueID)}\r\n      >\r\n        <p>List of open leagues</p>\r\n        <List\r\n          itemLayout=\"horizontal\"\r\n          dataSource={activeLeagues}\r\n          renderItem={item => (\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                title={\r\n                  <a onClick={() => this.closeModal(item.leagueID)}>\r\n                    {item.title}\r\n                  </a>\r\n                }\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ResumeLeague);\r\n","export const hasTouch = (): boolean =>\n  !!window.navigator.maxTouchPoints ||\n  'ontouchstart' in document.documentElement;\n\nexport function addListener(\n  element: HTMLElement,\n  type: string,\n  callback: (e: Event) => void\n) {\n  element.addEventListener(type, callback);\n\n  return () => {\n    element.removeEventListener(type, callback);\n  };\n}\n\nexport function isMobileBrowser(): boolean {\n  return (\n    typeof window.orientation !== 'undefined' ||\n    navigator.userAgent.indexOf('IEMobile') !== -1\n  );\n}\n\nexport const unique = <T>(array: T[]) => Array.from(new Set(array));\n","import React from \"react\";\nimport { Motion, spring } from \"react-motion\";\nimport { addListener } from \"../../utils/Utils\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport \"./DragPad.scss\";\n\nconst springSetting1 = { stiffness: 180, damping: 10 };\nconst springSetting2 = { stiffness: 120, damping: 17 };\n\nexport function reorder(arr, from, to) {\n  const _arr = [...arr];\n\n  if (Math.abs(from - to) === arr.length - 1) {\n    [_arr[to], _arr[from]] = [_arr[from], _arr[to]];\n  } else if (from < to && to - from > 1) {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.unshift(_arr.pop());\n    _arr.splice(to, 0, val);\n  } else {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.splice(to, 0, val);\n  }\n\n  return _arr;\n}\n\nfunction clamp(n, min, max) {\n  return Math.max(Math.min(n, max), min);\n}\n\nconst allColors = [\"#EF767A\", \"#9acaff\", \"#49BEAA\", \"#49DCB1\"];\nconst [count, width, height] = [4, 80, 80];\n\n// indexed by visual position\n// const layout = [0, 1, 2, 3].map(n => {\n//   const row = Math.floor(n / 3);\n//   const col = n % 3;\n//   return [width * col, height * row];\n// });\n\nconst layout = [\n  [width * 1, height * 0],\n  [width * 2, height * 1],\n  [width * 1, height * 2],\n  [width * 0, height * 1]\n];\n\nexport default class DragPad extends React.Component {\n  unListenTouchmove;\n  unListenTouchend;\n  unListenMousemove;\n  unListenMouseup;\n  colors;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mouseXY: [0, 0],\n      mouseCircleDelta: [0, 0], // difference between mouse and circle pos for x + y coords, for dragging\n      lastPress: null, // key of the last pressed component\n      isPressed: false,\n      order: props.players,\n      from: null,\n      to: null\n    };\n\n    this.colors = props.players.reduce((colorObj, player, i) => {\n      colorObj[player.key] = allColors[i];\n\n      return colorObj;\n    }, {});\n  }\n\n  componentDidMount() {\n    this.unListenTouchmove = addListener(\n      window,\n      \"touchmove\",\n      this.handleTouchMove\n    );\n    this.unListenTouchend = addListener(window, \"touchend\", this.handleMouseUp);\n    this.unListenMousemove = addListener(\n      window,\n      \"mousemove\",\n      this.handleMouseMove\n    );\n    this.unListenMouseup = addListener(window, \"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    this.unListenTouchmove();\n    this.unListenTouchend();\n    this.unListenMousemove();\n    this.unListenMouseup();\n  }\n\n  handleTouchStart = (key, pressLocation, e) => {\n    this.handleMouseDown(key, pressLocation, e.touches[0]);\n  };\n\n  handleTouchMove = e => {\n    e.preventDefault();\n    this.handleMouseMove(e.touches[0]);\n  };\n\n  handleMouseMove = ({ pageX, pageY }) => {\n    const {\n      order,\n      lastPress,\n      isPressed,\n      mouseCircleDelta: [dx, dy]\n    } = this.state;\n\n    if (isPressed) {\n      const mouseXY = [pageX - dx, pageY - dy];\n\n      const col = clamp(Math.round(mouseXY[0] / width), 0, 2);\n      const row = clamp(\n        Math.round(mouseXY[1] / height),\n        0,\n        Math.floor(count / 2)\n      );\n\n      // if col === 1 && row === 0 => index = 0;\n      // if col === 2 && row === 1 => index = 1;\n      // if col === 1 && row === 2 => index = 2;\n      // if col === 0 && row === 1 => index = 3;\n\n      let to = null;\n\n      if (col === 1 && row === 0) {\n        to = 0;\n      } else if (col === 2 && row === 1) {\n        to = 1;\n      } else if (col === 1 && row === 2) {\n        to = 2;\n      } else if (col === 0 && row === 1) {\n        to = 3;\n      }\n\n      const from = order.findIndex(p => p.key === lastPress);\n\n      const newOrder =\n        typeof to === \"number\" && to !== from && reorder(order, from, to);\n\n      this.setState({\n        mouseXY,\n        order: newOrder ? newOrder : [...order],\n        from: newOrder ? from : this.state.from,\n        to: newOrder ? to : this.state.to\n      });\n    }\n  };\n\n  handleMouseDown = (key, [pressX, pressY], { pageX, pageY }) => {\n    this.setState({\n      lastPress: key,\n      isPressed: true,\n      mouseCircleDelta: [pageX - pressX, pageY - pressY],\n      mouseXY: [pressX, pressY]\n    });\n  };\n\n  handleMouseUp = () => {\n    this.setState({ isPressed: false, mouseCircleDelta: [0, 0] });\n\n    if (typeof this.props.onChange === \"function\") {\n      const { order, from, to } = this.state;\n      this.props.onChange(order, from, to);\n    }\n  };\n\n  render() {\n    const { order, lastPress, isPressed, mouseXY } = this.state;\n\n    return (\n      <div className=\"drag-pad\">\n        <div className=\"drag-pad-content\">\n          {order.map((player, key) => {\n            let style;\n            let x;\n            let y;\n            const visualPosition = order.findIndex(p => p.key === player.key);\n            // const visualPosition = order.indexOf(player.index);\n            if (player.key === lastPress && isPressed) {\n              [x, y] = mouseXY;\n              style = {\n                translateX: x,\n                translateY: y,\n                scale: spring(1.2, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            } else {\n              [x, y] = layout[visualPosition];\n              style = {\n                translateX: spring(x, springSetting2),\n                translateY: spring(y, springSetting2),\n                scale: spring(1, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            }\n            return (\n              <Motion key={player.key} style={style}>\n                {({ translateX, translateY, scale, boxShadow }) => (\n                  <div\n                    onMouseDown={this.handleMouseDown.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    onTouchStart={this.handleTouchStart.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    className=\"player-icon\"\n                    style={{\n                      backgroundColor: this.colors[player.key],\n                      WebkitTransform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      transform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      zIndex: player.key === lastPress ? 99 : visualPosition,\n                      boxShadow: `${boxShadow}px 5px 5px rgba(0,0,0,0.5)`\n                    }}\n                  >\n                    <UserOutlined />\n                    <span>{player.nickname}</span>\n                  </div>\n                )}\n              </Motion>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import NewLeagueDialog from '../dialogs/NewLeague';\nimport ResumeLeagueDialog from '../dialogs/ResumeLeague';\nimport ReorderPlayers from '../dialogs/ReorderPlayers';\nimport NewGameDialog from '../dialogs/NewGameDialog/NewGameDialog';\nimport GameInvite from '../dialogs/GameInvite';\n\nexport enum Dialogs {\n  NEW_LEAGUE = 'NEW_LEAGUE',\n  RESUME_LEAGUE = 'RESUME_LEAGUE',\n  REORDER_PLAYERS = 'REORDER_PLAYERS',\n  NEW_GAME = 'NEW_GAME',\n  GAME_INVITE = 'GAME_INVITE',\n}\n\nexport const DialogsMapping = {\n  [Dialogs.NEW_LEAGUE]: NewLeagueDialog,\n  [Dialogs.RESUME_LEAGUE]: ResumeLeagueDialog,\n  [Dialogs.REORDER_PLAYERS]: ReorderPlayers,\n  [Dialogs.NEW_GAME]: NewGameDialog,\n  [Dialogs.GAME_INVITE]: GameInvite,\n};\n","import React, { Component } from 'react';\nimport { Modal } from 'antd';\nimport DragPad from '../common/dragPad/DragPad';\nimport { IBasicDialogProps } from './Dialog';\nimport { IPlayer } from '../models/ILeagueModel';\n\ninterface IReorderPlayersState {\n  showDialog: boolean;\n  order: IPlayer[];\n}\n\nexport interface IReorderPlayersProps extends IBasicDialogProps<any> {\n  players: IPlayer[];\n  onOk: (order: IPlayer[]) => void;\n}\n\nexport default class ReorderPlayers extends Component<\n  IReorderPlayersProps,\n  IReorderPlayersState\n> {\n  constructor(props: IReorderPlayersProps) {\n    super(props);\n\n    this.state = {\n      showDialog: props.visible,\n      order: props.players,\n    };\n\n    this.handleOnCancel = this.handleOnCancel.bind(this);\n    this.handleOnOk = this.handleOnOk.bind(this);\n    this.afterClose = this.afterClose.bind(this);\n    this.handleDragChange = this.handleDragChange.bind(this);\n  }\n\n  public render() {\n    const { players } = this.props;\n    const { showDialog } = this.state;\n\n    return (\n      <Modal\n        title=\"Reorder Players\"\n        visible={showDialog}\n        destroyOnClose={true}\n        maskClosable={false}\n        width=\"600px\"\n        onOk={this.handleOnOk}\n        onCancel={this.handleOnCancel}\n        afterClose={this.afterClose}\n      >\n        <DragPad players={players} onChange={this.handleDragChange} />\n      </Modal>\n    );\n  }\n\n  private handleOnCancel() {\n    this.setState({\n      showDialog: false,\n    });\n  }\n\n  private handleOnOk() {\n    this.setState({\n      showDialog: false,\n    });\n\n    const { onOk } = this.props;\n    if (typeof onOk === 'function') {\n      const { order } = this.state;\n      onOk(order);\n    }\n  }\n\n  private afterClose() {\n    const { onAfterClose } = this.props;\n\n    if (typeof onAfterClose === 'function') {\n      onAfterClose();\n    }\n  }\n\n  private handleDragChange(order: IPlayer[]) {\n    this.setState({\n      order,\n    });\n  }\n}\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport './NewGameDialog.scss';\r\nimport { GameMode } from '../../models/IGameModel';\r\nimport { IBasicDialogProps } from '../Dialog';\r\n\r\ninterface INewGameDialogState {\r\n  showDialog: boolean;\r\n  modeSelected?: GameMode;\r\n}\r\n\r\nexport interface INewGameDialogProps extends IBasicDialogProps<GameMode> {}\r\n\r\nexport default class NewGameDialog extends React.Component<\r\n  INewGameDialogProps,\r\n  INewGameDialogState\r\n> {\r\n  public constructor(props: INewGameDialogProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showDialog: props.visible,\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    const { showDialog } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        wrapClassName=\"remote-local-dialog\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        closable={false}\r\n        maskClosable={false}\r\n        centered={true}\r\n        width=\"300px\"\r\n        okText={'Frontal'}\r\n        cancelText={'OnLine'}\r\n        onOk={this.setGameMode('local')}\r\n        onCancel={this.setGameMode('remote')}\r\n        afterClose={this.handleAfterClose}\r\n        bodyStyle={{ display: 'none' }}\r\n      />\r\n    );\r\n  }\r\n\r\n  private setGameMode = (mode: GameMode) => () => {\r\n    this.setState({\r\n      showDialog: false,\r\n      modeSelected: mode,\r\n    });\r\n  };\r\n\r\n  private handleAfterClose = () => {\r\n    const { onAfterClose } = this.props;\r\n\r\n    if (typeof onAfterClose === 'function' && this.state.modeSelected) {\r\n      onAfterClose(this.state.modeSelected);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport { IGameInvite } from '../services/LeagueSrv';\r\nimport { IBasicDialogProps } from './Dialog';\r\n\r\ninterface IGameInviteState {\r\n  showDialog: boolean;\r\n}\r\n\r\nexport interface IGameInviteProps extends IBasicDialogProps<any> {\r\n  invite: IGameInvite;\r\n  onOk: () => void;\r\n}\r\n\r\nexport default class GameInvite extends React.Component<\r\n  IGameInviteProps,\r\n  IGameInviteState\r\n> {\r\n  public constructor(props: IGameInviteProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showDialog: props.visible,\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    const { showDialog } = this.state;\r\n    const { leagueTitle, newGameId, inviter } = this.props.invite;\r\n\r\n    return (\r\n      <Modal\r\n        title=\"Game Invite\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        closable={true}\r\n        maskClosable={false}\r\n        centered={true}\r\n        width=\"300px\"\r\n        okText={'Join'}\r\n        cancelText={'Cancel'}\r\n        onOk={this.handleOk}\r\n        onCancel={this.handleCancel}\r\n        afterClose={this.handleAfterClose}\r\n      >\r\n        <div>\r\n          {`${inviter.nickname} from ${leagueTitle} invites you to join game ${newGameId}`}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  private handleOk = () => {\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n\r\n    const { onOk } = this.props;\r\n    if (typeof onOk === 'function') {\r\n      onOk();\r\n    }\r\n  };\r\n\r\n  private handleCancel = () => {\r\n    this.setState({\r\n      showDialog: false,\r\n    });\r\n  };\r\n\r\n  private handleAfterClose = () => {\r\n    const { onAfterClose } = this.props;\r\n\r\n    if (typeof onAfterClose === 'function') {\r\n      onAfterClose();\r\n    }\r\n  };\r\n}\r\n","export enum CARDS {\r\n  SPADE = 'SPADE',\r\n  HART = 'HART',\r\n  DIAMOND = 'DIAMOND',\r\n  CLUB = 'CLUB',\r\n  NT = 'NT',\r\n}\r\n\r\nexport const CardsType = {\r\n  [CARDS.CLUB]: 'C',\r\n  [CARDS.DIAMOND]: 'D',\r\n  [CARDS.HART]: 'H',\r\n  [CARDS.SPADE]: 'S',\r\n};\r\n","import React from 'react';\nimport { DialogsMapping, Dialogs } from '../constants/dialogs';\nimport { INewGameDialogProps } from './NewGameDialog/NewGameDialog';\nimport { IGameInviteProps } from './GameInvite';\nimport { IReorderPlayersProps } from './ReorderPlayers';\nimport { INewLeagueProps } from './NewLeague';\n\nexport interface IBasicDialogProps<T> {\n  visible: boolean;\n  onAfterClose?: <T>(arg?: T) => void;\n}\n\n// TODO: remove the any once all the dialogs are ts and implement dinamic typing\nexport type DialogProps =\n  | INewGameDialogProps\n  | IGameInviteProps\n  | IReorderPlayersProps\n  | INewLeagueProps\n  | any;\n\nexport interface IDialogProps {\n  dialog: Dialogs;\n  dialogProps?: DialogProps;\n}\n\nconst Dialog: React.FC<IDialogProps> = (props) => {\n  const { dialog, dialogProps } = props;\n  const DialogEl = DialogsMapping[dialog];\n\n  return <DialogEl {...dialogProps} />;\n};\n\nexport default Dialog;\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport Dialog, { DialogProps } from '../dialogs/Dialog';\r\nimport { Dialogs } from '../constants/dialogs';\r\n\r\nexport interface IMainMenuItem {\r\n  text: string;\r\n  onClick?: () => void;\r\n  dialog?: Dialogs;\r\n  disabled?: boolean;\r\n  dialogProps: DialogProps;\r\n}\r\n\r\nexport interface IMainMenuProps {\r\n  items: IMainMenuItem[];\r\n}\r\n\r\nconst MainMenu = (props: IMainMenuProps) => {\r\n  return (\r\n    <ul className=\"app-menu\">\r\n      {props.items.map((item, index) => {\r\n        const { onClick, text, dialog, dialogProps, disabled } = item;\r\n\r\n        // the Dialog should not be instanced unless it's visible\r\n        // in some Dialogs there are calls to the DB\r\n        return (\r\n          <li key={index}>\r\n            <Button onClick={onClick} size=\"large\" disabled={disabled} block>\r\n              {text}\r\n            </Button>\r\n            {dialog && dialogProps.visible ? (\r\n              <Dialog dialog={dialog} dialogProps={dialogProps} />\r\n            ) : (\r\n              ''\r\n            )}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default MainMenu;\r\n","import React, { Component } from 'react';\nimport { fire, auth } from '../firebase';\nimport withAuthorization from '../authentication/withAuthorization';\nimport MainMenu from './MainMenu';\nimport * as routes from './../constants/routes';\nimport { Dialogs } from './../constants/dialogs';\n\nclass Main extends Component {\n  // Dialogs visible states controling if the Dialog should be instansiated or not\n  // this outer state is for saving unnecessary access to the DB\n  state = {\n    activeLeagues: [],\n    newLeague: false,\n    resumeLeague: false,\n  };\n\n  /* Create reference to activeLeagues in Firebase Database */\n  activeLeagues = fire\n    .database()\n    .ref('leagues/list')\n    .orderByChild('active')\n    .equalTo(true);\n\n  fetch() {\n    this.activeLeagues.on('value', (snapshot) => {\n      if (snapshot.val()) {\n        const userId = fire.auth().currentUser.uid;\n\n        // filtering leagues data by userId,\n        // TODO: check if possible to fix the data differently in the database for better queries\n        // TODO: fix the loader functionality\n        this.setState({\n          activeLeagues: Object.values(snapshot.val()).filter(({ players }) =>\n            Object.values(players).some(({ key }) => key === userId)\n          ),\n          loading: false,\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.activeLeagues.off('value');\n  }\n\n  showResumeLeagueDialog() {\n    this.setState({\n      resumeLeague: true,\n    });\n  }\n\n  closeResumeLeagueDialog(leagueID) {\n    this.setState({\n      resumeLeague: false,\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  showNewLeagueDialog() {\n    this.setState({\n      newLeague: true,\n    });\n  }\n\n  closeNewLeagueDialog(leagueID) {\n    this.setState({\n      newLeague: false,\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  navigateToLeague(leagueID) {\n    if (leagueID) {\n      this.props.history.push(`${routes.LEAGUE}/` + leagueID);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"app-main\">\n        <MainMenu\n          items={[\n            {\n              text: 'Resume League',\n              onClick: this.showResumeLeagueDialog.bind(this),\n              dialog: Dialogs.RESUME_LEAGUE,\n              disabled: this.state.activeLeagues.length === 0,\n              dialogProps: {\n                afterClose: this.closeResumeLeagueDialog.bind(this),\n                visible: this.state.resumeLeague,\n                activeLeagues: this.state.activeLeagues,\n              },\n            },\n            {\n              text: 'Create League',\n              onClick: this.showNewLeagueDialog.bind(this),\n              dialog: Dialogs.NEW_LEAGUE,\n              dialogProps: {\n                onAfterClose: this.closeNewLeagueDialog.bind(this),\n                visible: this.state.newLeague,\n              },\n            },\n            { text: 'Settings' },\n            { text: 'Scores' },\n            {\n              text: 'Sign Out',\n              onClick: auth.signOut,\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nconst authCondition = (authUser) => !!authUser;\n\nexport default withAuthorization(authCondition)(Main);\n","export enum INPUT_MODE {\r\n  BID = 'BID',\r\n  WON = 'WON',\r\n}\r\n\r\nexport enum GAME_STATUS {\r\n  ACTIVE = 'ACTIVE',\r\n  FINISHED = 'FINISHED',\r\n}\r\n","import { IPlayer } from '../models/ILeagueModel';\r\nimport { fire } from '../firebase';\r\nimport { CardsType } from '../constants/cards';\r\nimport {\r\n  IPlayerHand,\r\n  ICardsFromTo,\r\n  ICardsPosition,\r\n  IRoundData,\r\n} from '../models/IGameModel';\r\nimport { ThrownCardType } from '../game/ThrownCard/ThrownCard';\r\n\r\nexport const getTotalWonBid = (roundData: IRoundData) => {\r\n  let currentTotalBid: number = 0;\r\n  let currentTotalWon: number = 0;\r\n  let allHasWonInput: boolean = true;\r\n\r\n  for (const [key, value] of Object.entries(roundData)) {\r\n    if (key.indexOf('bid') > -1 && value !== null && value !== '') {\r\n      currentTotalBid += value * 1;\r\n    }\r\n\r\n    if (key.indexOf('won') > -1) {\r\n      if (value !== null && value !== '') {\r\n        currentTotalWon += value * 1;\r\n      } else {\r\n        allHasWonInput = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { currentTotalBid, currentTotalWon, allHasWonInput };\r\n};\r\n\r\nexport const calcIfRoundFell = (roundData: IRoundData): boolean => {\r\n  let didRoundFell = true;\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    const bid = `bid${i}`;\r\n    const won = `won${i}`;\r\n\r\n    if (\r\n      typeof roundData[bid] !== 'number' ||\r\n      typeof roundData[won] !== 'number'\r\n    ) {\r\n      didRoundFell = false;\r\n      break;\r\n    } else if (roundData[bid] === roundData[won]) {\r\n      didRoundFell = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return didRoundFell;\r\n};\r\n\r\nexport const cardsList: string[] = (function () {\r\n  const arr: string[] = [];\r\n  for (const type of Object.values(CardsType)) {\r\n    for (let i = 2; i < 15; i++) {\r\n      arr.push(`${i}-${type}`);\r\n    }\r\n  }\r\n\r\n  return arr;\r\n})();\r\n\r\nconst cardsFamilyScoreMap = {\r\n  [CardsType.CLUB]: 0,\r\n  [CardsType.DIAMOND]: 1,\r\n  [CardsType.HART]: 2,\r\n  [CardsType.SPADE]: 3,\r\n};\r\n\r\nexport const getDevicePlayerIndex = (players: IPlayer[]): number => {\r\n  return players.findIndex(\r\n    (player) => player.key === fire.auth().currentUser?.uid\r\n  );\r\n};\r\n\r\nexport const nextPlayerIndex = (index: number) => {\r\n  return index + 1 > 3 ? index + 1 - 4 : index + 1;\r\n};\r\n\r\nexport const dealCards = (players: IPlayer[]) => {\r\n  const shuffledCards = shuffleCards(cardsList);\r\n  const arrayOf4: string[][] = [[], [], [], []];\r\n\r\n  for (let i = 0; i < 52; i += 4) {\r\n    for (let j = 0; j < arrayOf4.length; j++) {\r\n      arrayOf4[j].push(shuffledCards[i + j]);\r\n    }\r\n  }\r\n\r\n  sortCardsArrays(arrayOf4);\r\n\r\n  return setCardsByPlayer(players, arrayOf4);\r\n};\r\n\r\nexport const shuffleCards = (cardsArray: string[]) => {\r\n  const cardsList = [...cardsArray];\r\n\r\n  for (let i = cardsList.length - 1; i > 0; i--) {\r\n    let j = Math.floor(Math.random() * (i + 1));\r\n    [cardsList[i], cardsList[j]] = [cardsList[j], cardsList[i]];\r\n  }\r\n\r\n  return cardsList;\r\n};\r\n\r\nconst setCardsByPlayer = (players: IPlayer[], cardsArr: string[][]) =>\r\n  players.reduce((obj, player, index) => {\r\n    obj[player.key] = cardsArr[index];\r\n    return obj;\r\n  }, {} as { [key: string]: string[] });\r\n\r\nconst sortCardsArrays = (cardsArray: string[][]) => {\r\n  cardsArray.forEach((arr) => sortCards(arr));\r\n};\r\n\r\nconst sortCards = (cards: string[]) =>\r\n  cards.sort((cardX, cardY) => {\r\n    const [cardXNum, cardXType] = cardX.split('-');\r\n    const [cardYNum, cardYType] = cardY.split('-');\r\n\r\n    if (cardsFamilyScoreMap[cardXType] < cardsFamilyScoreMap[cardYType]) {\r\n      return 1;\r\n    }\r\n    if (cardsFamilyScoreMap[cardXType] > cardsFamilyScoreMap[cardYType]) {\r\n      return -1;\r\n    }\r\n\r\n    return +cardXNum - +cardYNum;\r\n  });\r\n\r\nexport const uniqueHand = (hand: IPlayerHand[]) => {\r\n  const uniqueResult = [];\r\n  const map = new Map();\r\n\r\n  for (const playerHand of hand) {\r\n    if (!map.has(playerHand.player)) {\r\n      map.set(playerHand.player, true);\r\n\r\n      uniqueResult.push(playerHand);\r\n    }\r\n  }\r\n\r\n  return uniqueResult;\r\n};\r\n\r\nconst CARD_WIDTH = 90;\r\nconst CARD_HEIGHT = 126;\r\nconst CARD_MARKER_HEIGHT = 188;\r\n\r\nexport const getFromToCalc = (\r\n  thrownType: ThrownCardType,\r\n  markerTop: number,\r\n  markerWidth: number,\r\n  ownThrownCardInitPos: ICardsPosition\r\n): ICardsFromTo => {\r\n  switch (thrownType) {\r\n    case 'right':\r\n      return {\r\n        from: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth + CARD_WIDTH,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth / 2,\r\n        },\r\n      };\r\n\r\n    case 'left':\r\n      return {\r\n        from: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: -CARD_WIDTH,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth / 2 - CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'top':\r\n      return {\r\n        from: {\r\n          top: CARD_HEIGHT / 2,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT * 0.8,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    case 'bottom':\r\n      let fromTop: number | undefined = undefined;\r\n      let fromLeft: number | undefined = undefined;\r\n\r\n      if (ownThrownCardInitPos) {\r\n        fromTop = ownThrownCardInitPos.top;\r\n        fromLeft = ownThrownCardInitPos.left;\r\n      }\r\n\r\n      return {\r\n        from:\r\n          typeof fromTop === 'number' && typeof fromLeft === 'number'\r\n            ? {\r\n                top: fromTop,\r\n                left: fromLeft,\r\n              }\r\n            : undefined,\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT * 0.2,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    default:\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop,\r\n          left: markerWidth / 2,\r\n        },\r\n      };\r\n  }\r\n};\r\n\r\nexport const getToWinnerCalc = (\r\n  direction: ThrownCardType,\r\n  markerTop: number,\r\n  markerWidth: number\r\n) => {\r\n  switch (direction) {\r\n    case 'right':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: markerWidth + CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'left':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT / 2 + markerTop - CARD_HEIGHT / 2,\r\n          left: -CARD_WIDTH,\r\n        },\r\n      };\r\n\r\n    case 'top':\r\n      return {\r\n        to: {\r\n          top: 0,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n\r\n    case 'bottom':\r\n      return {\r\n        to: {\r\n          top: CARD_MARKER_HEIGHT + CARD_HEIGHT * 3,\r\n          left: markerWidth / 2 - CARD_WIDTH / 2,\r\n        },\r\n      };\r\n  }\r\n};\r\n","import React from 'react';\n\nexport const Spade = () => (\n\t<svg  x=\"0px\" y=\"0px\" viewBox=\"0 0 511.96 511.96\" style={{enableBackground:'new 0 0 511.96 511.96'}} width=\"1em\" height=\"1em\">\n\t\t<g>\n\t\t\t<path d=\"M302.728,390.351c16.49,15.934,26.368,25.759,55.905,24.541c43.494-1.783,83.871-25.459,106.364-62.729\n\t\t\t\tc38.78-64.247,17.576-128.53-23.702-166.824L272.705,6.528c-9.507-8.704-24.082-8.704-33.589,0L68.073,185.34\n\t\t\t\tc-40.13,37.226-57.256,99.037-23.729,161.483c21.283,39.645,61.767,66.357,106.726,68.087c29.281,1.121,40.801-8.66,57.759-24.488\n\t\t\t\tc4.458-4.167,11.767-1.033,11.767,5.076l0.009,29.987c0,16.172-4.228,32.071-12.253,46.115l-15.519,27.154\n\t\t\t\tc-3.354,5.888,0.892,13.206,7.671,13.206h110.813c6.78,0,11.034-7.318,7.671-13.206l-15.519-27.154\n\t\t\t\tc-8.024-14.045-12.244-29.943-12.244-46.115v-30.296C291.226,389.213,298.429,386.202,302.728,390.351\"/>\n\t\t\t<path style={{fill:'#2A2D33'}}  d=\"M427.21,329.362c-8.701,14.419-21.869,26.091-37.482,33.362c-10.397,4.841-21.597,7.606-32.91,8.072\n\t\t\t\tc-4.871,0.201-8.657,4.312-8.457,9.184c0.201,4.871,4.312,8.657,9.184,8.457c13.661-0.563,27.144-3.891,39.635-9.707\n\t\t\t\tc18.759-8.735,34.611-22.785,45.145-40.244c19.021-31.51,20.189-64.061,7.087-94.822c-1.911-4.485-7.096-6.573-11.581-4.662\n\t\t\t\tc-4.485,1.911-6.573,7.096-4.662,11.581C444.131,276.316,443.177,302.911,427.21,329.362z\"/>\n\t\t</g>\n\t</svg>\n);\n\nexport const Hart = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 510.977 510.977\" style={{enableBackground:'new 0 0 510.977 510.977'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path style={{fill:'#D71E00'}} d=\"M255.22,105.177c19.535-49.77,61.325-87.79,113.231-87.79c43.705,0,79.625,23.111,108.871,54.44\n        c38.859,41.622,56.17,137.216-15.863,209.24c-36.546,36.546-205.815,212.524-205.815,212.524S86.384,317.613,49.838,281.066\n        c-72.033-72.024-55.578-167.618-15.863-209.24c29.581-31.002,65.165-54.44,108.871-54.44\n        C194.751,17.386,235.685,55.407,255.22,105.177\"/>\n      <path style={{fill:'#B21606'}} d=\"M429.848,94.824c26.006,21.865,39.538,63.103,31.858,97.341c-0.675,2.978-1.395,6.021-2.154,9.091\n        c-1.17,4.733,1.718,9.518,6.45,10.689c4.733,1.17,9.518-1.718,10.689-6.45c0.787-3.183,1.534-6.339,2.238-9.446\n        c9.114-40.635-6.622-88.592-37.718-114.736c-16.942-14.251-37.574-20.273-68.03-20.273c-4.875,0-8.828,3.952-8.828,8.828\n        s3.952,8.828,8.828,8.828C399.8,78.694,416.45,83.554,429.848,94.824z\"/>\n    </g>\n  </svg>\n);\n\nexport const Diamond = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <polygon style={{fill:'#D71E00'}} points=\"256,0 45.714,256 256,512 466.286,256 \t\"/>\n      <path style={{fill:'#B21606'}} d=\"M248.872,448.656c-3.162,3.937-2.533,9.692,1.404,12.853c3.937,3.162,9.692,2.533,12.853-1.404\n        l64-79.698c3.162-3.937,2.533-9.692-1.404-12.853c-3.937-3.162-9.692-2.533-12.853,1.404L248.872,448.656z\"/>\n    </g>\n  </svg>\n);\n\nexport const Club = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 511.998 511.998\" style={{enableBackground: 'new 0 0 511.998 511.998'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path d=\"M419.381,199.229c-26.651-12.378-51.541-12.674-74.177-7.186c18.441-21.827,29.058-50.472,27.396-81.642\n        C369.438,51,320.017,2.36,260.58,0.087c-66.578-2.542-121.353,50.67-121.353,116.682c0,28.699,10.393,54.937,27.567,75.273\n        c-22.636-5.488-47.526-5.192-74.177,7.186c-41.023,19.061-69.569,59.401-70.153,104.628\n        c-0.835,65.204,51.757,118.317,116.763,118.317c31.412,0,59.859-12.459,80.842-32.633v34.403c0,16.501-4.303,32.714-12.495,47.041\n        l-15.755,27.576c-3.422,5.991,0.907,13.438,7.797,13.438h112.766c6.899,0,11.219-7.446,7.797-13.438l-15.755-27.576\n        c-8.183-14.327-12.495-30.54-12.495-47.041V389.54c20.992,20.175,49.439,32.633,80.842,32.633\n        c65.006,0,117.607-53.113,116.763-118.317C488.95,258.629,460.403,218.289,419.381,199.229\"/>\n      <path style={{fill:'#2A2D33'}} d=\"M423.915,355.877c-13.621,13.805-31.752,21.385-51.142,21.385c-4.961,0-8.982,4.022-8.982,8.982\n        c0,4.961,4.022,8.982,8.982,8.982c24.196,0,46.934-9.506,63.927-26.729c16.991-17.2,26.197-40.066,25.888-64.288\n        c-0.063-4.96-4.136-8.93-9.096-8.867c-4.96,0.063-8.93,4.136-8.867,9.096C444.872,323.859,437.529,342.095,423.915,355.877z\"/>\n    </g>\n  </svg>  \n);\n\nexport const ChangePlayers = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <g>\n        <path d=\"M170.256,403.875c10.65-12.234,17.122-28.196,17.122-45.652c0-38.393-31.234-69.627-69.627-69.627\n          c-14.451,0-27.886,4.428-39.024,11.994c-1.632-10.049-2.463-20.254-2.463-30.537c0-49.249,18.842-95.868,53.054-131.273\n          c25.408-26.294,57.27-44.329,92.103-52.568l-23.142,27.868l23.133,19.21l59.366-71.49L201.539,17.43l-14.69,26.236l24.912,13.95\n          c-39.327,9.833-75.273,30.476-104.065,60.27c-39.659,41.041-61.5,95.081-61.5,152.168c0,20.2,2.752,40.155,8.17,59.414\n          c-3.996,8.772-6.241,18.504-6.241,28.756c0,17.491,6.497,33.483,17.185,45.726c-37.719,14.016-64.668,50.375-64.668,92.914v15.034\n          h234.473v-15.034C235.117,454.25,208.078,417.838,170.256,403.875z M117.752,318.665c21.813,0,39.558,17.746,39.558,39.558\n          s-17.746,39.558-39.559,39.558c-21.812,0-39.557-17.746-39.557-39.558S95.94,318.665,117.752,318.665z M32.362,481.828\n          c6.879-30.85,34.471-53.977,67.363-53.977h36.311c32.892,0,60.484,23.128,67.363,53.977H32.362z\"/>\n      </g>\n    </g>\n    <g>\n      <g>\n        <path d=\"M511.357,208.266c0-42.611-27.04-79.025-64.86-92.988c10.65-12.233,17.122-28.196,17.122-45.652\n          C463.619,31.234,432.385,0,393.992,0c-38.393,0-69.627,31.234-69.627,69.626c0,17.491,6.497,33.483,17.186,45.726\n          c-37.719,14.016-64.667,50.375-64.667,92.915v15.034h171.669c3.701,14.892,5.576,30.234,5.576,45.751\n          c0,45.405-16.341,89.291-46.014,123.576c-21.289,24.598-48.406,43.143-78.51,54.073l19.818-31.008l-25.335-16.193l-50.044,78.3\n          L358.173,512l11.325-27.855l-25.967-10.556c33.429-12.822,63.523-33.788,87.321-61.284\n          c34.401-39.748,53.347-90.623,53.347-143.254c0-15.46-1.611-30.777-4.793-45.751h31.952V208.266z M393.992,30.069\n          c21.813,0,39.558,17.746,39.558,39.557c0,21.813-17.746,39.558-39.558,39.558s-39.558-17.746-39.558-39.558\n          C354.434,47.814,372.179,30.069,393.992,30.069z M308.603,193.232c6.879-30.851,34.471-53.978,67.363-53.978h36.311\n          c32.892,0,60.484,23.128,67.363,53.978H308.603z\"/>\n      </g>\n    </g>\n    <g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n  </svg>\n);\n","import React from 'react';\nimport { Row, Col } from 'antd';\nimport { TrophyTwoTone } from '@ant-design/icons';\nimport { cardsRenderer } from './renderers';\n\nconst MobileTable = (props) => {\n  const {\n    dataSource: rounds,\n    players,\n    currentRound,\n    leagueScores,\n    gameID,\n  } = props;\n\n  // const onDragEnd = (fromIndex, toIndex) => {\n  //   console.log(\"onDragEnd\");\n  // };\n\n  return (\n    <div className=\"game-table\">\n      <h3 className=\"game-header\">Game {gameID}</h3>\n      <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n        <Col span={4}>\n          <div className=\"table-cell\">round</div>\n        </Col>\n        {getTableHeaders(players)}\n      </Row>\n\n      {rounds.map((round, i) => (\n        <Row\n          gutter={1}\n          className={`table-row ${\n            currentRound - 1 === i ? 'current-round' : ''\n          } ${round.fell ? 'round-fell' : ''}`}\n          key={i}\n        >\n          <Col span={4}>\n            <div className=\"table-cell\">\n              {i + 1}{' '}\n              {round.factor > 1 && (\n                <span className=\"round-factor\">{`x${round.factor}`}</span>\n              )}\n            </div>\n          </Col>\n          {getRoundCol(players, round)}\n        </Row>\n      ))}\n\n      <Row gutter={1} className={`table-row`}>\n        <Col span={4}>\n          <div className=\"table-cell\">\n            <TrophyTwoTone twoToneColor=\"#52c41a\" />\n          </div>\n        </Col>\n        {getLeagueScoresCol(players, leagueScores)}\n      </Row>\n    </div>\n  );\n};\n\nexport default MobileTable;\n\n///////////////////////////\n//\n// helpers\n//\n///////////////////////////\n\nexport const getTableHeaders = (players) =>\n  players.map(({ index: playerIndex, playerName }) => (\n    <Col key={playerIndex} span={5}>\n      <div className=\"table-cell\">{playerName}</div>\n    </Col>\n  ));\n\nconst getRoundCol = (players, roundData) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div\n        className={`table-cell score-cell ${\n          roundData[`bid${playerIndex}`] !== roundData[`won${playerIndex}`]\n            ? 'fell'\n            : ''\n        } ${playerIndex === roundData.highestBidder ? 'highest-bidder' : ''}`}\n      >\n        {roundData[`aggregateScore${playerIndex}`]}\n        {playerIndex === roundData.highestBidder && (\n          <span className=\"trump\">\n            {cardsRenderer(roundData.trump).children}\n          </span>\n        )}\n      </div>\n    </Col>\n  ));\n\nconst getLeagueScoresCol = (players, leagueScores) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div className={`table-cell`}>\n        {leagueScores[`leagueScore${playerIndex}`] !== ''\n          ? leagueScores[`leagueScore${playerIndex}`]\n          : '-'}\n      </div>\n    </Col>\n  ));\n","import React from \"react\";\nimport Icon from \"@ant-design/icons\";\nimport { Spade, Hart, Diamond, Club } from \"../cards/Icons\";\nimport { CARDS } from \"../../constants/cards\";\n\nexport const cardsRenderer = text => {\n  let card;\n  switch (text) {\n    case CARDS.SPADE:\n      card = <Icon component={Spade} />;\n      break;\n    case CARDS.HART:\n      card = <Icon component={Hart} />;\n      break;\n    case CARDS.DIAMOND:\n      card = <Icon component={Diamond} />;\n      break;\n    case CARDS.CLUB:\n      card = <Icon component={Club} />;\n      break;\n    case CARDS.NT:\n      card = \"NT\";\n      break;\n  }\n  return {\n    children: card\n  };\n};\n","import React, { Component } from 'react';\nimport { Button, Modal } from 'antd';\nimport Icon, { QuestionOutlined } from '@ant-design/icons';\nimport { Spade, Hart, Diamond, Club } from './Icons';\nimport './Modal.scss';\n\nclass CardsModal extends Component {\n  state = { visible: false };\n\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleCancel = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  onTrumpSelect(value) {\n    this.props.onChange(value);\n    this.setState({\n      visible: false,\n    });\n  }\n\n  trumpIconMap = {\n    SPADE: Spade,\n    HART: Hart,\n    DIAMOND: Diamond,\n    CLUB: Club,\n    NT: 'NT',\n  };\n\n  render() {\n    const { trump, disabled } = this.props;\n\n    return (\n      <div className=\"cards-modal\">\n        trump\n        <Button\n          ghost\n          className=\"card-btn\"\n          onClick={this.showModal}\n          disabled={disabled}\n        >\n          {trump ? (\n            trump === 'NT' ? (\n              'NT'\n            ) : (\n              <Icon component={this.trumpIconMap[trump]} />\n            )\n          ) : (\n            <QuestionOutlined />\n          )}\n        </Button>\n        <Modal\n          footer={null}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          className=\"cards-modal-dialog\"\n        >\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'SPADE')}\n          >\n            <Icon component={Spade} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'HART')}\n          >\n            <Icon component={Hart} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'DIAMOND')}\n          >\n            <Icon component={Diamond} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'CLUB')}\n          >\n            <Icon component={Club} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, 'NT')}\n          >\n            NT\n          </Button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default CardsModal;\n","import React, { Component } from 'react';\r\nimport { Button } from 'antd';\r\nimport './Pad.scss';\r\n\r\nexport default class NumbersPad extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMore: false,\r\n    };\r\n\r\n    this.toggleMore = this.toggleMore.bind(this);\r\n    this.onBtnClick = this.onBtnClick.bind(this);\r\n  }\r\n\r\n  toggleMore() {\r\n    this.setState({\r\n      showMore: !this.state.showMore,\r\n    });\r\n  }\r\n\r\n  onBtnClick(e) {\r\n    this.props.onSelect(e.target.textContent * 1);\r\n  }\r\n\r\n  render() {\r\n    const { disabled } = this.props;\r\n    const btnSize = 'default';\r\n    const { showMore } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"dial-pad\">\r\n          {!showMore ? this.getButtons(0, 10) : this.getButtons(10, 4)}\r\n          <Button\r\n            size={btnSize}\r\n            onClick={this.toggleMore}\r\n            className=\"more-less-btn\"\r\n            disabled={disabled}\r\n          >\r\n            {!showMore ? 'More...' : 'Less...'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getButtons = (baseNum, amount) => {\r\n    const { disabled, disabledNumber } = this.props;\r\n    const btnSize = 'default';\r\n\r\n    return Array(amount)\r\n      .fill(baseNum)\r\n      .map((num, i) => (\r\n        <Button\r\n          key={i}\r\n          onClick={this.onBtnClick}\r\n          size={btnSize}\r\n          disabled={disabled || disabledNumber === i + num}\r\n        >\r\n          {i + num}\r\n        </Button>\r\n      ));\r\n  };\r\n}\r\n","import React, { Component } from 'react';\n\nexport const CSS_TRANSITIONS = {\n  FADE_IN: 'fade-in',\n  SLIDE_UP: 'slide-up'\n}\n\nexport default class Css extends Component {\n  componentDidMount() {\n    const type = this.props.type;\n    this.div.classList.add(type);\n    setTimeout(() => this.div.classList.remove(type), 400);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.children !== this.props.children) {\n      const type = this.props.type;\n      this.div.classList.add(type);\n      setTimeout(() => this.div.classList.remove(type), 400);\n    }\n  }\n  render() {\n    return (\n      <div\n        className={''}\n        ref={(el) => this.div = el}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport './Pad.css';\nimport Css, { CSS_TRANSITIONS } from '../transition/Css';\n\nconst PlayerPad = (props) => {\n  const { name, bid, won, score } = props;\n\n  return (\n    <div className=\"player-pad\">\n      <div className=\"pad-name\">\n        {name}&nbsp;\n        {score !== undefined &&\n          <span className=\"pad-score\">\n            [<Css type={CSS_TRANSITIONS.SLIDE_UP}>{score}</Css>]\n        </span>}\n      </div>\n\n      <div className=\"pad-bid-won\">\n        Bid: {typeof bid === 'number' ? bid : ' '} Won: {won}\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerPad;","import React from 'react';\nimport './TwoWayArrow.css';\n\nexport const TWO_WAY_ARROW_DIRECTION = {\n  TOP: 'top',\n  BOTTOM: 'bottom'\n};\n\n// TODO: add option for horizontal arrow \n// https://codepen.io/hakimel/pen/gfIsk \n// https://codepen.io/Sloebel/pen/MdLKdY\n\nconst TwoWayArrow = (props) => {\n  return (\n    <div className={`arrow-indicator ${props.direction || ''}`}>\n      <span><i></i><i></i></span>\n      <i></i>\n      <span><i></i><i></i></span>\n    </div>\n  )\n};\n\nexport default TwoWayArrow;","import React, { useCallback } from 'react';\r\nimport './PlayCard.scss';\r\n\r\nexport interface IPlayCardProps {\r\n  card: string;\r\n  preSelected: boolean;\r\n  thrown: boolean;\r\n  disabled: boolean;\r\n  onCardClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\r\n}\r\n\r\nconst PlayCard = (props: IPlayCardProps) => {\r\n  const { card, preSelected, thrown, onCardClick, disabled } = props;\r\n\r\n  const clickHandler = useCallback(\r\n    (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      if (!disabled) {\r\n        onCardClick(event);\r\n      }\r\n    },\r\n    [onCardClick, disabled]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={`play-card ${preSelected ? 'pre-selected' : ''} ${\r\n        thrown ? 'thrown' : ''\r\n      } ${disabled ? 'disabled' : ''}`}\r\n      onClick={clickHandler}\r\n    >\r\n      <img src={require(`../../images/playCards/${card}.svg`)} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayCard;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './ThrownCard.scss';\r\n\r\nexport type ThrownCardType = 'top' | 'left' | 'right' | 'bottom';\r\n\r\nexport interface IThrownCardProps {\r\n  card?: string;\r\n  thrownType: ThrownCardType;\r\n  from?: { top: number; left: number };\r\n  to: { top: number; left: number };\r\n  hasWinner?: boolean;\r\n}\r\n\r\nconst ThrownCard = (props: IThrownCardProps) => {\r\n  const { card, thrownType, from, to, hasWinner } = props;\r\n  const [style, setStyle] = useState(from ? from : to);\r\n\r\n  useEffect(() => {\r\n    setStyle(to);\r\n  }, [to]);\r\n\r\n  return (\r\n    <div\r\n      className={`thrown-card ${thrownType} ${hasWinner ? 'has-winner' : ''}`}\r\n      style={{ ...style }}\r\n    >\r\n      {card && (\r\n        <img\r\n          src={require(`../../images/playCards/${card}.svg`)}\r\n          style={{ width: '90px' }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThrownCard;\r\n","import React, { Component } from 'react';\nimport { Radio, Switch, Badge, Row, Col, Modal, message, Button } from 'antd';\nimport Icon from '@ant-design/icons';\nimport CardsModal from '../../common/cards/Modal';\nimport { ChangePlayers } from '../../common/cards/Icons';\nimport NumbersPad from '../../common/numbers/Pad';\nimport PlayerPad from '../../common/player/Pad';\nimport { INPUT_MODE } from '../../constants/states';\nimport './GamePad.scss';\nimport Dialog from '../../dialogs/Dialog';\nimport { Dialogs } from '../../constants/dialogs';\nimport { PlayersContext } from '../GameTab';\nimport Css, { CSS_TRANSITIONS } from '../../common/transition/Css';\nimport TwoWayArrow, {\n  TWO_WAY_ARROW_DIRECTION,\n} from '../../common/twoWayArrow/TwoWayArrow';\nimport PlayCard from '../PlayCard/PlayCard';\nimport ThrownCard from '../ThrownCard/ThrownCard';\nimport {\n  nextPlayerIndex,\n  uniqueHand,\n  getFromToCalc,\n  getToWinnerCalc,\n} from '../../utils/game-utils';\n\nconst confirm = Modal.confirm;\nmessage.config({\n  top: 100,\n  maxCount: 3,\n});\n\nclass GamePad extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedPlayer: undefined,\n      reorderPlayersDialogVisible: false,\n      preSelectedCard: undefined,\n      thrownCard: undefined,\n      thrownCards: [],\n      handCardType: undefined,\n    };\n\n    this.handleSwitchMode = this.handleSwitchMode.bind(this);\n    this.handleCardsPadChange = this.handleCardsPadChange.bind(this);\n    this.handleNumberSelect = this.handleNumberSelect.bind(this);\n    this.setSelectedPlayer = this.setSelectedPlayer.bind(this);\n    this.showChangeHighestBidderConfirm = this.showChangeHighestBidderConfirm.bind(\n      this\n    );\n    this.showChangePlayerDialog = this.showChangePlayerDialog.bind(this);\n    this.handleReorderPlayersAfterClose = this.handleReorderPlayersAfterClose.bind(\n      this\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.gameMode === 'remote') {\n      const { devicePlayerIndex, ownCardsState } = this.props;\n      const currentRoundData = this.getRoundData();\n      const { handsState, currentHand, inputMode } = currentRoundData;\n\n      const {\n        allRounds: prevAllRounds,\n        currentRound: prevCurrentRound,\n      } = prevProps;\n      const prevCurrentRoundData =\n        prevAllRounds.length && prevAllRounds[prevCurrentRound - 1];\n\n      if (\n        prevCurrentRoundData.inputMode !== inputMode &&\n        inputMode === INPUT_MODE.WON\n      ) {\n        this.setState({\n          selectedPlayer: currentRoundData.highestBidder,\n        });\n      }\n\n      const prevHandsState = prevCurrentRoundData.handsState;\n      if (prevHandsState !== handsState) {\n        const stateToUpdate = {};\n        const thrown =\n          handsState &&\n          handsState[currentHand] &&\n          (handsState[currentHand]['thrownCards'] || []).find(\n            (thrown) => thrown.player === devicePlayerIndex\n          );\n\n        if (thrown && thrown.card && (ownCardsState || []).length > 1) {\n          stateToUpdate.thrownCard = thrown.card;\n        } else {\n          stateToUpdate.thrownCard = undefined;\n        }\n        console.log(stateToUpdate.thrownCard);\n        if (handsState) {\n          const thrownCards = handsState[currentHand]['thrownCards']\n            ? uniqueHand([\n                ...this.state.thrownCards,\n                ...handsState[currentHand]['thrownCards'],\n              ])\n            : [];\n\n          stateToUpdate.thrownCards = thrownCards;\n          stateToUpdate.selectedPlayer = handsState[currentHand]['turnOf'];\n          stateToUpdate.handCardType =\n            thrownCards[0] && thrownCards[0].card.split('-')[1];\n        } else {\n          stateToUpdate.thrownCards = [];\n          stateToUpdate.selectedPlayer = currentRoundData.highestBidder;\n          stateToUpdate.handCardType = undefined;\n        }\n\n        this.setState(stateToUpdate);\n      }\n    }\n  }\n\n  handleSwitchMode(checked) {\n    const { onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { trump, segment, handsState } = roundData;\n\n    if (segment === 0) {\n      return message.warning('Total Bids are 13?!?!');\n    }\n\n    if (this.state.thrownCard || handsState) {\n      return message.warning('Can`t change bids after a card was thrown');\n    }\n\n    const everyoneBid = this.isAllBids(roundData);\n\n    if (trump && everyoneBid) {\n      this.setState({\n        selectedPlayer: undefined,\n      });\n\n      onChange({\n        ...roundData,\n        inputMode: checked ? INPUT_MODE.WON : INPUT_MODE.BID,\n      });\n    } else {\n      message.warning('Bids are not completed');\n    }\n  }\n\n  setSelectedPlayer(e) {\n    const { gameMode } = this.props;\n    const roundData = this.getRoundData();\n\n    if (gameMode === 'remote' && roundData.inputMode === INPUT_MODE.WON) {\n      return;\n    }\n\n    if (e.target.type === 'radio') {\n      this.setState({\n        selectedPlayer: e.target.value,\n      });\n    }\n  }\n\n  handleCardsPadChange(trump) {\n    const { onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode } = roundData;\n\n    if (inputMode !== INPUT_MODE.WON) {\n      onChange({ ...roundData, trump });\n    }\n  }\n\n  handleNumberSelect(num) {\n    const { players, currentRound, onChange } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode, highestBidder } = roundData;\n    const { selectedPlayer } = this.state;\n    const mode = inputMode === INPUT_MODE.BID ? 'bid' : 'won';\n    const prop = mode + selectedPlayer;\n\n    const newRoundData = {};\n\n    if (inputMode === INPUT_MODE.BID) {\n      if (currentRound === 13) {\n        if (\n          (num >= 5 && !roundData[`bid${highestBidder}`]) ||\n          roundData[`bid${highestBidder}`] < num\n        ) {\n          newRoundData.highestBidder = selectedPlayer;\n        }\n      } else {\n        const nextPlayer = this.getNextPlayer(selectedPlayer, players);\n\n        if (\n          roundData[`bid${nextPlayer}`] === '' ||\n          nextPlayer === highestBidder\n        ) {\n          // validate first bid is more then 5\n          if (\n            (!highestBidder && highestBidder !== 0) ||\n            highestBidder === selectedPlayer\n          ) {\n            if (num < 5) {\n              return message.warning('First Bid should be more then 5');\n            } else {\n              newRoundData.highestBidder = selectedPlayer;\n            }\n          } else if (num >= 5) {\n            this.showChangeHighestBidderConfirm(\n              onChange,\n              roundData,\n              prop,\n              num,\n              selectedPlayer,\n              players\n            );\n          } else if (\n            !Number.isInteger(\n              roundData[`bid${this.getBeforePlayer(selectedPlayer, players)}`]\n            )\n          ) {\n            return message.warning('The Bids are not in the right order!!');\n          }\n        } else {\n          return message.warning(\n            'The Next Player already Bid, Can not change bid'\n          );\n        }\n      }\n    }\n\n    newRoundData[prop] = num;\n    onChange({ ...roundData, ...newRoundData }, selectedPlayer);\n  }\n\n  calculateDisableNum() {\n    const { players } = this.props;\n    const roundData = this.getRoundData();\n    const { highestBidder, inputMode } = roundData;\n    const { selectedPlayer } = this.state;\n\n    if (typeof selectedPlayer !== 'number') return undefined;\n\n    if (inputMode !== INPUT_MODE.BID) return undefined;\n\n    if (this.getNextPlayer(selectedPlayer, players) !== highestBidder)\n      return undefined;\n\n    // get the list of players bided before\n    const beforePlayers = this.getBeforePlayers(selectedPlayer, players);\n\n    // loop through 3 players before selectedPlayer\n    // if all bid already return segment else return undefined\n\n    let bids = 0;\n\n    for (const player of beforePlayers) {\n      const aBid = roundData[`bid${player}`];\n      if (aBid === null) return undefined;\n\n      bids += aBid;\n    }\n\n    return 13 - bids;\n  }\n\n  showChangeHighestBidderConfirm(\n    onChange,\n    roundData,\n    prop,\n    num,\n    selectedPlayer,\n    players\n  ) {\n    const getBeforePlayer = this.getBeforePlayer;\n\n    confirm({\n      title: 'Change Highest Bidder?',\n      content: '(will reset the rest of the bids)',\n      okType: 'danger',\n      onOk() {\n        onChange(\n          {\n            ...roundData,\n            bid0: null,\n            bid1: null,\n            bid2: null,\n            bid3: null,\n            [prop]: num,\n            highestBidder: selectedPlayer,\n          },\n          selectedPlayer\n        );\n      },\n      onCancel() {\n        if (!roundData[`bid${getBeforePlayer(selectedPlayer, players)}`]) {\n          message.warning('The Bids are not in the right order!!');\n          onChange({ ...roundData }, selectedPlayer);\n        } else {\n          onChange({ ...roundData, [prop]: num }, selectedPlayer);\n        }\n      },\n    });\n  }\n\n  getNextPlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    const nextIndex = index + 1 > 3 ? index + 1 - 4 : index + 1;\n\n    return players[nextIndex].index;\n  };\n\n  getBeforePlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    const beforeIndex = index - 1 > -1 ? index - 1 : index - 1 + 4;\n\n    return players[beforeIndex].index;\n  };\n\n  getBeforePlayers = (selectedPlayer, players) => {\n    const index = players.findIndex(\n      (player) => player.index === selectedPlayer\n    );\n    return players\n      .filter((player) => index !== player.index)\n      .map((player) => player.index);\n  };\n\n  // getAfterPlayers = (selectedPlayer) => [1, 2, 3].map(afterPlayer => selectedPlayer + afterPlayer > 4 ? selectedPlayer + afterPlayer - 4 : selectedPlayer + afterPlayer);\n\n  getPlayerAggregateScore = (roundsData, roundIndex, playerIndex) => {\n    const roundData = roundsData[roundIndex];\n\n    if (!roundData) {\n      return 0;\n    }\n\n    const aggregateScore = roundData[`aggregateScore${playerIndex}`];\n    // if round.fell == true, look for round before\n    if (typeof aggregateScore === 'number' && !roundData.fell) {\n      return aggregateScore;\n    }\n\n    return this.getPlayerAggregateScore(\n      roundsData,\n      roundIndex - 1,\n      playerIndex\n    );\n  };\n\n  render() {\n    const { devicePlayerIndex, gameMode } = this.props;\n    const currentRoundData = this.getRoundData();\n    const {\n      round,\n      check,\n      trump,\n      segment,\n      inputMode,\n      fell,\n      factor,\n    } = currentRoundData;\n    const { selectedPlayer, reorderPlayersDialogVisible } = this.state;\n    const isAllBids = this.isAllBids(currentRoundData);\n    const playersButtons = this.getPlayersButtons();\n\n    return (\n      <Radio.Group\n        buttonStyle=\"solid\"\n        className={`game-pad-container ${fell ? 'round-fell' : ''}`}\n        onChange={this.setSelectedPlayer}\n        value={selectedPlayer}\n      >\n        <h3>Round: {round}</h3>\n        <Row type=\"flex\" justify=\"space-around\">\n          <Col>\n            <Switch\n              onChange={this.handleSwitchMode}\n              checkedChildren=\" Won \"\n              unCheckedChildren=\" Bid \"\n              checked={inputMode === INPUT_MODE.WON}\n            />\n            <div className=\"segment\">\n              Bids:{' '}\n              <Css type={CSS_TRANSITIONS.FADE_IN}>\n                {!isAllBids ? `${segment && 13 + segment}` : segment}\n              </Css>\n              <TwoWayArrow\n                direction={\n                  isAllBids &&\n                  (segment > 0\n                    ? TWO_WAY_ARROW_DIRECTION.TOP\n                    : TWO_WAY_ARROW_DIRECTION.BOTTOM)\n                }\n              />\n            </div>\n            <div>Check: {check ? 'yes' : 'no'}</div>\n            <Css type={CSS_TRANSITIONS.FADE_IN}>\n              {fell ? <div className=\"fell-indicator\">round fell</div> : ''}\n            </Css>\n            {!fell && factor > 1 && (\n              <div className=\"factor-indicator\">{`x${factor}`}</div>\n            )}\n          </Col>\n          <Col className=\"item item2\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex + 1)]}\n          </Col>\n          <Col>\n            <CardsModal\n              trump={trump}\n              onChange={this.handleCardsPadChange}\n              disabled={inputMode === INPUT_MODE.WON}\n            />\n          </Col>\n        </Row>\n\n        <div\n          className=\"thrown-cards-marker\"\n          ref={(el) => (this.cardsMarkerRef = el)}\n        ></div>\n\n        <Row type=\"flex\" justify=\"space-around\">\n          <Col className=\"item item4\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex)]}\n          </Col>\n          <Col style={{ zIndex: 1 }}>\n            {gameMode === 'remote' && inputMode === INPUT_MODE.WON ? (\n              <div className=\"number-pad-placement\"></div>\n            ) : (\n              <NumbersPad\n                disabledNumber={this.calculateDisableNum()}\n                onSelect={this.handleNumberSelect}\n                disabled={selectedPlayer === undefined}\n              />\n            )}\n          </Col>\n          <Col className=\"item item6\">\n            {playersButtons[nextPlayerIndex(devicePlayerIndex + 2)]}\n          </Col>\n        </Row>\n        <Row type=\"flex\" justify=\"center\" style={{ position: 'relative' }}>\n          <Col className=\"item item8\">{playersButtons[devicePlayerIndex]}</Col>\n          {gameMode !== 'remote' &&\n            round === 1 &&\n            inputMode === INPUT_MODE.BID && (\n              <div>\n                <Button\n                  type=\"dashed\"\n                  shape=\"circle\"\n                  className=\"change-players-btn\"\n                  onClick={this.showChangePlayerDialog}\n                >\n                  <Icon component={ChangePlayers} />\n                </Button>\n                {reorderPlayersDialogVisible && (\n                  <PlayersContext.Consumer>\n                    {({ players, reorderPlayers }) => (\n                      <Dialog\n                        dialog={Dialogs.REORDER_PLAYERS}\n                        dialogProps={{\n                          onOk: reorderPlayers,\n                          onAfterClose: this.handleReorderPlayersAfterClose,\n                          visible: reorderPlayersDialogVisible,\n                          players,\n                        }}\n                      />\n                    )}\n                  </PlayersContext.Consumer>\n                )}\n              </div>\n            )}\n        </Row>\n        {gameMode === 'remote' && this.getThrownCardsPlacement()}\n        {this.getCards()}\n      </Radio.Group>\n    );\n  }\n\n  getPlayersButtons = () => {\n    const { allRounds, currentRound, players } = this.props;\n    const currentRoundData = allRounds.length && allRounds[currentRound - 1];\n    const highestBidder = currentRoundData.highestBidder;\n\n    return players.map(({ index: playerIndex, playerName }, i) => {\n      return (\n        <Badge key={playerIndex} dot={highestBidder === playerIndex}>\n          <Radio.Button value={playerIndex}>\n            <PlayerPad\n              name={playerName}\n              bid={currentRoundData[`bid${playerIndex}`]}\n              won={currentRoundData[`won${playerIndex}`]}\n              score={this.getPlayerAggregateScore(\n                allRounds,\n                currentRound - 1,\n                playerIndex\n              )}\n            />\n          </Radio.Button>\n        </Badge>\n      );\n    });\n  };\n\n  showChangePlayerDialog() {\n    this.setState({\n      reorderPlayersDialogVisible: true,\n    });\n  }\n\n  handleReorderPlayersAfterClose() {\n    this.setState({\n      reorderPlayersDialogVisible: false,\n    });\n  }\n\n  getCards() {\n    const { ownCardsState, devicePlayerIndex } = this.props;\n    const {\n      preSelectedCard,\n      thrownCard,\n      handCardType,\n      selectedPlayer,\n    } = this.state;\n\n    if (ownCardsState) {\n      const hasCardType = Object.values(ownCardsState).some(\n        (card) => card.split('-')[1] === handCardType\n      );\n      const isDevicePlayer = devicePlayerIndex === selectedPlayer;\n\n      return (\n        <div className=\"cards-container\">\n          {Object.values(ownCardsState).map((card) => (\n            <PlayCard\n              key={card}\n              card={card}\n              preSelected={preSelectedCard === card}\n              thrown={thrownCard === card}\n              onCardClick={this.handleCardClick(card)}\n              disabled={\n                isDevicePlayer &&\n                hasCardType &&\n                card.split('-')[1] !== handCardType\n              }\n            />\n          ))}\n        </div>\n      );\n    }\n\n    return '';\n  }\n\n  // TODO: memoize it\n  getThrownCardsPlacement() {\n    if (!this.cardsMarkerRef) {\n      return '';\n    }\n    const currentRoundData = this.getRoundData();\n    const { handsState, currentHand } = currentRoundData;\n    const handWinner = handsState && handsState[currentHand].handWinner;\n    const { thrownCards } = this.state;\n    const { devicePlayerIndex } = this.props;\n    const fn = nextPlayerIndex;\n\n    const playerOnPadMap = {\n      [devicePlayerIndex]: 'bottom',\n      [fn(devicePlayerIndex)]: 'left',\n      [fn(devicePlayerIndex + 1)]: 'top',\n      [fn(devicePlayerIndex + 2)]: 'right',\n    };\n\n    const toWinner =\n      handWinner !== undefined &&\n      this.getFromTo(playerOnPadMap[handWinner], true);\n\n    return (\n      <div className=\"hand-cards-container\">\n        {thrownCards.map((thrown) => {\n          const { from, to } =\n            toWinner || this.getFromTo(playerOnPadMap[thrown.player]);\n\n          return (\n            <ThrownCard\n              key={thrown.player}\n              thrownType={playerOnPadMap[thrown.player]}\n              card={thrown.card}\n              from={from}\n              to={to}\n              hasWinner={handWinner !== undefined}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  handleCardClick = (card) => (e) => {\n    const { preSelectedCard, selectedPlayer } = this.state;\n    const {\n      currentRound,\n      devicePlayerIndex,\n      onCardThrown,\n      ownCardsState,\n    } = this.props;\n    const roundData = this.getRoundData();\n    const { inputMode } = roundData;\n\n    if (inputMode === INPUT_MODE.WON && selectedPlayer === devicePlayerIndex) {\n      if (preSelectedCard === card) {\n        // throw card\n\n        // set the initial position of own thrown card\n        const top = e.currentTarget.offsetParent.offsetTop - 15;\n        const left = e.currentTarget.offsetLeft;\n        this.ownThrownCardInitPos = { top, left };\n\n        this.setState({\n          thrownCards: [\n            ...this.state.thrownCards,\n            {\n              player: selectedPlayer,\n              card,\n            },\n          ],\n        });\n\n        onCardThrown(card, selectedPlayer, currentRound, roundData.currentHand);\n\n        this.setState({\n          thrownCard: card,\n          // preSelectedCard: undefined,\n        });\n      } else {\n        this.setState({\n          preSelectedCard: card,\n        });\n      }\n    }\n  };\n\n  // calculate end position by thrownType\n  getFromTo(type, toWinner) {\n    const markerTop = this.cardsMarkerRef && this.cardsMarkerRef.offsetTop;\n    const markerWidth = this.cardsMarkerRef && this.cardsMarkerRef.offsetWidth;\n\n    if (toWinner) {\n      return getToWinnerCalc(type, markerTop, markerWidth);\n    }\n\n    return getFromToCalc(\n      type,\n      markerTop,\n      markerWidth,\n      this.ownThrownCardInitPos\n    );\n  }\n\n  // TODO: memoize it\n  isAllBids = (roundData) =>\n    Array(4)\n      .fill(1)\n      .every((_, i) => typeof roundData[`bid${i}`] === 'number');\n\n  getRoundData() {\n    const { allRounds, currentRound } = this.props;\n    return allRounds.length && allRounds[currentRound - 1];\n  }\n}\n\nexport default GamePad;\n","import React, { Component } from 'react';\nimport { Button } from 'antd';\nimport { RightOutlined, LeftOutlined } from '@ant-design/icons';\nimport MobileTable from '../common/table/MobileTable';\nimport GamePad from './GamePad/GamePad';\nimport { hasTouch, addListener } from '../utils/Utils';\n\nexport default class GameMobileView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.carouselEl = React.createRef();\n    this.carouselSwipedRight = this.carouselSwipedRight.bind(this);\n    this.carouselSwipedLeft = this.carouselSwipedLeft.bind(this);\n  }\n\n  componentDidMount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft = addListener(\n        this.carouselEl,\n        'swiped-left',\n        this.carouselSwipedLeft\n      );\n      this.unListenSwipedRight = addListener(\n        this.carouselEl,\n        'swiped-right',\n        this.carouselSwipedRight\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft();\n      this.unListenSwipedRight();\n    }\n  }\n\n  carouselSwipedLeft = () => {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== 'panel') {\n      onCurrentViewChange('panel');\n    } else {\n      this.carouselEl.classList.add('bounce-left');\n      setTimeout(() => this.carouselEl.classList.remove('bounce-left'), 400);\n    }\n  };\n\n  carouselSwipedRight() {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== 'table') {\n      onCurrentViewChange('table');\n    } else {\n      this.carouselEl.classList.add('bounce-right');\n      setTimeout(() => this.carouselEl.classList.remove('bounce-right'), 400);\n    }\n  }\n\n  nextRound = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round < 13) {\n      goToRound && goToRound(round + 1);\n    }\n  };\n\n  toRoundBefore = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round !== 1) {\n      goToRound && goToRound(round - 1);\n    }\n  };\n\n  render() {\n    const {\n      gameID,\n      gameMode,\n      ownCardsState,\n      currentView,\n      rounds,\n      playersColumns,\n      currentRound,\n      handleSave,\n      leagueScores,\n      devicePlayerIndex,\n      handleCardThrown,\n    } = this.props;\n\n    return (\n      <div\n        className={`game-mobile-view ${\n          gameMode === 'remote' ? 'mode-remote' : ''\n        }`}\n      >\n        <div className=\"my-carousel\" ref={(el) => (this.carouselEl = el)}>\n          <div className={`my-carousel-slides-container ${currentView}`}>\n            <div className=\"my-carousel-slide\">\n              <MobileTable\n                dataSource={rounds}\n                leagueScores={leagueScores}\n                players={playersColumns}\n                currentRound={currentRound}\n                gameID={gameID}\n              />\n            </div>\n            <div className=\"my-carousel-slide\">\n              <GamePad\n                gameMode={gameMode}\n                ownCardsState={ownCardsState}\n                onCardThrown={handleCardThrown}\n                currentRound={currentRound}\n                allRounds={rounds}\n                players={playersColumns}\n                devicePlayerIndex={devicePlayerIndex}\n                onChange={handleSave}\n              />\n            </div>\n          </div>\n        </div>\n        {gameMode !== 'remote' ||\n          (((ownCardsState || []).length === 0 || currentView === 'table') && (\n            <div className=\"round-navigation\">\n              {currentRound !== 1 && (\n                <Button\n                  type=\"primary\"\n                  className=\"left\"\n                  ghost\n                  onClick={this.toRoundBefore}\n                >\n                  <LeftOutlined />\n                  {`Round ${currentRound - 1}`}\n                </Button>\n              )}\n\n              {currentRound !== 13 && (\n                <Button type=\"primary\" ghost onClick={this.nextRound}>\n                  {`Round ${Number(currentRound) + 1}`}\n                  <RightOutlined />\n                </Button>\n              )}\n            </div>\n          ))}\n      </div>\n    );\n  }\n}\n","export const GAME_DEFAULT_SCORES = [10, 7, 3, 1];","import { fire } from '../firebase';\r\n\r\nexport default class GameService {\r\n  // the request to set cards by player will happen only if current user is the dealer\r\n  // but if the data already exist it will not override it (by database rules)\r\n  public static setCardsToPlayers(\r\n    gameKey: string,\r\n    round: number,\r\n    cardsByPlayer: {\r\n      [key: string]: string[];\r\n    }\r\n  ) {\r\n    fire\r\n      .database()\r\n      .ref()\r\n      .child(`cardsByGame/${gameKey}/round${round}`)\r\n      .update(\r\n        {\r\n          cardsState: cardsByPlayer,\r\n        },\r\n        (error) => {\r\n          if (error) {\r\n            console.error('cards state probably already exists');\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  public static updateHandCardsState(\r\n    gameKey: string,\r\n    round: number,\r\n    cardIndex: string\r\n  ) {\r\n    const userId = fire.auth().currentUser?.uid;\r\n\r\n    if (userId) {\r\n      fire\r\n        .database()\r\n        .ref()\r\n        .child(`cardsByGame/${gameKey}/round${round}/cardsState/${userId}`)\r\n        .update({ [`${cardIndex}`]: null });\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fire } from './../firebase';\nimport { Button, message } from 'antd';\nimport { TableOutlined, BorderOuterOutlined } from '@ant-design/icons';\nimport {\n  getDevicePlayerIndex,\n  dealCards,\n  nextPlayerIndex,\n  getTotalWonBid,\n  calcIfRoundFell,\n} from '../utils/game-utils';\nimport './GameTab.scss';\nimport { GAME_STATUS } from '../constants/states';\n// import Loader from '../common/loader/Loader';\nimport GameMobileView from './GameMobileView';\nimport { GAME_DEFAULT_SCORES } from '../constants/scores';\nimport GameService from '../services/GameSrv';\nimport { CardsType } from '../constants/cards';\n\nexport const PlayersContext = React.createContext();\n\nclass GameTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      players: props.players,\n      devicePlayerIndex: null, //this.getDevicePlayerIndex(props.players),\n      columns: [], //this.initColumns(props.players),\n      currentView: 'table',\n      gameData: {\n        currentRound: 1,\n        dealer: undefined,\n        rounds: [],\n        totalScore0: 0,\n        totalScore1: 0,\n        totalScore2: 0,\n        totalScore3: 0,\n        status: '',\n      },\n      gameSummary: {\n        // leagueScore0: '',\n        // leagueScore1: '',\n        // leagueScore2: '',\n        // leagueScore3: '',\n      },\n    };\n\n    this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.setCurrentViewState = this.setCurrentViewState.bind(this);\n    // this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.handleReorderPlayers = this.handleReorderPlayers.bind(this);\n  }\n\n  fetch() {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID, gameID } = params;\n\n    const db = fire.database();\n\n    if (this.gameRef) {\n      this.gameRef.off('value');\n    }\n\n    this.leagueGamesRef = db\n      .ref(`leagueGames/_${leagueID * 1}`)\n      .orderByChild('gameID')\n      .equalTo(gameID * 1);\n\n    this.leagueGamesRef.once('value', (snapshot) => {\n      const gameData = Object.values(snapshot.val())[0];\n      const gameKey = Object.keys(snapshot.val())[0];\n      this.gameKey = gameKey;\n      this.gameRef = db.ref(`games/${gameKey}`);\n      this.gameSummaryRef = db.ref(\n        `leagueGamesSummary/_${leagueID * 1}/${gameKey}/players`\n      );\n      const { gameMode } = gameData;\n\n      const players = gameData.playersOrder\n        ? gameData.playersOrder\n        : this.props.players;\n\n      this.setState({\n        players,\n        columns: this.initColumns(players),\n        devicePlayerIndex: getDevicePlayerIndex(players),\n      });\n\n      this.gameRef.on('value', (snap) => {\n        const gameRefData = snap.val();\n\n        this.setState({\n          gameData: {\n            ...this.state.gameData,\n            gameMode,\n            ...gameRefData,\n          },\n        });\n\n        this.props.loaderStateCb(false);\n      });\n\n      this.gameSummaryRef.on('value', (snap) => {\n        this.setState({\n          gameSummary: {\n            ...snap.val(),\n          },\n        });\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameRef.off('value');\n    this.gameSummaryRef.off('value');\n    if (this.ownCardsStateRef) {\n      this.ownCardsStateRef.off('value');\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.match.params.gameID !== this.props.match.params.gameID) {\n      this.fetch();\n    }\n\n    const { gameData } = this.state;\n\n    if (\n      prevState.gameData.gameMode !== gameData.gameMode ||\n      prevState.gameData.currentRound !== gameData.currentRound\n    ) {\n      this.handleGameModeChange();\n    }\n\n    if (prevState.gameData !== gameData) {\n      const { currentRound, dealer, gameMode } = gameData;\n      const roundData = this.getRoundData(currentRound);\n\n      if (gameMode === 'remote' && roundData) {\n        const { handsState, currentHand } = roundData;\n        const currentHandState = handsState && handsState[currentHand];\n        const userId = fire.auth().currentUser?.uid;\n\n        if (\n          currentHandState &&\n          (currentHandState.thrownCards || []).length === 4 &&\n          currentHandState.status === 'ACTIVE'\n        ) {\n          setTimeout(() => {\n            if (dealer === userId) {\n              this.handleHandFinished(roundData);\n            }\n          }, 2500);\n        }\n\n        if (\n          currentHand === 13 &&\n          handsState[currentHand].status === 'FINISHED' &&\n          dealer === userId\n        ) {\n          this.calculateHandScore(roundData);\n        }\n      }\n    }\n  }\n\n  handleSave = (row, player) => {\n    const stateToUpdate = {};\n    let summaryToUpdate;\n    const newData = [...this.state.gameData.rounds];\n    const index = newData.findIndex((item) => row.round === item.round);\n\n    const item = newData[index];\n\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n\n    // reference to the new Data relevant row to update with score and segment\n    row = newData[index];\n\n    if (typeof player === 'number') {\n      // calculate score\n      this.calculatePlayerScore(row, player, newData, index, stateToUpdate);\n\n      //update O/U\n      const {\n        currentTotalBid,\n        currentTotalWon,\n        allHasWonInput,\n      } = getTotalWonBid(row);\n\n      row.segment = currentTotalBid !== null ? currentTotalBid - 13 : null;\n      row.check = allHasWonInput && currentTotalWon === 13;\n\n      // calculate if round fell - change next round factor\n      if (row.check) {\n        const didRoundFell = calcIfRoundFell(row);\n\n        if (didRoundFell) {\n          row.fell = true;\n\n          if (row.round < 12) {\n            // because metaData index is zero based row.round value is next round index\n            newData[row.round].factor = row.factor * 2;\n          } else if (row.factor > 1) {\n            newData[row.round].factor = row.factor;\n          }\n        } else if (row.fell) {\n          row.fell = false;\n          if (newData[row.round]) {\n            newData[row.round].factor =\n              row.factor > 1 ? row.factor / 2 : row.factor;\n          }\n\n          for (let i = 0; i < 4; i++) {\n            this.calculatePlayerScore(row, i, newData, index, stateToUpdate);\n          }\n        }\n\n        // calculate round summary stats\n        summaryToUpdate = this.calculateSummary(newData, index);\n\n        if (row.round === 13 && !row.fell) {\n          stateToUpdate.status = GAME_STATUS.FINISHED;\n          this.updateGameStatus(GAME_STATUS.FINISHED);\n\n          // round summary league scores\n          const {\n            totalScore0,\n            totalScore1,\n            totalScore2,\n            totalScore3,\n          } = this.state.gameData;\n          const scores = { totalScore0, totalScore1, totalScore2, totalScore3 };\n          scores[`totalScore${player}`] = stateToUpdate[`totalScore${player}`];\n          summaryToUpdate = this.calculateLeagueScores(scores, summaryToUpdate);\n        }\n\n        this.gameSummaryRef.update(this.mapToPlayersObj(summaryToUpdate));\n      }\n    }\n\n    stateToUpdate.rounds = newData;\n\n    // this.setState(stateToUpdate);\n    this.gameRef.update(stateToUpdate);\n  };\n\n  handleCardThrown = (card, player, currentRound, currentHand) => {\n    const roundData = this.getRoundData(currentRound);\n    const thrownCards =\n      (roundData &&\n        roundData.handsState &&\n        roundData.handsState[currentHand].thrownCards) ||\n      [];\n    const newThrownCards = [...thrownCards, { player, card }];\n\n    const {\n      gameData: { ownCardsState },\n    } = this.state;\n\n    this.gameRef\n      .child(`rounds/${currentRound - 1}/handsState/${currentHand}`)\n      .update({\n        status: 'ACTIVE',\n        turnOf: newThrownCards.length !== 4 ? nextPlayerIndex(player) : null,\n        thrownCards: newThrownCards,\n      })\n      .then(() => this.updateOwnCardState(card, currentRound, ownCardsState));\n  };\n\n  calculatePlayerScore = (\n    round,\n    player,\n    roundsData,\n    currentRound,\n    stateToUpdate\n  ) => {\n    let rowScore;\n\n    const bid = round[`bid${player}`];\n    const won = round[`won${player}`];\n\n    if (won !== '' && bid !== '') {\n      if (won === bid) {\n        if (won * 1 === 0) {\n          rowScore = round.segment > 0 ? 25 : 50;\n        } else {\n          rowScore = Math.pow(won, 2) + 10;\n        }\n      } else {\n        const diff = Math.abs(won - bid);\n\n        if (bid * 1 === 0) {\n          rowScore = -(round.segment > 0 ? 25 : 50) + (diff - 1) * 10;\n        } else {\n          rowScore = diff * -10;\n        }\n      }\n\n      rowScore *= round.factor;\n\n      round[`score${player}`] = rowScore;\n\n      //calculate aggregate score\n      let aggregateScore = 0;\n      for (let i = 0; i <= currentRound; i++) {\n        const round = roundsData[i];\n\n        if (typeof round[`score${player}`] === 'number' && !round.fell) {\n          aggregateScore += round[`score${player}`];\n        }\n      }\n      round[`aggregateScore${player}`] = aggregateScore;\n      stateToUpdate[`totalScore${player}`] = round[`aggregateScore${player}`];\n    }\n  };\n\n  calculateLeagueScores = (scores, summaryToUpdate) => {\n    const sortedScores = Object.keys(scores).sort(\n      (a, b) => scores[b] - scores[a]\n    );\n\n    sortedScores.forEach((scoreIndex, i) => {\n      const score = scores[scoreIndex];\n      let leagueScore = GAME_DEFAULT_SCORES[i];\n\n      // score < 0 => -1\n      if (score < 0) {\n        leagueScore--;\n      }\n\n      // score reminder from 100 == 0 => leagueScore + 1\n      if (score % 100 === 0) {\n        leagueScore++;\n      }\n\n      // score > 300 => +3\n      if (score > 300) {\n        leagueScore += 3;\n      }\n\n      // score < -100 => -3\n      if (score < -100) {\n        leagueScore -= 3;\n      }\n\n      summaryToUpdate[`${scoreIndex.slice(-1)}`].leagueScore = leagueScore;\n    });\n\n    return summaryToUpdate;\n  };\n\n  calculateSummary = (roundsData, currentRoundIndex) => {\n    const currentRound = currentRoundIndex + 1;\n    const playersSummary = {};\n\n    for (let pIndex = 0; pIndex < 4; pIndex++) {\n      playersSummary[pIndex] = {};\n      let stood = 0;\n      let totalRounds = 0;\n      let totalHBrounds = 0;\n      let stoodWhileHB = 0;\n      let stoodInOver = 0;\n      let totalOverRounds = 0;\n      let stoodInUnder = 0;\n      let totalNTrounds = 0;\n      let stoodInNT = 0;\n      let stoodWhenLastBidder = 0;\n      let totalStoodWhenLastBidder = 0;\n\n      for (let rIndex = 0; rIndex < currentRound; rIndex++) {\n        const round = roundsData[rIndex];\n        if (!round.fell) {\n          totalRounds++;\n          const highestBidder = round.highestBidder === pIndex;\n          const lastBidder =\n            !highestBidder &&\n            (pIndex + 1 > 3 ? 0 : pIndex + 1) === round.highestBidder;\n\n          if (highestBidder) {\n            totalHBrounds++;\n          } else if (lastBidder) {\n            totalStoodWhenLastBidder++;\n          }\n\n          if (round.segment > 0) {\n            totalOverRounds++;\n          }\n\n          if (round.trump === 'NT') {\n            totalNTrounds++;\n          }\n\n          if (round[`bid${pIndex}`] === round[`won${pIndex}`]) {\n            stood++;\n\n            if (highestBidder) {\n              stoodWhileHB++;\n            } else if (lastBidder) {\n              stoodWhenLastBidder++;\n            }\n\n            if (round.trump === 'NT') {\n              stoodInNT++;\n            }\n\n            round.segment > 0 ? stoodInOver++ : stoodInUnder++;\n          }\n        }\n      }\n\n      const successRate = { wins: stood, total: totalRounds };\n      const successRateHB = { wins: stoodWhileHB, total: totalHBrounds };\n      const successRateOver = { wins: stoodInOver, total: totalOverRounds };\n      const successRateUnder = {\n        wins: stoodInUnder,\n        total: totalRounds - totalOverRounds,\n      };\n      const successRateNT = { wins: stoodInNT, total: totalNTrounds };\n      const successRateLastBidder = {\n        wins: stoodWhenLastBidder,\n        total: totalStoodWhenLastBidder,\n      };\n\n      playersSummary[pIndex] = {\n        successRate: Number.isNaN(successRate) ? '' : successRate,\n        successRateHB,\n        successRateOver,\n        successRateUnder,\n        successRateNT,\n        successRateLastBidder,\n      };\n    }\n\n    return playersSummary;\n  };\n\n  mapToPlayersObj = (summaryToUpdate) => {\n    const { players, gameSummary } = this.state;\n\n    return players.reduce((obj, player, index) => {\n      obj[player.key] = {\n        ...gameSummary[player.key],\n        ...summaryToUpdate[index],\n      };\n\n      return obj;\n    }, {});\n  };\n\n  updateGameStatus = (status) => {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID } = params;\n\n    fire\n      .database()\n      .ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`)\n      .update({ status });\n  };\n\n  toggleSlide = () => {\n    const currentView = this.state.currentView === 'panel' ? 'table' : 'panel';\n    this.setCurrentViewState(currentView);\n  };\n\n  setCurrentViewState(currentView) {\n    this.setState({ currentView });\n  }\n\n  selectActiveRound(newRound) {\n    const { gameData, currentView } = this.state;\n    const { rounds, currentRound, gameMode, dealer } = gameData;\n    const userId = fire.auth().currentUser?.uid;\n\n    if (\n      Number(newRound) < Number(currentRound) ||\n      rounds[currentRound - 1].check\n    ) {\n      this.gameRef.update({\n        currentRound: Number(newRound),\n      });\n\n      if (currentView === 'table') {\n        this.toggleSlide();\n      }\n\n      if (\n        gameMode === 'remote' &&\n        dealer === userId &&\n        !rounds[newRound - 1].handsState\n      ) {\n        // deal cards\n        const { players } = this.state;\n        const cardsByPlayer = dealCards(players);\n\n        // *** if cards already exist for this round firebase will block the update\n        GameService.setCardsToPlayers(this.gameKey, newRound, cardsByPlayer);\n      }\n    } else {\n      message.warning('Current round is not completed');\n    }\n  }\n\n  handleReorderPlayers(newOrder) {\n    this.setState({\n      players: newOrder,\n      devicePlayerIndex: getDevicePlayerIndex(newOrder),\n      columns: this.initColumns(newOrder),\n    });\n\n    const { params } = this.props.match;\n    const { leagueID } = params;\n    fire\n      .database()\n      .ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`)\n      .update({ playersOrder: newOrder });\n  }\n\n  getLeagueScores = () => {\n    const players = this.state.players;\n    const { gameSummary } = this.state;\n\n    if (Object.keys(gameSummary).length === 0) {\n      return {\n        leagueScore0: '',\n        leagueScore1: '',\n        leagueScore2: '',\n        leagueScore3: '',\n      };\n    }\n\n    return players.reduce((summaryObj, player, i) => {\n      summaryObj[`leagueScore${i}`] = gameSummary[player.key].leagueScore;\n      return summaryObj;\n    }, {});\n  };\n\n  render() {\n    const {\n      columns,\n      currentView,\n      gameData,\n      players,\n      devicePlayerIndex,\n    } = this.state;\n    const { rounds, currentRound, gameMode, ownCardsState } = gameData;\n    const { match } = this.props;\n    const { params } = match;\n    const { gameID } = params;\n    const playersColumns = columns.slice(0, 4);\n\n    return (\n      <PlayersContext.Provider\n        value={{ players, reorderPlayers: this.handleReorderPlayers }}\n      >\n        {createPortal(\n          <Button\n            className=\"toggle-view-btn\"\n            type=\"link\"\n            onClick={this.toggleSlide}\n            icon={\n              currentView === 'table' ? (\n                <BorderOuterOutlined />\n              ) : (\n                <TableOutlined />\n              )\n            }\n          />,\n          document.querySelector('#app-header') || document.body\n        )}\n\n        <GameMobileView\n          gameID={gameID}\n          gameMode={gameMode}\n          currentView={currentView}\n          rounds={rounds}\n          ownCardsState={ownCardsState}\n          handleCardThrown={this.handleCardThrown}\n          // handState={}\n          playersColumns={playersColumns}\n          devicePlayerIndex={devicePlayerIndex}\n          currentRound={currentRound}\n          handleSave={this.handleSave}\n          onCurrentViewChange={this.setCurrentViewState}\n          goToRound={this.selectActiveRound}\n          leagueScores={this.getLeagueScores()}\n        />\n      </PlayersContext.Provider>\n    );\n  }\n\n  initColumns = (players) => {\n    return players.map(({ nickname }, i) => {\n      return {\n        playerName: nickname,\n        index: i,\n      };\n    });\n  };\n\n  getRoundData(roundIndex) {\n    return this.state.gameData.rounds.find(\n      (round) => round.round === roundIndex\n    );\n  }\n\n  handleGameModeChange() {\n    const { gameData, players } = this.state;\n    const { gameMode } = gameData;\n\n    if (gameMode === 'remote') {\n      const { currentRound, dealer } = gameData;\n      const userId = fire.auth().currentUser?.uid;\n\n      this.ownCardsStateRef = fire\n        .database()\n        .ref(\n          `cardsByGame/${this.gameKey}/round${currentRound}/cardsState/${userId}`\n        );\n\n      this.ownCardsStateRef.on('value', (snap) => {\n        console.log(snap.val());\n        this.setState((state) => {\n          return {\n            gameData: {\n              ...state.gameData,\n              ownCardsState: snap.val() || [],\n            },\n          };\n        });\n\n        const {\n          gameData: { currentRound },\n        } = this.state;\n        const roundData = this.getRoundData(currentRound);\n\n        // if current round === 1 and no handsState and gameMode === remote then deal cards\n        if (\n          !snap.val() &&\n          currentRound === 1 &&\n          !roundData.handsState &&\n          dealer === userId\n        ) {\n          const cardsByPlayer = dealCards(players);\n          GameService.setCardsToPlayers(\n            this.gameKey,\n            currentRound,\n            cardsByPlayer\n          );\n        }\n      });\n    } else if (gameData.ownCardsState) {\n      this.setState({\n        gameData: {\n          ...gameData,\n          ownCardsState: undefined,\n        },\n      });\n    }\n  }\n\n  handleHandFinished(roundData) {\n    const winner = this.calculateHandWinner(roundData);\n    const { round, handsState, currentHand } = roundData;\n\n    this.gameRef\n      .child(`rounds/${round - 1}`)\n      .update({\n        [`won${winner.player}`]: roundData[`won${winner.player}`]\n          ? roundData[`won${winner.player}`] + 1\n          : 1,\n        handsState: {\n          ...handsState,\n          [currentHand]: {\n            ...handsState[currentHand],\n            status: 'FINISHED',\n            handWinner: winner.player,\n          },\n          [currentHand + 1]: {\n            status: 'ACTIVE',\n            turnOf: winner.player,\n            thrownCards: [],\n          },\n        },\n      })\n      .then(() =>\n        setTimeout(\n          () => currentHand !== 13 && this.goToNextHand(roundData, winner),\n          200\n        )\n      );\n  }\n\n  goToNextHand(roundData, winner) {\n    const { round, handsState, currentHand } = roundData;\n\n    this.gameRef.child(`rounds/${round - 1}`).update({\n      // [`won${winner.player}`]: roundData[`won${winner.player}`]\n      //   ? roundData[`won${winner.player}`] + 1\n      //   : 1,\n      currentHand: currentHand + 1,\n      // handsState: {\n      //   // ...handsState,\n      //   [currentHand + 1]: {\n      //     status: 'ACTIVE',\n      //     turnOf: winner.player,\n      //     thrownCards: [],\n      //   },\n      // },\n    });\n  }\n\n  calculateHandScore(roundData) {\n    const gameData = { ...this.state.gameData };\n    const { rounds: allRounds, currentRound } = gameData;\n    const newRound = { ...roundData };\n    const gameToUpdate = {};\n\n    [0, 1, 2, 3].forEach((player) =>\n      this.calculatePlayerScore(\n        newRound,\n        player,\n        allRounds,\n        currentRound - 1,\n        gameToUpdate\n      )\n    );\n\n    // calc if round check\n    // update O/U\n    const { currentTotalWon, allHasWonInput } = getTotalWonBid(newRound);\n\n    newRound.check = allHasWonInput && currentTotalWon === 13;\n\n    // calculate if round fell - change next round factor\n    if (newRound.check) {\n      const didRoundFell = calcIfRoundFell(newRound);\n\n      if (didRoundFell) {\n        newRound.fell = true;\n\n        if (newRound.round < 12) {\n          // because metaData index is zero based row.round value is next round index\n          allRounds[newRound.round].factor = newRound.factor * 2;\n        } else if (newRound.factor > 1) {\n          allRounds[newRound.round].factor = newRound.factor;\n        }\n      } else if (newRound.fell) {\n        newRound.fell = false;\n        if (allRounds[newRound.round]) {\n          allRounds[newRound.round].factor =\n            newRound.factor > 1 ? newRound.factor / 2 : newRound.factor;\n        }\n\n        for (let i = 0; i < 4; i++) {\n          this.calculatePlayerScore(\n            newRound,\n            i,\n            allRounds,\n            currentRound - 1,\n            gameToUpdate\n          );\n        }\n      }\n\n      // calculate round summary stats\n      let summaryToUpdate = this.calculateSummary(allRounds, currentRound - 1);\n\n      if (newRound.round === 13 && !newRound.fell) {\n        gameToUpdate.status = GAME_STATUS.FINISHED;\n        this.updateGameStatus(GAME_STATUS.FINISHED);\n\n        // round summary league scores\n        const {\n          totalScore0,\n          totalScore1,\n          totalScore2,\n          totalScore3,\n        } = gameToUpdate;\n        const scores = { totalScore0, totalScore1, totalScore2, totalScore3 };\n        // scores[`totalScore${player}`] = gameToUpdate[`totalScore${player}`];\n        summaryToUpdate = this.calculateLeagueScores(scores, summaryToUpdate);\n      }\n\n      this.gameSummaryRef.update(this.mapToPlayersObj(summaryToUpdate));\n    }\n\n    allRounds.splice(currentRound - 1, 1, newRound);\n\n    gameToUpdate.rounds = allRounds;\n\n    this.gameRef.update(gameToUpdate);\n  }\n\n  // TODO: move this method to game-utils once roundData is properly typed\n  calculateHandWinner(roundData) {\n    const { trump, handsState, currentHand } = roundData;\n    const currentHandState = handsState && handsState[currentHand];\n    const { thrownCards } = currentHandState;\n\n    const trumpCards = thrownCards.filter(\n      (thrown) => thrown.card.split('-')[1] === CardsType[trump]\n    );\n\n    if (trumpCards.length) {\n      const thrownSorted = trumpCards.sort(\n        (a, b) => +b.card.split('-')[0] - +a.card.split('-')[0]\n      );\n\n      return thrownSorted[0];\n    } else {\n      const handCardType = thrownCards[0].card.split('-')[1];\n      const thrownSorted = thrownCards\n        .filter((thrown) => thrown.card.split('-')[1] === handCardType)\n        .sort((a, b) => +b.card.split('-')[0] - +a.card.split('-')[0]);\n\n      return thrownSorted[0];\n    }\n  }\n\n  updateOwnCardState(thrownCard, currentRound, ownCardsState) {\n    const cardIndex = Object.keys(ownCardsState).find(\n      (index) => ownCardsState[index] === thrownCard\n    );\n    GameService.updateHandCardsState(this.gameKey, currentRound, cardIndex);\n  }\n}\n\nexport default GameTab;\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\ninterface ILoaderProps {\r\n  className?: string;\r\n}\r\n\r\nconst Loader = (props: ILoaderProps) => (\r\n  <div className={`full-view loader ${props.className ? props.className : ''}`}>\r\n    <Spin\r\n      size=\"large\"\r\n      style={{ width: '100%', position: 'relative', top: '50%' }}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","import React, { Component } from 'react';\nimport { fire } from '../firebase';\nimport './LeagueSummary.css';\nimport { Row, Col } from 'antd';\n\nconst statsObj = {\n  successRate: 'Succes Win Rates',\n  successRateHB: 'Highest Bidding Win Rates',\n  successRateOver: 'Over Win Rate',\n  successRateUnder: 'Under Win Rate',\n  successRateNT: 'NT Win Rates',\n  successRateLastBidder: 'Last Bidder Win Rate',\n};\n\nexport default class LeagueSummary extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      players: props.league.players,\n    };\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameSummaryRef.off('value');\n  }\n\n  fetch() {\n    const {\n      league: { leagueID },\n    } = this.props;\n    const { players } = this.state;\n\n    const dbRef = fire.database().ref();\n    this.gameSummaryRef = dbRef.child(`leagueGamesSummary/_${leagueID}`);\n    this.leagueGamesRef = dbRef\n      .child(`leagueGames/_${leagueID}`)\n      .orderByChild('status')\n      .equalTo('FINISHED');\n\n    this.leagueGamesRef.on('value', (snap) => {\n      if (snap.val()) {\n        const gameKeys = Object.keys(snap.val());\n        const lastKey = gameKeys[gameKeys.length - 1];\n\n        this.gameSummaryRef\n          .orderByKey()\n          .endAt(lastKey)\n          .on('value', (snap) => {\n            const gameSummary = Object.values(snap.val());\n            this.setState({\n              players: players.map((player) => {\n                const playerKey = player.key;\n\n                return {\n                  ...player,\n                  games: gameSummary.map((game, i) => game.players[playerKey]),\n                };\n              }),\n            });\n          });\n      }\n    });\n  }\n\n  render() {\n    const { league } = this.props;\n    const { title } = league;\n    const { players } = this.state;\n\n    return (\n      <div className=\"game-summery\">\n        <h3>{title}</h3>\n\n        <h3>League Score:</h3>\n        <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n          {this.getTableHeaders(players)}\n        </Row>\n        <Row gutter={1}>{this.getScoreRow(players)}</Row>\n        {Object.keys(statsObj).map(this.getStatsRow)}\n      </div>\n    );\n  }\n\n  getTableHeaders = (players) =>\n    players.map(({ key, nickname }) => (\n      <Col key={key} span={6}>\n        <div className=\"table-cell\">{nickname}</div>\n      </Col>\n    ));\n\n  getScoreRow = (players) =>\n    players.map((player) => (\n      <Col span={6} key={player.key}>\n        <div className=\"table-cell\">\n          {player.games && this.scoreReducer(player.games, 'leagueScore')}\n        </div>\n      </Col>\n    ));\n\n  getStatsRow = (statsKey) => {\n    const { players } = this.state;\n\n    return (\n      <div className=\"stats-row\" key={statsKey}>\n        <h4>{statsObj[statsKey]}</h4>\n        <Row gutter={1}>{this.getWinRateRow(players, statsKey)}</Row>\n      </div>\n    );\n  };\n\n  getWinRateRow = (players, statsKey) =>\n    players.map((player) => (\n      <Col span={6} key={player.key}>\n        <div className=\"table-cell\">\n          {player.games && this.calculateRate(player.games, statsKey)}%\n        </div>\n      </Col>\n    ));\n\n  scoreReducer = (games, prop) =>\n    games.reduce((sum, game) => sum + Number(game[prop]), 0);\n\n  calculateRate = (games, prop) =>\n    this.toPercentage(this.preCalculateRate(games, prop));\n\n  toPercentage = ({ wins, total }) =>\n    Number.parseFloat((wins / total) * 100).toFixed(0);\n\n  preCalculateRate = (games, prop) =>\n    games.reduce(\n      (sumObj, game) => {\n        const category = game[prop];\n        sumObj.wins += category.wins;\n        sumObj.total += category.total;\n        return sumObj;\n      },\n      { wins: 0, total: 0 }\n    );\n}\n","import { fire } from '../firebase';\r\nimport { IPlayer, ILeagueModel } from '../models/ILeagueModel';\r\n\r\ninterface IInvited {\r\n  // [userID: string]: { [inviteKey: string]: boolean };\r\n  [userID: string]: string; //{ [inviteKey: string]: boolean };\r\n}\r\n\r\nexport interface IGameInvite {\r\n  inviteKey: string;\r\n  leagueID: number;\r\n  leagueTitle: string;\r\n  newGameId: number;\r\n  inviter: IPlayer;\r\n  // joinedPlayers\r\n}\r\n\r\ninterface IInviteObj {\r\n  invited: IInvited;\r\n  invite: IGameInvite;\r\n}\r\n\r\nexport default class LeagueService {\r\n  public static invitePlayers(\r\n    league: Partial<ILeagueModel>,\r\n    newGameId: number\r\n  ): Promise<boolean> {\r\n    // TODO: add reject when after a xxx seconds with not enough joined players\r\n    // TODO: upgrade the promise to allow cancel\r\n    return new Promise<boolean>((resolve) => {\r\n      // create firebase ref to notification/gameInvites\r\n      const gameInvitesRef = fire\r\n        .database()\r\n        .ref()\r\n        .child('notifications/gameInvites');\r\n\r\n      // generate new key\r\n      const inviteKey = gameInvitesRef.push().key;\r\n      const { invited, invite } = LeagueService.setInviteObj(\r\n        league,\r\n        inviteKey as string,\r\n        newGameId\r\n      );\r\n\r\n      // update the invantation and invited list\r\n      const update = {\r\n        [`${inviteKey}`]: invite,\r\n      };\r\n\r\n      gameInvitesRef\r\n        .update(update)\r\n        .then(() => LeagueService.setAllInvited(invited, gameInvitesRef))\r\n        .then((invitedRefs) => {\r\n          // setTimeout(() => {\r\n          //   gameInvitesRef\r\n          //     .child(`${inviteKey}/joinedPlayers`)\r\n          //     .push('QVU5a8IMtPZkqo76vgRAvErZ3pm2');\r\n          // }, 2000);\r\n          // setTimeout(() => {\r\n          //   gameInvitesRef\r\n          //     .child(`${inviteKey}/joinedPlayers`)\r\n          //     .push('6fosZWZDV5g0yB7Js8IQhk3ADHh2');\r\n          // }, 2500);\r\n\r\n          const playersKeys = Object.keys(invited);\r\n\r\n          // listen to changes in the invantation (joinedPlayers)\r\n          gameInvitesRef\r\n            .child(`${inviteKey}/joinedPlayers`)\r\n            .on('child_added', (player: firebase.database.DataSnapshot) => {\r\n              console.log(player.val());\r\n              // resolve when all players joined\r\n              const index = playersKeys.indexOf(player.val());\r\n\r\n              if (index > -1) {\r\n                playersKeys.splice(index, 1);\r\n              }\r\n\r\n              console.log(playersKeys);\r\n\r\n              if (!playersKeys.length) {\r\n                gameInvitesRef\r\n                  .child(`${inviteKey}/joinedPlayers`)\r\n                  .off('child_added');\r\n\r\n                LeagueService.removeAllInvited(invitedRefs);\r\n                resolve();\r\n              }\r\n            });\r\n        });\r\n    });\r\n  }\r\n\r\n  public static setInviteObj(\r\n    league: Partial<ILeagueModel>,\r\n    inviteKey: string,\r\n    newGameId: number\r\n  ): IInviteObj {\r\n    const { players, leagueID, title } = league;\r\n    const userId = fire.auth().currentUser?.uid;\r\n    const inviter = players?.find((player) => player.key === userId) as IPlayer;\r\n    const invited = (players as IPlayer[])\r\n      .filter((player) => player.key !== userId)\r\n      .reduce((invited, player) => {\r\n        invited[player.key] = inviteKey;\r\n\r\n        return invited;\r\n      }, {} as IInvited);\r\n\r\n    return {\r\n      invited,\r\n      invite: {\r\n        inviter,\r\n        inviteKey,\r\n        leagueID: leagueID as number,\r\n        leagueTitle: title as string,\r\n        newGameId,\r\n      },\r\n    };\r\n  }\r\n\r\n  public static setAllInvited(\r\n    invited: IInvited,\r\n    gameInvitesRef: firebase.database.Reference\r\n  ): Promise<firebase.database.Reference[]> {\r\n    const sets: Promise<firebase.database.Reference>[] = [];\r\n\r\n    Object.keys(invited).forEach((playerKey) => {\r\n      const promise = gameInvitesRef\r\n        .child(`invitedPlayers/${playerKey}`)\r\n        .push(invited[playerKey]);\r\n\r\n      sets.push(promise);\r\n    });\r\n\r\n    return Promise.all(sets);\r\n  }\r\n\r\n  public static removeAllInvited(invitedRefs: firebase.database.Reference[]) {\r\n    invitedRefs.forEach((ref: firebase.database.Reference) => {\r\n      ref.set(null);\r\n    });\r\n  }\r\n\r\n  public static acceptGameInvite(invite: IGameInvite): Promise<any> {\r\n    const { inviteKey } = invite;\r\n    const gameInviteRef = fire\r\n      .database()\r\n      .ref()\r\n      .child(`notifications/gameInvites/${inviteKey}/joinedPlayers`);\r\n    const userId = fire.auth().currentUser?.uid;\r\n\r\n    // TODO: listen also if game was added before resolve,\r\n    // otherwise the navigation to the new game is before the game is actually created\r\n    return new Promise((resolve) => {\r\n      gameInviteRef.push(userId).then(() => {\r\n        gameInviteRef.on('value', (snap) => {\r\n          if (Object.values(snap.val()).length === 3) {\r\n            gameInviteRef.off('value');\r\n            resolve();\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\nimport { fire } from '../firebase';\nimport { Route, Link, RouteComponentProps } from 'react-router-dom';\nimport withAuthorization from '../authentication/withAuthorization';\nimport { Menu, Layout, message } from 'antd';\nimport {\n  DashboardOutlined,\n  GoldOutlined,\n  ExportOutlined,\n  PlusOutlined,\n} from '@ant-design/icons';\nimport './League.scss';\nimport GameTab from '../game/GameTab';\nimport * as routes from '../constants/routes';\nimport gameDataTpl from '../dataTemplates/gameTpl';\nimport RcDrawer from 'rc-drawer';\nimport 'rc-drawer/assets/index.css';\nimport Loader from '../common/loader/Loader';\nimport { GAME_STATUS } from '../constants/states';\nimport LeagueSummary from '../leagueSummary/LeagueSummary';\nimport Dialog from '../dialogs/Dialog';\nimport { Dialogs } from '../constants/dialogs';\nimport { ILeagueModel, IPlayer } from '../models/ILeagueModel';\nimport { ClickParam } from 'antd/lib/menu';\nimport { GameMode } from '../models/IGameModel';\nimport { UserContext } from '../authentication/AuthUserContext';\nimport LeagueService from '../services/LeagueSrv';\n\nconst { Content } = Layout;\nconst SubMenu = Menu.SubMenu;\n\nexport interface ILeagueState {\n  loading: boolean;\n  menuSelected: string | 'dashboard';\n  league: Partial<ILeagueModel>;\n  leagueGames: Array<any>;\n  drawerVisible: boolean;\n  newGameDialog: boolean;\n}\n\ntype TParams = { leagueID?: string };\n\nexport interface ILeagueProps extends RouteComponentProps<TParams> {}\n\nclass League extends React.Component<ILeagueProps, ILeagueState> {\n  private leagueRef: firebase.database.Reference;\n  private leagueGamesRef: firebase.database.Reference;\n\n  constructor(props: ILeagueProps) {\n    super(props);\n\n    const { location, match } = props;\n    const { leagueID } = match.params;\n\n    const matchGame = location.pathname.match(/game\\/[1-9]/g) || [];\n    const gameID = matchGame.length ? matchGame[0].split('/')[1] : false;\n\n    this.state = {\n      loading: false,\n      menuSelected: gameID || 'dashboard',\n      league: { title: '', players: [] },\n      leagueGames: [],\n      drawerVisible: false,\n      newGameDialog: false,\n      // activeGame: `0`\n    };\n\n    /* Create reference to messages in Firebase Database */\n    const dbRef = fire.database().ref();\n    this.leagueRef = dbRef.child(`leagues/list/_${leagueID}`);\n    this.leagueGamesRef = dbRef.child(`leagueGames/_${leagueID}`);\n\n    this.handleMenuItemClick = this.handleMenuItemClick.bind(this);\n    this.newGameDialogHandler = this.newGameDialogHandler.bind(this);\n  }\n\n  public componentDidMount() {\n    this.fetch();\n  }\n\n  public componentWillUnmount() {\n    this.leagueRef.off('value');\n  }\n\n  private fetch() {\n    this.setState({ loading: true });\n    this.leagueRef.on('value', (snapshot) => {\n      const leagueData: ILeagueModel = snapshot.val();\n      console.log(leagueData);\n      if (leagueData) {\n        this.setState({\n          league: {\n            ...this.state.league,\n            ...leagueData,\n          },\n          loading: false,\n        });\n      }\n    });\n\n    this.leagueGamesRef.on('child_added', (snapshot) => {\n      this.setState((prevState) => {\n        return { leagueGames: [...prevState.leagueGames, snapshot.val()] };\n      });\n    });\n\n    this.leagueGamesRef.on('child_changed', (snapshot) => {\n      console.log('child_changed', snapshot.val());\n      this.setState((prevState) => {\n        const leagueGames = prevState.leagueGames;\n        const changedIndex = leagueGames.findIndex(\n          (game) => game.gameID === snapshot.val().gameID\n        );\n\n        return {\n          leagueGames: [\n            ...leagueGames.slice(0, changedIndex),\n            {\n              ...snapshot.val(),\n            },\n            ...leagueGames.slice(changedIndex + 1),\n          ],\n        };\n      });\n    });\n  }\n\n  public render() {\n    const { match } = this.props;\n    const { league, loading, drawerVisible } = this.state;\n    const { leagueID, players } = league;\n\n    return (\n      <Layout className=\"league-container\">\n        <RcDrawer\n          getContainer=\".app\"\n          width=\"250px\"\n          open={drawerVisible}\n          onHandleClick={this.toggleDrawer}\n          onClose={this.toggleDrawer}\n        >\n          <div className=\"drawer-title\">{league.title}</div>\n          {this.getMenu()}\n        </RcDrawer>\n        {loading && <Loader className=\"with-mask\" />}\n        <Layout>\n          <Content>\n            <Route\n              path={`${routes.LEAGUE}/:leagueID/game/:gameID`}\n              render={(props) =>\n                !!leagueID ? (\n                  <GameTab\n                    {...props}\n                    players={players}\n                    // loading={loading}\n                    loaderStateCb={this.setLoaderState}\n                  />\n                ) : (\n                  <Loader />\n                )\n              }\n            />\n            <Route\n              exact\n              path={match.url}\n              render={(props) =>\n                !!leagueID ? (\n                  <LeagueSummary {...props} league={league} />\n                ) : (\n                  <Loader />\n                )\n              }\n            />\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n\n  private getMenu() {\n    const { match } = this.props;\n    const { leagueGames, menuSelected, newGameDialog } = this.state;\n\n    return (\n      <Menu\n        mode=\"inline\"\n        selectedKeys={[menuSelected]}\n        defaultOpenKeys={['gamesSub']}\n        onClick={this.handleMenuItemClick}\n        className=\"league-menu\"\n      >\n        <Menu.Item key=\"dashboard\">\n          <DashboardOutlined />\n          <Link to={`${match.url}`}>League Summary</Link>\n        </Menu.Item>\n        <SubMenu\n          key=\"gamesSub\"\n          title={\n            <span>\n              <GoldOutlined />\n              <span>Games</span>\n            </span>\n          }\n        >\n          {leagueGames.map((game, i) => (\n            <Menu.Item key={game.gameID.toString()}>\n              <Link to={`${match.url}${routes.GAME}/${game.gameID}`}>\n                Game {game.gameID}\n              </Link>\n            </Menu.Item>\n          ))}\n\n          <Menu.Item key=\"new_game\">\n            <PlusOutlined />\n            <span>New Game</span>\n          </Menu.Item>\n        </SubMenu>\n        {newGameDialog && (\n          <Dialog\n            dialog={Dialogs.NEW_GAME}\n            dialogProps={{\n              visible: true,\n              onAfterClose: this.newGameDialogHandler,\n            }}\n          />\n        )}\n        <Menu.Item key=\"main_menu\">\n          <ExportOutlined className={'rotate-180'} />\n          <Link to={`/`}>To Main Menu</Link>\n        </Menu.Item>\n      </Menu>\n    );\n  }\n\n  private toggleDrawer = () => {\n    this.setState({\n      drawerVisible: !this.state.drawerVisible,\n    });\n  };\n\n  private setLoaderState = (loading: boolean) => {\n    this.setState({ loading });\n  };\n\n  private handleMenuItemClick(item: ClickParam) {\n    const key = item.key;\n\n    if (key === 'new_game') {\n      if (this.isAddGameOk()) {\n        // trying to block the leauge database by adding to the league blockedBy attribute value with the user Id\n        // together with the database rules preventing other user from updating the league data\n        this.blockLeague().then(\n          () => {\n            this.setNewGameDialogState(true);\n          },\n          (error: Error | null) => {\n            console.error(error);\n            message.warning('One of the players is blocking!!');\n          }\n        );\n      } else {\n        message.warning('Last Game is not finished yet!!');\n      }\n    } else if (key !== 'main_menu' && key !== this.state.menuSelected) {\n      this.setState({ menuSelected: key });\n    }\n\n    setTimeout(this.toggleDrawer, 200);\n  }\n\n  private blockLeague() {\n    const userId = fire.auth().currentUser?.uid;\n\n    return this.leagueRef.child('blockedBy').set(userId);\n  }\n\n  private unblockLeague() {\n    this.leagueRef.update({\n      blockedBy: null,\n    });\n  }\n\n  private setNewGameDialogState = (show: boolean) => {\n    this.setState({\n      newGameDialog: show,\n    });\n  };\n\n  private newGameDialogHandler(gameMode: GameMode) {\n    this.setState({\n      newGameDialog: false,\n    });\n\n    if (gameMode === 'local') {\n      this.unblockLeague();\n      this.addGame(gameMode);\n    } else if (gameMode === 'remote') {\n      this.setState({ loading: true });\n      // ask other players to join the game\n      const { league, leagueGames } = this.state;\n      const newGameId = leagueGames.length + 1;\n\n      LeagueService.invitePlayers({ ...league }, newGameId).then(() => {\n        console.log('inventation resolved- ok to add game');\n        this.addGame('remote');\n        this.setState({ loading: false });\n      });\n    }\n  }\n\n  private addGame = (gameMode: GameMode) => {\n    const { league, leagueGames } = this.state;\n    const { leagueID, players, blockedBy } = league;\n\n    const { history, match } = this.props;\n    const newGameId = leagueGames.length + 1;\n\n    const newGameKey = fire.database().ref().child('games').push().key;\n\n    const gameTpl = gameDataTpl(players, gameMode);\n    const updates: { [key: string]: any } = {};\n\n    updates[`/games/${newGameKey}`] = {\n      gameID: newGameId,\n      dealer: gameMode === 'remote' && blockedBy ? blockedBy : '',\n      ...gameTpl.gameData,\n    };\n    updates[`/leagueGames/_${leagueID}/${newGameKey}`] = {\n      gameID: newGameId,\n      gameMode,\n      status: GAME_STATUS.ACTIVE,\n    };\n    updates[`/leagueGamesSummary/_${leagueID}/${newGameKey}`] = {\n      ...gameTpl.gameSummary,\n    };\n\n    fire\n      .database()\n      .ref()\n      .update(updates, (error) => {\n        if (!error) {\n          this.setState({ menuSelected: `${newGameId}` });\n          history.push(`${match.url}${routes.GAME}/${newGameId}`);\n        }\n      });\n  };\n\n  private isAddGameOk() {\n    const { leagueGames } = this.state;\n    const lastGame = leagueGames[leagueGames.length - 1];\n\n    return !lastGame || lastGame.status === GAME_STATUS.FINISHED;\n  }\n}\n\nconst authCondition = (authUser: UserContext) => !!authUser;\n\nexport default withAuthorization<ILeagueProps>(authCondition)(League);\n","import { INPUT_MODE, GAME_STATUS } from '../constants/states';\n\nexport default function gameDataTpl(players, gameMode) {\n  const rounds = [];\n  const initRoundData = {\n    segment: '',\n    totalBids: '',\n    trump: '',\n    check: false,\n    factor: 1,\n    fell: false,\n    highestBidder: '',\n    inputMode: INPUT_MODE.BID,\n    score0: '',\n    aggregateScore0: '',\n    bid0: '',\n    won0: '',\n    score1: '',\n    aggregateScore1: '',\n    bid1: '',\n    won1: '',\n    score2: '',\n    aggregateScore2: '',\n    bid2: '',\n    won2: '',\n    score3: '',\n    aggregateScore3: '',\n    bid3: '',\n    won3: '',\n  };\n\n  if (gameMode === 'remote') {\n    initRoundData.currentHand = 1;\n  }\n\n  for (let i = 0; i < 13; i++) {\n    rounds.push({ round: i + 1, ...initRoundData });\n  }\n\n  return {\n    gameData: {\n      rounds,\n      currentRound: 1,\n      totalScore0: 0,\n      totalScore1: 0,\n      totalScore2: 0,\n      totalScore3: 0,\n      status: GAME_STATUS.ACTIVE,\n    },\n    gameSummary: {\n      players: players.reduce((summaryObj, player) => {\n        summaryObj[player.key] = {\n          leagueScore: '',\n          successRate: '',\n          successRateHB: '',\n          successRateOver: '',\n          successRateUnder: '',\n          successRateNT: '',\n        };\n\n        return summaryObj;\n      }, {}),\n    },\n  };\n}\n","import React, { Component } from 'react';\nimport { withRouter, Route } from 'react-router-dom';\nimport NotificationService from './services/NotificationSrv';\nimport { fire } from './firebase';\nimport cards from './cards.png';\nimport phoneImg from './images/phone.png';\nimport * as routes from './constants/routes';\nimport withAuthentication from './authentication/withAuthentication';\nimport './App.scss';\nimport 'antd/dist/antd.css';\nimport Login from './authentication/Login';\nimport SignUp from './authentication/SignUp';\nimport Main from './main/Main';\nimport League from './league/League.tsx';\nimport { addListener, isMobileBrowser } from './utils/Utils';\nimport { Dialogs } from './constants/dialogs';\nimport Dialog from './dialogs/Dialog';\nimport LeagueService from './services/LeagueSrv';\nimport Loader from './common/loader/Loader';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inlineHeader: false,\n      showGameInvite: false,\n      loader: false,\n    };\n\n    this.toggleHeaderInline = this.toggleHeaderInline.bind(this);\n    this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n  }\n\n  // set main header state by router value\n  // if in main menu page header is bigger\n  toggleHeaderInline(inline = true) {\n    this.setState({\n      inlineHeader: inline,\n    });\n  }\n\n  // set if view is mobile size\n  handleWindowSizeChange() {\n    this.setState({\n      // isMobile: window.innerWidth < 1095,\n    });\n  }\n\n  // init window resize listener\n  listenToWinResize(callback) {\n    return addListener(window, 'resize', callback);\n  }\n\n  componentWillMount() {\n    const { pathname } = this.props.location;\n    // set initial header state\n    this.toggleHeaderInline(pathname !== '/');\n\n    // listen to routing changes\n    this.unlistenHistory = this.props.history.listen((location, action) => {\n      const { pathname } = location;\n      this.toggleHeaderInline(pathname !== '/' && pathname !== '/login');\n    });\n\n    this.unlistenWinResize = this.listenToWinResize(\n      this.handleWindowSizeChange\n    );\n  }\n\n  componentWillUnmount() {\n    this.unlistenHistory();\n    this.unlistenWinResize();\n  }\n\n  componentDidMount() {\n    fire.auth().onAuthStateChanged((authUser) => {\n      if (authUser) {\n        NotificationService.registerGameInvite(this.onGameInvite);\n      }\n    });\n  }\n\n  render() {\n    const { inlineHeader, showGameInvite, invite, loader } = this.state;\n\n    return (\n      <div\n        className={`app-wrapper ${\n          isMobileBrowser() ? 'mobile-mode' : 'desktop-mode'\n        }`}\n      >\n        <img src={phoneImg} />\n        <div className={`app ${inlineHeader ? 'inline-header' : ''}`}>\n          <header id=\"app-header\">\n            <img src={cards} className=\"app-logo\" alt=\"logo\" />\n            <h1 className=\"app-title\">Sub Whist</h1>\n          </header>\n          {loader && <Loader className=\"with-mask\" />}\n          <div className=\"app-content\">\n            <Route exact path=\"/\" component={Main} />\n            <Route exact path={routes.SIGN_IN} component={Login} />\n            <Route exact path={routes.SIGN_UP} component={SignUp} />\n            <Route\n              path={`${routes.LEAGUE}/:leagueID`}\n              render={(props) => <League {...props} screenSize={442} />}\n            />\n          </div>\n        </div>\n        {showGameInvite && (\n          <Dialog\n            dialog={Dialogs.GAME_INVITE}\n            dialogProps={{\n              visible: true,\n              invite,\n              onAfterClose: this.closeGameInvite,\n              onOk: this.acceptGameInvite,\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  onGameInvite = (invite) => {\n    this.setState({\n      showGameInvite: true,\n      invite,\n    });\n  };\n\n  acceptGameInvite = () => {\n    const { invite } = this.state;\n\n    this.setState({ loader: true });\n    LeagueService.acceptGameInvite(invite).then(\n      () => {\n        this.setState({ loader: false });\n        const { history } = this.props;\n        const { leagueID, newGameId } = invite;\n\n        setTimeout(\n          () => history.push(`${routes.LEAGUE}/${leagueID}/game/${newGameId}`),\n          500\n        );\n      },\n      () => {\n        this.setState({ loader: false });\n      }\n    );\n  };\n\n  closeGameInvite = () => {\n    this.setState({\n      showGameInvite: false,\n    });\n  };\n}\n\nexport default withRouter(withAuthentication(App));\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"pure-swipe\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport \"./index.scss\";\n\nReactDOM.render(\n  <Router basename={process.env.PUBLIC_URL}>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}