{"version":3,"sources":["cards.png","firebase/fire.ts","firebase/auth.js","firebase/db.ts","authentication/AuthUserContext.js","authentication/withAuthentication.js","authentication/Login.tsx","constants/routes.js","authentication/SignUp.tsx","authentication/withAuthorization.js","dialogs/NewLeague.js","dialogs/ResumeLeague.js","utils/Utils.js","common/dragPad/DragPad.js","dialogs/ReorderPlayers.js","constants/dialogs.js","dialogs/Dialog.js","main/MainMenu.js","main/Main.js","constants/cards.js","common/table/EditableCell.js","common/cards/Icons.js","common/cards/Pad.js","common/cards/Modal.js","common/numbers/Pad.js","common/transition/Css.js","common/player/Pad.js","constants/states.js","common/twoWayArrow/TwoWayArrow.jsx","common/game/Pad.js","common/table/renderers.js","common/loader/Loader.js","common/table/MobileTable.js","game/GameMobileView.js","constants/scores.js","game/GameTab.js","common/arrowButton/arrow/Arrow.js","leagueSummary/LeagueSummary.js","league/League.js","dataTemplates/gameTpl.js","App.js","registerServiceWorker.js","index.tsx"],"names":["module","exports","fire","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","auth","db","database","createUser","email","password","createUserWithEmailAndPassword","signInUser","signInWithEmailAndPassword","signOut","doCreateUser","id","userInfo","ref","set","onceGetUsers","once","onceGetLeagues","AuthUserContext","React","createContext","withAuthentication","Component","props","state","authUser","onAuthStateChanged","setState","this","Provider","value","FormItem","Item","Login","isLoading","handleSubmit","values","history","then","console","log","push","catch","error","code","message","alert","Consumer","style","textAlign","marginTop","type","size","onClick","goBack","icon","ArrowLeftOutlined","to","onFinish","className","name","rules","required","prefix","MailOutlined","color","placeholder","LockOutlined","htmlType","loading","withRouter","SignUp","formRef","createRef","handleConfirmBlur","e","target","confirmDirty","compareToFirstPassword","rule","callback","form","current","getFieldValue","validateToNextPassword","validateFields","nickname","user","uid","UserOutlined","SmileOutlined","validator","onBlur","withAuthorization","authCondition","WithAuthorization","width","position","top","Option","NewLeague","showDialog","visible","users","count","addPlayerCollapse","savingLeagueLoader","addPlayerCollapseChange","key","focusPlayersSelect","playersSelect","focus","snapshot","val","fetchPlayers","fieldsValues","getFieldsValue","err","description","players","map","lastID","newID","leagueID","active","closeModal","afterClose","title","destroyOnClose","maskClosable","confirmLoading","onOk","onCreateLeague","onCancel","okText","layout","label","len","mode","node","notFoundContent","Object","keys","ResumeLeague","activeLeagues","footer","itemLayout","dataSource","renderItem","item","Meta","hasTouch","window","navigator","maxTouchPoints","document","documentElement","addListener","element","addEventListener","removeEventListener","springSetting1","stiffness","damping","springSetting2","clamp","n","min","max","Math","allColors","height","DragPad","handleTouchStart","pressLocation","handleMouseDown","touches","handleTouchMove","preventDefault","handleMouseMove","pageX","pageY","order","lastPress","isPressed","mouseCircleDelta","dx","dy","mouseXY","col","round","row","floor","from","findIndex","p","newOrder","arr","_arr","abs","length","splice","unshift","pop","reorder","pressX","pressY","handleMouseUp","onChange","colors","reduce","colorObj","player","i","unListenTouchmove","unListenTouchend","unListenMousemove","unListenMouseup","x","y","visualPosition","translateX","translateY","scale","spring","boxShadow","onMouseDown","bind","onTouchStart","backgroundColor","WebkitTransform","transform","zIndex","ReorderPlayers","handleOnCancel","handleOnOk","handleDragChange","onAfterClose","Dialogs","DialogsMapping","NewLeagueDialog","ResumeLeagueDialog","Dialog","dialog","dialogProps","DialogEl","MainMenu","items","index","text","disabled","block","Main","newLeague","resumeLeague","orderByChild","equalTo","on","userId","currentUser","filter","some","fetch","off","navigateToLeague","showResumeLeagueDialog","closeResumeLeagueDialog","showNewLeagueDialog","closeNewLeagueDialog","CARDS","SPADE","HART","DIAMOND","CLUB","NT","EditableContext","EditableFormRow","EditableCell","editing","toggleEdit","input","handleClickOutside","cell","contains","tagName","setTimeout","save","record","handleSave","editable","editorType","Array","_","dataIndex","restProps","margin","getFieldDecorator","initialValue","onSelect","defaultOpen","showArrow","getOptionList","children","Spade","viewBox","enableBackground","d","fill","Hart","Diamond","points","Club","ChangePlayers","CardsPad","isMobile","trump","Group","buttonStyle","Button","Icon","component","CardsModal","showModal","handleCancel","trumpIconMap","ghost","QuestionOutlined","onTrumpSelect","NumbersPad","getButtons","baseNum","amount","disabledNumber","btnSize","num","onBtnClick","showMore","toggleMore","textContent","CSS_TRANSITIONS","Css","div","classList","add","remove","prevProps","el","PlayerPad","bid","won","score","undefined","INPUT_MODE","GAME_STATUS","TWO_WAY_ARROW_DIRECTION","TwoWayArrow","direction","confirm","config","maxCount","GamePad","getNextPlayer","selectedPlayer","getBeforePlayer","getBeforePlayers","getPlayerAggregateScore","roundsData","roundIndex","playerIndex","roundData","aggregateScore","fell","getPlayersButtons","allRounds","currentRound","currentRoundData","highestBidder","playerName","dot","isAllBids","every","reorderPlayersDialogVisible","handleSwitchMode","handleCardsPadChange","handleNumberSelect","setSelectedPlayer","showChangeHighestBidderConfirm","showChangePlayerDialog","handleReorderPlayersAfterClose","checked","segment","warning","everyoneBid","inputMode","prop","newRoundData","nextPlayer","Number","isInteger","beforePlayers","bids","aBid","content","okType","bid0","bid1","bid2","bid3","check","factor","playersButtons","justify","checkedChildren","unCheckedChildren","calculateDisableNum","shape","PlayersContext","reorderPlayers","cardsRenderer","card","Loader","MobileTable","rounds","leagueScores","gameID","gutter","marginBottom","span","getTableHeaders","getRoundCol","TrophyTwoTone","twoToneColor","getLeagueScoresCol","GameMobileView","carouselSwipedLeft","currentView","onCurrentViewChange","carouselEl","nextRound","goToRound","toRoundBefore","carouselSwipedRight","unListenSwipedLeft","unListenSwipedRight","playersColumns","LeftOutlined","RightOutlined","GAME_DEFAULT_SCORES","Header","Content","Sider","GameTab","summaryToUpdate","stateToUpdate","newData","gameData","calculatePlayerscore","currentTotalBid","currentTotalWon","allWonInput","entries","indexOf","didRoundFell","calculateSummary","status","updateGameStatus","scores","totalScore0","totalScore1","totalScore2","totalScore3","calculateLeagueScores","gameSummaryRef","update","mapToPlayersObj","gameRef","rowScore","pow","diff","sort","a","b","forEach","scoreIndex","leagueScore","slice","currentRoundIndex","playersSummary","pIndex","stood","totalRounds","totalHBrounds","stoodWhileHB","stoodInOver","totalOverRounds","stoodInUnder","totalNTrounds","stoodInNT","stoodWhenLastBidder","totalStoodWhenLastBidder","rIndex","lastBidder","successRate","wins","total","successRateHB","successRateOver","successRateUnder","successRateNT","successRateLastBidder","isNaN","gameSummary","obj","match","params","gameKey","toggleSlide","setCurrentViewState","onDragEnd","fromIndex","toIndex","columns","columnsCopy","column","playersCopy","getLeagueScores","leagueScore0","leagueScore1","leagueScore2","leagueScore3","summaryObj","initColumns","concat","render","initColumns1","playerScore","child","subChild","onCell","columns1","selectActiveRound","handleReorderPlayers","leagueGamesRef","playersOrder","snap","loaderStateCb","prevState","newRound","translate","screenSize","components","body","siderWidth","background","defaultSelectedKeys","left","selectedKeys","display","padding","nodeSelector","rowKey","bordered","pagination","Arrow","isActive","handleClick","statsObj","LeagueSummary","getScoreRow","games","scoreReducer","getStatsRow","statsKey","getWinRateRow","calculateRate","sum","game","toPercentage","preCalculateRate","parseFloat","toFixed","sumObj","category","league","dbRef","gameKeys","lastKey","orderByKey","endAt","playerKey","SubMenu","League","addGame","leagueGames","lastGame","toggleDrawer","newGameId","newGameKey","gameTpl","totalBids","score0","aggregateScore0","won0","score1","aggregateScore1","won1","score2","aggregateScore2","won2","score3","aggregateScore3","won3","gameDataTpl","updates","menuSelected","url","handleMenuItemClick","setLoaderState","toggleSider","siderCollapse","drawerVisible","location","matchGame","pathname","split","leagueRef","leagueData","changedIndex","defaultOpenKeys","DashboardOutlined","GoldOutlined","toString","PlusOutlined","ExportOutlined","getContainer","open","onHandleClick","onClose","getMenu","trigger","collapsible","collapsed","path","exact","App","inlineHeader","innerWidth","toggleHeaderInline","handleWindowSizeChange","inline","unistenHistory","listen","action","unlistenWinResize","listenToWinResize","src","cards","alt","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","basename","getElementById","URL","origin","response","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.8245c162.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cards.03003d3d.png\";","import firebase from \"firebase/app\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\n\r\n// Initialize Firebase\r\nconst config = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID\r\n};\r\nconst fire = firebase.initializeApp(config);\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.database();\r\n\r\nexport { fire, db, auth };\r\n\r\n// export default fire;\r\n","import { auth } from './fire';\r\n\r\n// Sign Up\r\nexport const createUser = (email, password) =>\r\n  auth.createUserWithEmailAndPassword(email, password);\r\n\r\n// Sign In\r\nexport const signInUser = (email, password) =>\r\n  auth.signInWithEmailAndPassword(email, password);\r\n\r\n// Sign out\r\nexport const signOut = () =>\r\n  auth.signOut();","import { db } from \"./fire\";\r\n\r\n// User API\r\n\r\nexport const doCreateUser = (id: any, userInfo: any) =>\r\n  db.ref(`users/${id}`).set(userInfo);\r\n\r\nexport const onceGetUsers = () => db.ref(\"users\").once(\"value\");\r\n\r\nexport const onceGetLeagues = () => db.ref(\"leagues\").once(\"value\");\r\n","import React from 'react';\r\n\r\nconst AuthUserContext = React.createContext(null);\r\n\r\nexport default AuthUserContext;","import React from 'react';\r\nimport { fire } from '../firebase';\r\nimport AuthUserContext from './AuthUserContext';\r\n\r\nconst withAuthentication = (Component) => {\r\n  class WithAuthentication extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n        authUser: null,\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      fire.auth().onAuthStateChanged(authUser => {\r\n        authUser\r\n          ? this.setState({ authUser })\r\n          : this.setState({ authUser: null });\r\n      });\r\n    }\r\n\r\n    render() {\r\n      const { authUser } = this.state;\r\n\r\n      return (\r\n        <AuthUserContext.Provider value={authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  return WithAuthentication;\r\n}\r\n\r\nexport default withAuthentication;","import React from \"react\";\r\nimport { withRouter, Link, RouteComponentProps } from \"react-router-dom\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport {\r\n  MailOutlined,\r\n  LockOutlined,\r\n  ArrowLeftOutlined\r\n} from \"@ant-design/icons\";\r\nimport * as routes from \"../constants/routes\";\r\nimport { auth } from \"../firebase\";\r\nimport AuthUserContext from \"./AuthUserContext\";\r\n\r\nimport \"./Login.scss\";\r\nimport { IFormValues } from \"../models/common/BasicTypes\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nexport interface ILoginState {\r\n  isLoading: boolean;\r\n}\r\n\r\nexport interface ILoginProps extends RouteComponentProps {}\r\n\r\nclass Login extends React.Component<ILoginProps, ILoginState> {\r\n  state = {\r\n    isLoading: false\r\n  };\r\n\r\n  private handleSubmit = (values: IFormValues) => {\r\n    this.setState({ isLoading: true });\r\n\r\n    const { history } = this.props;\r\n    const { email, password } = values;\r\n\r\n    auth\r\n      .signInUser(email, password)\r\n      .then(authUser => {\r\n        console.log(authUser);\r\n        history.push(routes.MAIN);\r\n      })\r\n      .catch(error => {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n        alert(error.message);\r\n        this.setState({ isLoading: false });\r\n      });\r\n  };\r\n\r\n  public render() {\r\n    const { history } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <AuthUserContext.Consumer>\r\n        {authUser =>\r\n          !authUser ? (\r\n            <Form onFinish={this.handleSubmit} className=\"login-form\">\r\n              <FormItem\r\n                name=\"email\"\r\n                rules={[\r\n                  {\r\n                    type: \"email\",\r\n                    message: \"The input is not valid E-mail!\"\r\n                  },\r\n                  {\r\n                    required: true,\r\n                    message: \"Please input your email!\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input\r\n                  prefix={<MailOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n                  placeholder=\"email\"\r\n                  size=\"large\"\r\n                />\r\n              </FormItem>\r\n              <FormItem\r\n                name=\"password\"\r\n                rules={[\r\n                  { required: true, message: \"Please input your Password!\" }\r\n                ]}\r\n              >\r\n                <Input\r\n                  prefix={<LockOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n                  type=\"password\"\r\n                  placeholder=\"password\"\r\n                  size=\"large\"\r\n                />\r\n              </FormItem>\r\n              <FormItem>\r\n                {/* <a className=\"login-form-forgot\" href=\"\">\r\n                  Forgot password\r\n                </a> */}\r\n                <Button\r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  size=\"large\"\r\n                  className=\"login-form-button\"\r\n                  loading={isLoading}\r\n                >\r\n                  Log in\r\n                </Button>\r\n                Or <Link to={routes.SIGN_UP}>register now!</Link>\r\n              </FormItem>\r\n            </Form>\r\n          ) : (\r\n            <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\r\n              <p>You are already logged in,</p>\r\n              <Button\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                onClick={() => history.goBack()}\r\n                icon={<ArrowLeftOutlined />}\r\n              >\r\n                Go back\r\n              </Button>{\" \"}\r\n              or <Link to={routes.MAIN}>Go Home</Link>\r\n            </div>\r\n          )\r\n        }\r\n      </AuthUserContext.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Login);\r\n","export const SIGN_IN = '/login';\r\nexport const SIGN_UP = '/signup';\r\nexport const MAIN = '/';\r\nexport const LEAGUE = '/league';\r\nexport const GAME = '/game';","import React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport {\r\n  SmileOutlined,\r\n  UserOutlined,\r\n  MailOutlined,\r\n  LockOutlined\r\n} from \"@ant-design/icons\";\r\nimport { auth, db } from \"../firebase\";\r\nimport \"./Login.scss\";\r\nimport { IFormValues } from \"../models/common/BasicTypes\";\r\nimport { FormInstance } from \"antd/lib/form\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\ninterface ISignUpState {\r\n  confirmDirty: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\ninterface ISignUpProps extends RouteComponentProps {}\r\n\r\nclass SignUp extends React.Component<ISignUpProps, ISignUpState> {\r\n  private formRef = React.createRef<FormInstance>();\r\n\r\n  public constructor(props: ISignUpProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      confirmDirty: false,\r\n      isLoading: false\r\n    };\r\n  }\r\n\r\n  private handleConfirmBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\r\n  };\r\n\r\n  private compareToFirstPassword = (rule: any, value: any, callback: any) => {\r\n    const form = this.formRef.current;\r\n\r\n    if (form && value && value !== form.getFieldValue(\"password\")) {\r\n      callback(\"Two passwords that you enter is inconsistent!\");\r\n    } else {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  private validateToNextPassword = (rule: any, value: any, callback: any) => {\r\n    const form = this.formRef.current;\r\n\r\n    if (value && this.state.confirmDirty) {\r\n      form && form.validateFields([\"confirm\"]);\r\n    }\r\n    callback();\r\n  };\r\n\r\n  private handleSubmit = (values: IFormValues) => {\r\n    this.setState({ isLoading: true });\r\n\r\n    const { name, nickname, email, password } = values;\r\n    auth\r\n      .createUser(email, password)\r\n      .then(authUser => {\r\n        // Create a user in own accessible Firebase Database too\r\n        authUser &&\r\n          authUser.user &&\r\n          db\r\n            .doCreateUser(authUser.user.uid, { name, nickname, email })\r\n            .then(() => {\r\n              this.props.history.push(\"/\");\r\n            })\r\n            .catch(error => {\r\n              // Handle Errors here.\r\n              var errorCode = error.code;\r\n              var errorMessage = error.message;\r\n              // ...\r\n              alert(error.message);\r\n              this.setState({ isLoading: false });\r\n            });\r\n      })\r\n      .catch(error => {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n        alert(error.message);\r\n        this.setState({ isLoading: false });\r\n      });\r\n  };\r\n\r\n  public render() {\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <Form\r\n        onFinish={this.handleSubmit}\r\n        ref={this.formRef}\r\n        className=\"login-form\"\r\n      >\r\n        <FormItem\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"Please input your name!\" }]}\r\n        >\r\n          <Input\r\n            prefix={<UserOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n            placeholder=\"Name\"\r\n            size=\"large\"\r\n          />\r\n        </FormItem>\r\n        <FormItem\r\n          name=\"nickname\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please input your Nickname!\"\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<SmileOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n            placeholder=\"Nickname\"\r\n            size=\"large\"\r\n          />\r\n        </FormItem>\r\n        <FormItem\r\n          name=\"email\"\r\n          rules={[\r\n            {\r\n              type: \"email\",\r\n              message: \"The input is not valid E-mail!\"\r\n            },\r\n            {\r\n              required: true,\r\n              message: \"Please input your email!\"\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<MailOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n            placeholder=\"Email\"\r\n            size=\"large\"\r\n          />\r\n        </FormItem>\r\n        <FormItem\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please input your Password!\"\r\n            },\r\n            {\r\n              validator: this.validateToNextPassword\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<LockOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            size=\"large\"\r\n          />\r\n        </FormItem>\r\n        <FormItem\r\n          name=\"confirm\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please confirm your password!\"\r\n            },\r\n            {\r\n              validator: this.compareToFirstPassword\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<LockOutlined style={{ color: \"rgba(0,0,0,.25)\" }} />}\r\n            type=\"password\"\r\n            placeholder=\"Confirm password\"\r\n            onBlur={this.handleConfirmBlur}\r\n            size=\"large\"\r\n          />\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            size=\"large\"\r\n            className=\"login-form-button\"\r\n            loading={isLoading}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n        </FormItem>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Spin } from 'antd';\n\nimport AuthUserContext from './AuthUserContext';\nimport { fire } from '../firebase';\nimport * as routes from '../constants/routes';\n\nconst withAuthorization = (authCondition) => (Component) => {\n    class WithAuthorization extends React.Component {\n        componentDidMount() {\n            fire.auth().onAuthStateChanged(authUser => {\n                if (!authCondition(authUser)) {\n                    this.props.history.push(routes.SIGN_IN);\n                }\n            });\n        }\n\n        render() {\n            return (\n                <AuthUserContext.Consumer>\n                    {authUser => authUser ?\n                        <Component {...this.props} /> :\n                        <div className=\"full-view loader\"><Spin size=\"large\" style={{ width: '100%', position: 'relative', top: '50%' }} /></div>}\n                </AuthUserContext.Consumer>\n            );\n        }\n    }\n\n    return withRouter(WithAuthorization);\n}\n\nexport default withAuthorization;","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Modal, Form, Input, Select, Spin } from \"antd\";\r\nimport { fire } from \"../firebase\";\r\nimport { onceGetUsers, onceGetLeagues } from \"../firebase/db\";\r\n\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\n\r\nclass NewLeague extends Component {\r\n  state = {\r\n    showDialog: this.props.visible,\r\n    users: {},\r\n    count: 0,\r\n    loading: true,\r\n    // selectedRowKeys: [], // Check here to configure the default column\r\n    addPlayerCollapse: [],\r\n    savingLeagueLoader: false\r\n  };\r\n\r\n  // onSelectChange = (selectedRowKeys) => {\r\n  //     this.setState({ selectedRowKeys });\r\n  // }\r\n\r\n  // set add player panel collapse state value\r\n  // we keep this state to close up the panel after a player was added\r\n  addPlayerCollapseChange = key => {\r\n    this.setState({\r\n      addPlayerCollapse: key\r\n    });\r\n  };\r\n\r\n  fetchPlayers() {\r\n    onceGetUsers().then(snapshot => {\r\n      if (snapshot.val()) {\r\n        this.setState({ users: snapshot.val(), loading: false });\r\n      } else {\r\n        this.setState({ loading: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchPlayers();\r\n  }\r\n\r\n  onCreateLeague() {\r\n    const { form } = this.props;\r\n    const { users } = this.state;\r\n    const fieldsValues = form.getFieldsValue();\r\n\r\n    form.validateFields(fieldsValues, (err, values) => {\r\n      if (!err) {\r\n        const { description } = values;\r\n        this.setState({ savingLeagueLoader: true });\r\n\r\n        const players = values.players.map(key => ({\r\n          key,\r\n          nickname: users[key].nickname\r\n        }));\r\n\r\n        onceGetLeagues().then(snapshot => {\r\n          const lastID = snapshot.val() && snapshot.val().lastID;\r\n          const newID = lastID ? lastID + 1 : 1;\r\n\r\n          fire\r\n            .database()\r\n            .ref(\"leagues/list/_\" + newID)\r\n            .set({\r\n              ...values,\r\n              players,\r\n              description: description || \"\",\r\n              leagueID: newID,\r\n              active: true\r\n            })\r\n            .then(() => this.closeModal(newID));\r\n          fire\r\n            .database()\r\n            .ref(\"leagues/lastID\")\r\n            .set(newID);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  focusPlayersSelect = function() {\r\n    this.playersSelect.focus();\r\n  };\r\n\r\n  // in order to preserve the animation when closing\r\n  // there is also an inner state although visible state initialy is from props\r\n  closeModal(leagueID) {\r\n    this.leagueID = leagueID;\r\n\r\n    this.setState({\r\n      showDialog: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { afterClose } = this.props;\r\n    const { showDialog, users, loading, savingLeagueLoader } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        title=\"Create League\"\r\n        visible={showDialog}\r\n        destroyOnClose={true}\r\n        maskClosable={false}\r\n        confirmLoading={savingLeagueLoader}\r\n        onOk={() => this.onCreateLeague()}\r\n        onCancel={() => this.closeModal()}\r\n        afterClose={() => afterClose(this.leagueID)}\r\n        width=\"600px\"\r\n        okText=\"Save & Play\"\r\n      >\r\n        <Form layout=\"vertical\">\r\n          <FormItem\r\n            label=\"Title\"\r\n            name=\"title\"\r\n            rules={[\r\n              { required: true, message: \"Please input the league title!\" }\r\n            ]}\r\n          >\r\n            <Input />\r\n          </FormItem>\r\n          <FormItem label=\"Description\" name=\"description\">\r\n            <Input type=\"textarea\" />\r\n          </FormItem>\r\n          {\r\n            <FormItem\r\n              label=\"Players\"\r\n              name=\"players\"\r\n              rules={[{ required: true, len: 4, type: \"array\" }]}\r\n            >\r\n              <Select\r\n                mode=\"multiple\"\r\n                ref={node => (this.playersSelect = node)}\r\n                notFoundContent={loading ? <Spin size=\"small\" /> : null}\r\n              >\r\n                {Object.keys(users).map(key => (\r\n                  <Option key={key} value={key}>\r\n                    {users[key].nickname}\r\n                  </Option>\r\n                ))}\r\n              </Select>\r\n            </FormItem>\r\n          }\r\n        </Form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(NewLeague);\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Modal, List } from 'antd';\r\nimport './ResumeLeague.css';\r\n\r\n\r\nclass ResumeLeague extends Component {\r\n    state = {\r\n        showDialog: this.props.visible,\r\n    }\r\n\r\n    closeModal(leagueID) {\r\n        // if leagueID - first close the modal then afterClose will pass the leagueID to rout to the right location\r\n        this.leagueID = leagueID;\r\n\r\n        this.setState({\r\n            showDialog: false\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { afterClose, activeLeagues } = this.props;\r\n        const { showDialog } = this.state;\r\n\r\n        return (\r\n            <Modal\r\n                title=\"Resume League\"\r\n                visible={showDialog}\r\n                destroyOnClose={true}\r\n                maskClosable={false}\r\n                width=\"600px\"\r\n                footer={null}\r\n                onCancel={() => this.closeModal()}\r\n                afterClose={() => afterClose(this.leagueID)}\r\n            >\r\n                <p>\r\n                    List of open leagues\r\n                </p>\r\n                <List\r\n                    itemLayout=\"horizontal\"\r\n                    dataSource={activeLeagues}\r\n                    renderItem={item => (\r\n                        <List.Item>\r\n                            <List.Item.Meta\r\n                                title={<a onClick={() => this.closeModal(item.leagueID)}>{item.title}</a>}\r\n                            />\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(ResumeLeague);\r\n","export const hasTouch = () =>\n  window.navigator.maxTouchPoints ||\n  'ontouchstart' in document.documentElement;\n\nexport function addListener(element, type, callback) {\n\n  element.addEventListener(type, callback);\n\n  return () => {\n    element.removeEventListener(type, callback);\n  };\n}","import React from \"react\";\nimport { Motion, spring } from \"react-motion\";\nimport { addListener } from \"../../utils/Utils\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport \"./DragPad.scss\";\n\nconst springSetting1 = { stiffness: 180, damping: 10 };\nconst springSetting2 = { stiffness: 120, damping: 17 };\n\nexport function reorder(arr, from, to) {\n  const _arr = [...arr];\n\n  if (Math.abs(from - to) === arr.length - 1) {\n    [_arr[to], _arr[from]] = [_arr[from], _arr[to]];\n  } else if (from < to && to - from > 1) {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.unshift(_arr.pop());\n    _arr.splice(to, 0, val);\n  } else {\n    const val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.splice(to, 0, val);\n  }\n\n  return _arr;\n}\n\nfunction clamp(n, min, max) {\n  return Math.max(Math.min(n, max), min);\n}\n\nconst allColors = [\"#EF767A\", \"#9acaff\", \"#49BEAA\", \"#49DCB1\"];\nconst [count, width, height] = [4, 80, 80];\n\n// indexed by visual position\n// const layout = [0, 1, 2, 3].map(n => {\n//   const row = Math.floor(n / 3);\n//   const col = n % 3;\n//   return [width * col, height * row];\n// });\n\nconst layout = [\n  [width * 1, height * 0],\n  [width * 2, height * 1],\n  [width * 1, height * 2],\n  [width * 0, height * 1]\n];\n\nexport default class DragPad extends React.Component {\n  unListenTouchmove;\n  unListenTouchend;\n  unListenMousemove;\n  unListenMouseup;\n  colors;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mouseXY: [0, 0],\n      mouseCircleDelta: [0, 0], // difference between mouse and circle pos for x + y coords, for dragging\n      lastPress: null, // key of the last pressed component\n      isPressed: false,\n      order: props.players,\n      from: null,\n      to: null\n    };\n\n    this.colors = props.players.reduce((colorObj, player, i) => {\n      colorObj[player.key] = allColors[i];\n\n      return colorObj;\n    }, {});\n  }\n\n  componentDidMount() {\n    this.unListenTouchmove = addListener(\n      window,\n      \"touchmove\",\n      this.handleTouchMove\n    );\n    this.unListenTouchend = addListener(window, \"touchend\", this.handleMouseUp);\n    this.unListenMousemove = addListener(\n      window,\n      \"mousemove\",\n      this.handleMouseMove\n    );\n    this.unListenMouseup = addListener(window, \"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    this.unListenTouchmove();\n    this.unListenTouchend();\n    this.unListenMousemove();\n    this.unListenMouseup();\n  }\n\n  handleTouchStart = (key, pressLocation, e) => {\n    this.handleMouseDown(key, pressLocation, e.touches[0]);\n  };\n\n  handleTouchMove = e => {\n    e.preventDefault();\n    this.handleMouseMove(e.touches[0]);\n  };\n\n  handleMouseMove = ({ pageX, pageY }) => {\n    const {\n      order,\n      lastPress,\n      isPressed,\n      mouseCircleDelta: [dx, dy]\n    } = this.state;\n\n    if (isPressed) {\n      const mouseXY = [pageX - dx, pageY - dy];\n\n      const col = clamp(Math.round(mouseXY[0] / width), 0, 2);\n      const row = clamp(\n        Math.round(mouseXY[1] / height),\n        0,\n        Math.floor(count / 2)\n      );\n\n      // if col === 1 && row === 0 => index = 0;\n      // if col === 2 && row === 1 => index = 1;\n      // if col === 1 && row === 2 => index = 2;\n      // if col === 0 && row === 1 => index = 3;\n\n      let to = null;\n\n      if (col === 1 && row === 0) {\n        to = 0;\n      } else if (col === 2 && row === 1) {\n        to = 1;\n      } else if (col === 1 && row === 2) {\n        to = 2;\n      } else if (col === 0 && row === 1) {\n        to = 3;\n      }\n\n      const from = order.findIndex(p => p.key === lastPress);\n\n      const newOrder =\n        typeof to === \"number\" && to !== from && reorder(order, from, to);\n\n      this.setState({\n        mouseXY,\n        order: newOrder ? newOrder : [...order],\n        from: newOrder ? from : this.state.from,\n        to: newOrder ? to : this.state.to\n      });\n    }\n  };\n\n  handleMouseDown = (key, [pressX, pressY], { pageX, pageY }) => {\n    this.setState({\n      lastPress: key,\n      isPressed: true,\n      mouseCircleDelta: [pageX - pressX, pageY - pressY],\n      mouseXY: [pressX, pressY]\n    });\n  };\n\n  handleMouseUp = () => {\n    this.setState({ isPressed: false, mouseCircleDelta: [0, 0] });\n\n    if (typeof this.props.onChange === \"function\") {\n      const { order, from, to } = this.state;\n      this.props.onChange(order, from, to);\n    }\n  };\n\n  render() {\n    const { order, lastPress, isPressed, mouseXY } = this.state;\n\n    return (\n      <div className=\"drag-pad\">\n        <div className=\"drag-pad-content\">\n          {order.map((player, key) => {\n            let style;\n            let x;\n            let y;\n            const visualPosition = order.findIndex(p => p.key === player.key);\n            // const visualPosition = order.indexOf(player.index);\n            if (player.key === lastPress && isPressed) {\n              [x, y] = mouseXY;\n              style = {\n                translateX: x,\n                translateY: y,\n                scale: spring(1.2, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            } else {\n              [x, y] = layout[visualPosition];\n              style = {\n                translateX: spring(x, springSetting2),\n                translateY: spring(y, springSetting2),\n                scale: spring(1, springSetting1),\n                boxShadow: spring(\n                  (x - (3 * width - 50) / 2) / 15,\n                  springSetting1\n                )\n              };\n            }\n            return (\n              <Motion key={player.key} style={style}>\n                {({ translateX, translateY, scale, boxShadow }) => (\n                  <div\n                    onMouseDown={this.handleMouseDown.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    onTouchStart={this.handleTouchStart.bind(null, player.key, [\n                      x,\n                      y\n                    ])}\n                    className=\"player-icon\"\n                    style={{\n                      backgroundColor: this.colors[player.key],\n                      WebkitTransform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      transform: `translate3d(${translateX}px, ${translateY}px, 0) scale(${scale})`,\n                      zIndex: player.key === lastPress ? 99 : visualPosition,\n                      boxShadow: `${boxShadow}px 5px 5px rgba(0,0,0,0.5)`\n                    }}\n                  >\n                    <UserOutlined />\n                    <span>{player.nickname}</span>\n                  </div>\n                )}\n              </Motion>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Modal } from 'antd';\nimport DragPad from '../common/dragPad/DragPad';\n\nexport default class ReorderPlayers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showDialog: this.props.visible,\n      order: props.players,\n    }\n\n    this.handleOnCancel = this.handleOnCancel.bind(this);\n    this.handleOnOk = this.handleOnOk.bind(this);\n    this.afterClose = this.afterClose.bind(this);\n    this.handleDragChange = this.handleDragChange.bind(this);\n  }\n\n  handleOnCancel() {\n    this.setState({\n      showDialog: false\n    });\n  }\n\n  handleOnOk() {\n    this.setState({\n      showDialog: false\n    });\n\n    const { onOk } = this.props;\n    if (typeof onOk === 'function') {\n      const { order } = this.state;\n      onOk(order);\n    }\n  }\n\n  afterClose() {\n    const { onAfterClose } = this.props;\n\n    if (typeof onAfterClose === 'function') {\n      onAfterClose();\n    }\n  }\n\n  handleDragChange(order, from, to) {\n    this.setState({\n      order,\n      from,\n      to\n    });\n  }\n\n  render() {\n    const { players } = this.props;\n    const { showDialog } = this.state;\n\n    return (\n      <Modal\n        title=\"Reorder Players\"\n        visible={showDialog}\n        destroyOnClose={true}\n        maskClosable={false}\n        width=\"600px\"\n        onOk={this.handleOnOk}\n        onCancel={this.handleOnCancel}\n        afterClose={this.afterClose}\n      >\n        <DragPad players={players} onChange={this.handleDragChange} />\n      </Modal>\n    );\n  }\n}","import NewLeagueDialog from '../dialogs/NewLeague';\nimport ResumeLeagueDialog from '../dialogs/ResumeLeague';\nimport ReorderPlayers from '../dialogs/ReorderPlayers';\n\nexport const Dialogs = {\n  NEW_LEAGUE: 'NEW_LEAGUE',\n  RESUME_LEAGUE: 'RESUME_LEAGUE',\n  REORDER_PLAYERS: 'REORDER_PLAYERS'\n};\n\nexport const DialogsMapping = {\n  [Dialogs.NEW_LEAGUE]: NewLeagueDialog,\n  [Dialogs.RESUME_LEAGUE]: ResumeLeagueDialog,\n  [Dialogs.REORDER_PLAYERS]: ReorderPlayers,\n};","import React from 'react';\nimport { DialogsMapping } from '../constants/dialogs';\n\nconst Dialog = ({\n    dialog,\n    dialogProps\n}) => {\n\n    const DialogEl = DialogsMapping[dialog];\n\n    return <DialogEl {...dialogProps} />;\n}\n\nexport default Dialog;\n\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport Dialog from './../dialogs/Dialog';\r\n\r\nconst MainMenu = (props) => {\r\n    return (\r\n        <ul className=\"app-menu\">\r\n            {props.items.map((item, index) => {\r\n                const { onClick, text, dialog, dialogProps, disabled } = item;\r\n\r\n                // the Dialog should not be instanced unless it's visible \r\n                // in some Dialogs there are calls to the DB\r\n                return <li key={index}>\r\n                    <Button onClick={onClick} size=\"large\" disabled={disabled} block>{text}</Button>\r\n                    {dialog && dialogProps.visible ? <Dialog dialog={dialog} dialogProps={dialogProps} /> : ''}\r\n                </li>;\r\n            })}\r\n        </ul>\r\n    );\r\n}\r\n\r\nexport default MainMenu;","import React, { Component } from 'react';\nimport { fire, auth } from '../firebase';\nimport withAuthorization from '../authentication/withAuthorization';\nimport MainMenu from './MainMenu';\nimport * as routes from './../constants/routes';\nimport { Dialogs } from './../constants/dialogs';\n\nclass Main extends Component {\n  // Dialogs visible states controling if the Dialog should be instansiated or not\n  // this outer state is for saving unnecessary access to the DB\n  state = {\n    activeLeagues: [],\n    newLeague: false,\n    resumeLeague: false\n  };\n\n  /* Create reference to activeLeagues in Firebase Database */\n  activeLeagues = fire.database().ref('leagues/list').orderByChild(\"active\").equalTo(true);\n\n  fetch() {\n    this.activeLeagues.on('value', snapshot => {\n      if (snapshot.val()) {\n        const userId = fire.auth().currentUser.uid;\n\n        // filtering leagues data by userId,\n        // TODO: check if possible to fix the data differently in the database for better queries\n        // TODO: fix the loader functionality    \n        this.setState({\n          activeLeagues: Object.values(snapshot.val())\n            .filter(({ players }) => Object.values(players)\n              .some(({ key }) => key === userId)),\n          loading: false\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.activeLeagues.off('value');\n  }\n\n\n  showResumeLeagueDialog() {\n    this.setState({\n      resumeLeague: true\n    });\n  }\n\n  closeResumeLeagueDialog(leagueID) {\n    this.setState({\n      resumeLeague: false\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  showNewLeagueDialog() {\n    this.setState({\n      newLeague: true\n    });\n  }\n\n  closeNewLeagueDialog(leagueID) {\n    this.setState({\n      newLeague: false\n    });\n\n    this.navigateToLeague(leagueID);\n  }\n\n  navigateToLeague(leagueID) {\n    if (leagueID) {\n      this.props.history.push(`${routes.LEAGUE}/` + leagueID)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"app-main\">\n        <MainMenu items={[\n          {\n            text: 'Resume League',\n            onClick: this.showResumeLeagueDialog.bind(this),\n            dialog: Dialogs.RESUME_LEAGUE,\n            disabled: this.state.activeLeagues.length === 0,\n            dialogProps: {\n              afterClose: this.closeResumeLeagueDialog.bind(this),\n              visible: this.state.resumeLeague,\n              activeLeagues: this.state.activeLeagues\n            }\n          }, {\n            text: 'Create League',\n            onClick: this.showNewLeagueDialog.bind(this),\n            dialog: Dialogs.NEW_LEAGUE,\n            dialogProps: {\n              afterClose: this.closeNewLeagueDialog.bind(this),\n              visible: this.state.newLeague\n            }\n          },\n          { text: 'Settings' },\n          { text: 'Scores' },\n          {\n            text: 'Sign Out',\n            onClick: auth.signOut\n          }\n        ]}\n        />\n      </div>\n    );\n  }\n}\n\nconst authCondition = (authUser) => !!authUser;\n\nexport default withAuthorization(authCondition)(Main);","export const CARDS = {\r\n  SPADE: 'SPADE',\r\n  HART: 'HART',\r\n  DIAMOND: 'DIAMOND',\r\n  CLUB: 'CLUB',\r\n  NT: 'NT'\r\n};","import React, { Component } from \"react\";\r\nimport { Form, Select } from \"antd\";\r\nimport { CARDS } from \"../../constants/cards\";\r\n\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nconst EditableContext = React.createContext();\r\n\r\nconst EditableFormRow = ({ form, index, ...props }) => (\r\n  <EditableContext.Provider value={form}>\r\n    <tr {...props} />\r\n  </EditableContext.Provider>\r\n);\r\n\r\nclass EditableCell extends Component {\r\n  state = {\r\n    editing: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.editable) {\r\n      document.addEventListener(\"click\", this.handleClickOutside, true);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props.editable) {\r\n      document.removeEventListener(\"click\", this.handleClickOutside, true);\r\n    }\r\n  }\r\n\r\n  getOptionList(editorType) {\r\n    if (editorType === \"bidWin\") {\r\n      return [...Array(15)].map((_, i) => {\r\n        const value = i - 1 < 0 ? \"\" : i - 1;\r\n        return (\r\n          <Option key={i} value={`${value}`}>\r\n            {value}\r\n          </Option>\r\n        );\r\n      });\r\n    } else if (editorType === \"trump\") {\r\n      return Object.values(CARDS).map((value, i) => {\r\n        return (\r\n          <Option key={i} value={`${value}`}>\r\n            {value}\r\n          </Option>\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  toggleEdit = () => {\r\n    const editing = !this.state.editing;\r\n    this.setState({ editing }, () => {\r\n      if (editing) {\r\n        this.input.focus();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleClickOutside = e => {\r\n    const { editing } = this.state;\r\n    if (\r\n      editing &&\r\n      this.cell !== e.target &&\r\n      !this.cell.contains(e.target) &&\r\n      e.target.tagName !== \"LI\"\r\n    ) {\r\n      setTimeout(this.toggleEdit, 300);\r\n    }\r\n  };\r\n\r\n  save = player => {\r\n    const { record, handleSave } = this.props;\r\n\r\n    setTimeout(() => {\r\n      this.form.validateFields((error, values) => {\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.toggleEdit();\r\n        handleSave({ ...record, ...values }, player);\r\n      });\r\n    }, 300);\r\n  };\r\n\r\n  render() {\r\n    const { editing } = this.state;\r\n    const {\r\n      editable,\r\n      editorType,\r\n      dataIndex,\r\n      player,\r\n      record,\r\n      index,\r\n      handleSave,\r\n      ...restProps\r\n    } = this.props;\r\n\r\n    return (\r\n      <td ref={node => (this.cell = node)} {...restProps}>\r\n        {editable ? (\r\n          <EditableContext.Consumer>\r\n            {form => {\r\n              this.form = form;\r\n              return editing ? (\r\n                <FormItem style={{ margin: 0 }}>\r\n                  {form.getFieldDecorator(dataIndex, {\r\n                    // rules: [{\r\n                    //   required: true,\r\n                    //   message: `${title} is required.`,\r\n                    // }],\r\n                    initialValue: record[dataIndex]\r\n                  })(\r\n                    <Select\r\n                      ref={node => (this.input = node)}\r\n                      // onPressEnter={this.save}\r\n                      onSelect={() => this.save(player)}\r\n                      defaultOpen={true}\r\n                      showArrow={false}\r\n                      size={\"small\"}\r\n                      style={{ width: 60 }}\r\n                    >\r\n                      {this.getOptionList(editorType)}\r\n                    </Select>\r\n                  )}\r\n                </FormItem>\r\n              ) : (\r\n                <div\r\n                  className=\"editable-cell-value-wrap\"\r\n                  // style={{ paddingRight: 24 }}\r\n                  onClick={this.toggleEdit}\r\n                >\r\n                  {restProps.children}\r\n                </div>\r\n              );\r\n            }}\r\n          </EditableContext.Consumer>\r\n        ) : (\r\n          restProps.children\r\n        )}\r\n      </td>\r\n    );\r\n  }\r\n}\r\n\r\nexport { EditableFormRow, EditableCell };\r\n","import React from 'react';\n\nexport const Spade = () => (\n\t<svg  x=\"0px\" y=\"0px\" viewBox=\"0 0 511.96 511.96\" style={{enableBackground:'new 0 0 511.96 511.96'}} width=\"1em\" height=\"1em\">\n\t\t<g>\n\t\t\t<path d=\"M302.728,390.351c16.49,15.934,26.368,25.759,55.905,24.541c43.494-1.783,83.871-25.459,106.364-62.729\n\t\t\t\tc38.78-64.247,17.576-128.53-23.702-166.824L272.705,6.528c-9.507-8.704-24.082-8.704-33.589,0L68.073,185.34\n\t\t\t\tc-40.13,37.226-57.256,99.037-23.729,161.483c21.283,39.645,61.767,66.357,106.726,68.087c29.281,1.121,40.801-8.66,57.759-24.488\n\t\t\t\tc4.458-4.167,11.767-1.033,11.767,5.076l0.009,29.987c0,16.172-4.228,32.071-12.253,46.115l-15.519,27.154\n\t\t\t\tc-3.354,5.888,0.892,13.206,7.671,13.206h110.813c6.78,0,11.034-7.318,7.671-13.206l-15.519-27.154\n\t\t\t\tc-8.024-14.045-12.244-29.943-12.244-46.115v-30.296C291.226,389.213,298.429,386.202,302.728,390.351\"/>\n\t\t\t<path style={{fill:'#2A2D33'}}  d=\"M427.21,329.362c-8.701,14.419-21.869,26.091-37.482,33.362c-10.397,4.841-21.597,7.606-32.91,8.072\n\t\t\t\tc-4.871,0.201-8.657,4.312-8.457,9.184c0.201,4.871,4.312,8.657,9.184,8.457c13.661-0.563,27.144-3.891,39.635-9.707\n\t\t\t\tc18.759-8.735,34.611-22.785,45.145-40.244c19.021-31.51,20.189-64.061,7.087-94.822c-1.911-4.485-7.096-6.573-11.581-4.662\n\t\t\t\tc-4.485,1.911-6.573,7.096-4.662,11.581C444.131,276.316,443.177,302.911,427.21,329.362z\"/>\n\t\t</g>\n\t</svg>\n);\n\nexport const Hart = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 510.977 510.977\" style={{enableBackground:'new 0 0 510.977 510.977'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path style={{fill:'#D71E00'}} d=\"M255.22,105.177c19.535-49.77,61.325-87.79,113.231-87.79c43.705,0,79.625,23.111,108.871,54.44\n        c38.859,41.622,56.17,137.216-15.863,209.24c-36.546,36.546-205.815,212.524-205.815,212.524S86.384,317.613,49.838,281.066\n        c-72.033-72.024-55.578-167.618-15.863-209.24c29.581-31.002,65.165-54.44,108.871-54.44\n        C194.751,17.386,235.685,55.407,255.22,105.177\"/>\n      <path style={{fill:'#B21606'}} d=\"M429.848,94.824c26.006,21.865,39.538,63.103,31.858,97.341c-0.675,2.978-1.395,6.021-2.154,9.091\n        c-1.17,4.733,1.718,9.518,6.45,10.689c4.733,1.17,9.518-1.718,10.689-6.45c0.787-3.183,1.534-6.339,2.238-9.446\n        c9.114-40.635-6.622-88.592-37.718-114.736c-16.942-14.251-37.574-20.273-68.03-20.273c-4.875,0-8.828,3.952-8.828,8.828\n        s3.952,8.828,8.828,8.828C399.8,78.694,416.45,83.554,429.848,94.824z\"/>\n    </g>\n  </svg>\n);\n\nexport const Diamond = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <polygon style={{fill:'#D71E00'}} points=\"256,0 45.714,256 256,512 466.286,256 \t\"/>\n      <path style={{fill:'#B21606'}} d=\"M248.872,448.656c-3.162,3.937-2.533,9.692,1.404,12.853c3.937,3.162,9.692,2.533,12.853-1.404\n        l64-79.698c3.162-3.937,2.533-9.692-1.404-12.853c-3.937-3.162-9.692-2.533-12.853,1.404L248.872,448.656z\"/>\n    </g>\n  </svg>\n);\n\nexport const Club = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 511.998 511.998\" style={{enableBackground: 'new 0 0 511.998 511.998'}} width=\"1em\" height=\"1em\">\n    <g>\n      <path d=\"M419.381,199.229c-26.651-12.378-51.541-12.674-74.177-7.186c18.441-21.827,29.058-50.472,27.396-81.642\n        C369.438,51,320.017,2.36,260.58,0.087c-66.578-2.542-121.353,50.67-121.353,116.682c0,28.699,10.393,54.937,27.567,75.273\n        c-22.636-5.488-47.526-5.192-74.177,7.186c-41.023,19.061-69.569,59.401-70.153,104.628\n        c-0.835,65.204,51.757,118.317,116.763,118.317c31.412,0,59.859-12.459,80.842-32.633v34.403c0,16.501-4.303,32.714-12.495,47.041\n        l-15.755,27.576c-3.422,5.991,0.907,13.438,7.797,13.438h112.766c6.899,0,11.219-7.446,7.797-13.438l-15.755-27.576\n        c-8.183-14.327-12.495-30.54-12.495-47.041V389.54c20.992,20.175,49.439,32.633,80.842,32.633\n        c65.006,0,117.607-53.113,116.763-118.317C488.95,258.629,460.403,218.289,419.381,199.229\"/>\n      <path style={{fill:'#2A2D33'}} d=\"M423.915,355.877c-13.621,13.805-31.752,21.385-51.142,21.385c-4.961,0-8.982,4.022-8.982,8.982\n        c0,4.961,4.022,8.982,8.982,8.982c24.196,0,46.934-9.506,63.927-26.729c16.991-17.2,26.197-40.066,25.888-64.288\n        c-0.063-4.96-4.136-8.93-9.096-8.867c-4.96,0.063-8.93,4.136-8.867,9.096C444.872,323.859,437.529,342.095,423.915,355.877z\"/>\n    </g>\n  </svg>  \n);\n\nexport const ChangePlayers = () => (\n  <svg x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} width=\"1em\" height=\"1em\">\n    <g>\n      <g>\n        <path d=\"M170.256,403.875c10.65-12.234,17.122-28.196,17.122-45.652c0-38.393-31.234-69.627-69.627-69.627\n          c-14.451,0-27.886,4.428-39.024,11.994c-1.632-10.049-2.463-20.254-2.463-30.537c0-49.249,18.842-95.868,53.054-131.273\n          c25.408-26.294,57.27-44.329,92.103-52.568l-23.142,27.868l23.133,19.21l59.366-71.49L201.539,17.43l-14.69,26.236l24.912,13.95\n          c-39.327,9.833-75.273,30.476-104.065,60.27c-39.659,41.041-61.5,95.081-61.5,152.168c0,20.2,2.752,40.155,8.17,59.414\n          c-3.996,8.772-6.241,18.504-6.241,28.756c0,17.491,6.497,33.483,17.185,45.726c-37.719,14.016-64.668,50.375-64.668,92.914v15.034\n          h234.473v-15.034C235.117,454.25,208.078,417.838,170.256,403.875z M117.752,318.665c21.813,0,39.558,17.746,39.558,39.558\n          s-17.746,39.558-39.559,39.558c-21.812,0-39.557-17.746-39.557-39.558S95.94,318.665,117.752,318.665z M32.362,481.828\n          c6.879-30.85,34.471-53.977,67.363-53.977h36.311c32.892,0,60.484,23.128,67.363,53.977H32.362z\"/>\n      </g>\n    </g>\n    <g>\n      <g>\n        <path d=\"M511.357,208.266c0-42.611-27.04-79.025-64.86-92.988c10.65-12.233,17.122-28.196,17.122-45.652\n          C463.619,31.234,432.385,0,393.992,0c-38.393,0-69.627,31.234-69.627,69.626c0,17.491,6.497,33.483,17.186,45.726\n          c-37.719,14.016-64.667,50.375-64.667,92.915v15.034h171.669c3.701,14.892,5.576,30.234,5.576,45.751\n          c0,45.405-16.341,89.291-46.014,123.576c-21.289,24.598-48.406,43.143-78.51,54.073l19.818-31.008l-25.335-16.193l-50.044,78.3\n          L358.173,512l11.325-27.855l-25.967-10.556c33.429-12.822,63.523-33.788,87.321-61.284\n          c34.401-39.748,53.347-90.623,53.347-143.254c0-15.46-1.611-30.777-4.793-45.751h31.952V208.266z M393.992,30.069\n          c21.813,0,39.558,17.746,39.558,39.557c0,21.813-17.746,39.558-39.558,39.558s-39.558-17.746-39.558-39.558\n          C354.434,47.814,372.179,30.069,393.992,30.069z M308.603,193.232c6.879-30.851,34.471-53.978,67.363-53.978h36.311\n          c32.892,0,60.484,23.128,67.363,53.978H308.603z\"/>\n      </g>\n    </g>\n    <g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n  </svg>\n);\n","import React, { Component } from \"react\";\r\nimport { Radio } from \"antd\";\r\nimport Icon from \"@ant-design/icons\";\r\nimport { Spade, Hart, Diamond, Club } from \"./Icons\";\r\nimport \"./Pad.css\";\r\n\r\nclass CardsPad extends Component {\r\n  onChange = e => this.props.onChange(e.target.value);\r\n\r\n  render() {\r\n    const { isMobile, trump } = this.props;\r\n\r\n    return (\r\n      <Radio.Group\r\n        buttonStyle=\"solid\"\r\n        className=\"cards-pad\"\r\n        size={`${isMobile ? \"small\" : \"\"}`}\r\n        value={trump}\r\n        onChange={this.onChange}\r\n      >\r\n        <Radio.Button value={\"SPADE\"} className=\"spade card-btn\">\r\n          <Icon component={Spade} />\r\n        </Radio.Button>\r\n        <Radio.Button value={\"HART\"} className=\"hart card-btn\">\r\n          <Icon component={Hart} />\r\n        </Radio.Button>\r\n        <Radio.Button value={\"DIAMOND\"} className=\"diamond card-btn\">\r\n          <Icon component={Diamond} />\r\n        </Radio.Button>\r\n        <Radio.Button value={\"CLUB\"} className=\"club card-btn\">\r\n          <Icon component={Club} />\r\n        </Radio.Button>\r\n        <Radio.Button value={\"NT\"} className=\"NT card-btn\">\r\n          <span>NT</span>\r\n        </Radio.Button>\r\n      </Radio.Group>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CardsPad;\r\n","import React, { Component } from \"react\";\nimport { Button, Modal } from \"antd\";\nimport Icon, { QuestionOutlined } from \"@ant-design/icons\";\nimport { Spade, Hart, Diamond, Club } from \"./Icons\";\nimport \"./Modal.css\";\n\nclass CardsModal extends Component {\n  state = { visible: false };\n\n  showModal = () => {\n    this.setState({\n      visible: true\n    });\n  };\n\n  handleCancel = () => {\n    this.setState({\n      visible: false\n    });\n  };\n\n  onTrumpSelect(value) {\n    this.props.onChange(value);\n    this.setState({\n      visible: false\n    });\n  }\n\n  trumpIconMap = {\n    SPADE: Spade,\n    HART: Hart,\n    DIAMOND: Diamond,\n    CLUB: Club,\n    NT: \"NT\"\n  };\n\n  render() {\n    const { trump, disabled } = this.props;\n\n    return (\n      <div className=\"cards-modal\">\n        trump\n        <Button\n          ghost\n          className=\"card-btn\"\n          onClick={this.showModal}\n          disabled={disabled}\n        >\n          {trump ? (\n            trump === \"NT\" ? (\n              \"NT\"\n            ) : (\n              <Icon component={this.trumpIconMap[trump]} />\n            )\n          ) : (\n            <QuestionOutlined />\n          )}\n        </Button>\n        <Modal\n          footer={null}\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          className=\"cards-modal-dialog\"\n        >\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, \"SPADE\")}\n          >\n            <Icon component={Spade} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, \"HART\")}\n          >\n            <Icon component={Hart} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, \"DIAMOND\")}\n          >\n            <Icon component={Diamond} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, \"CLUB\")}\n          >\n            <Icon component={Club} />\n          </Button>\n          <Button\n            className=\"card-btn\"\n            onClick={this.onTrumpSelect.bind(this, \"NT\")}\n          >\n            NT\n          </Button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default CardsModal;\n","import React, { Component } from 'react';\r\nimport { Button } from 'antd';\r\nimport './Pad.css';\r\n\r\nexport default class NumbersPad extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMore: false\r\n    };\r\n\r\n    this.toggleMore = this.toggleMore.bind(this);\r\n    this.onBtnClick = this.onBtnClick.bind(this);\r\n  }\r\n\r\n  toggleMore() {\r\n    this.setState({\r\n      showMore: !this.state.showMore\r\n    });\r\n  }\r\n\r\n  onBtnClick(e) {\r\n    this.props.onSelect(e.target.textContent * 1);\r\n  }\r\n\r\n  render() {\r\n    const { isMobile, disabled } = this.props;\r\n    const btnSize = isMobile ? 'default' : 'large';\r\n    const { showMore } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"dial-pad\">\r\n          {!showMore ? this.getButtons(0, 10) : this.getButtons(10, 4)}\r\n          <Button size={btnSize} onClick={this.toggleMore} className=\"more-less-btn\" disabled={disabled}>{!showMore ? 'More...' : 'Less...'}</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getButtons = (baseNum, amount) => {\r\n    const { isMobile, disabled, disabledNumber } = this.props;\r\n    const btnSize = isMobile ? 'default' : 'large';\r\n\r\n    return Array(amount).fill(baseNum).map((num, i) => (\r\n      <Button key={i} onClick={this.onBtnClick} size={btnSize} disabled={disabled || disabledNumber === (i + num)}>{i + num}</Button>\r\n    ))\r\n  }\r\n};","import React, { Component } from 'react';\n\nexport const CSS_TRANSITIONS = {\n  FADE_IN: 'fade-in',\n  SLIDE_UP: 'slide-up'\n}\n\nexport default class Css extends Component {\n  componentDidMount() {\n    const type = this.props.type;\n    this.div.classList.add(type);\n    setTimeout(() => this.div.classList.remove(type), 400);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.children !== this.props.children) {\n      const type = this.props.type;\n      this.div.classList.add(type);\n      setTimeout(() => this.div.classList.remove(type), 400);\n    }\n  }\n  render() {\n    return (\n      <div\n        className={''}\n        ref={(el) => this.div = el}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport './Pad.css';\nimport Css, { CSS_TRANSITIONS } from '../transition/Css';\n\nconst PlayerPad = (props) => {\n  const { name, bid, won, score } = props;\n\n  return (\n    <div className=\"player-pad\">\n      <div className=\"pad-name\">\n        {name}&nbsp;\n        {score !== undefined &&\n          <span className=\"pad-score\">\n            [<Css type={CSS_TRANSITIONS.SLIDE_UP}>{score}</Css>]\n        </span>}\n      </div>\n\n      <div className=\"pad-bid-won\">\n        Bid: {typeof bid === 'number' ? bid : ' '} Won: {won}\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerPad;","export const INPUT_MODE = {\r\n  BID: 'BID',\r\n  WON: 'WON'\r\n};\r\n\r\nexport const GAME_STATUS = {\r\n  ACTIVE: 'ACTIVE',\r\n  FINISHED: 'FINISHED'\r\n};\r\n\r\n","import React from 'react';\nimport './TwoWayArrow.css';\n\nexport const TWO_WAY_ARROW_DIRECTION = {\n  TOP: 'top',\n  BOTTOM: 'bottom'\n};\n\n// TODO: add option for horizontal arrow \n// https://codepen.io/hakimel/pen/gfIsk \n// https://codepen.io/Sloebel/pen/MdLKdY\n\nconst TwoWayArrow = (props) => {\n  return (\n    <div className={`arrow-indicator ${props.direction || ''}`}>\n      <span><i></i><i></i></span>\n      <i></i>\n      <span><i></i><i></i></span>\n    </div>\n  )\n};\n\nexport default TwoWayArrow;","import React, { Component } from \"react\";\nimport { Radio, Switch, Badge, Row, Col, Modal, message, Button } from \"antd\";\nimport Icon from \"@ant-design/icons\";\nimport CardsPad from \"../cards/Pad\";\nimport CardsModal from \"../cards/Modal\";\nimport { ChangePlayers } from \"../cards/Icons\";\nimport NumbersPad from \"../numbers/Pad\";\nimport PlayerPad from \"../player/Pad\";\nimport { INPUT_MODE } from \"../../constants/states\";\nimport \"./Pad.css\";\nimport Dialog from \"../../dialogs/Dialog\";\nimport { Dialogs } from \"../../constants/dialogs\";\nimport { PlayersContext } from \"../../game/GameTab\";\nimport Css, { CSS_TRANSITIONS } from \"../transition/Css\";\nimport TwoWayArrow, {\n  TWO_WAY_ARROW_DIRECTION\n} from \"../twoWayArrow/TwoWayArrow\";\n\nconst confirm = Modal.confirm;\nmessage.config({\n  top: 100,\n  maxCount: 3\n});\n\nclass GamePad extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedPlayer: undefined,\n      reorderPlayersDialogVisible: false\n    };\n\n    this.handleSwitchMode = this.handleSwitchMode.bind(this);\n    this.handleCardsPadChange = this.handleCardsPadChange.bind(this);\n    this.handleNumberSelect = this.handleNumberSelect.bind(this);\n    this.setSelectedPlayer = this.setSelectedPlayer.bind(this);\n    this.showChangeHighestBidderConfirm = this.showChangeHighestBidderConfirm.bind(\n      this\n    );\n    this.showChangePlayerDialog = this.showChangePlayerDialog.bind(this);\n    this.handleReorderPlayersAfterClose = this.handleReorderPlayersAfterClose.bind(\n      this\n    );\n  }\n\n  handleSwitchMode(checked) {\n    const { allRounds, currentRound, onChange } = this.props;\n    const roundData = allRounds.length && allRounds[currentRound - 1];\n    const { trump, segment } = roundData;\n\n    if (segment === 0) {\n      return message.warning(\"Total Bids are 13?!?!\");\n    }\n\n    const everyoneBid = this.isAllBids(roundData);\n\n    if (trump && everyoneBid) {\n      this.setState({\n        selectedPlayer: undefined\n      });\n      onChange({\n        ...roundData,\n        inputMode: checked ? INPUT_MODE.WON : INPUT_MODE.BID\n      });\n    } else {\n      message.warning(\"Bids are not completed\");\n    }\n  }\n\n  setSelectedPlayer(e) {\n    if (e.target.type === \"radio\") {\n      this.setState({\n        selectedPlayer: e.target.value\n      });\n    }\n  }\n\n  handleCardsPadChange(trump) {\n    const { allRounds, currentRound, onChange } = this.props;\n    const roundData = allRounds.length && allRounds[currentRound - 1];\n    const { inputMode } = roundData;\n\n    if (inputMode !== INPUT_MODE.WON) {\n      onChange({ ...roundData, trump });\n    }\n  }\n\n  handleNumberSelect(num) {\n    const { players, allRounds, currentRound, onChange } = this.props;\n    const roundData = allRounds.length && allRounds[currentRound - 1];\n    const { inputMode, highestBidder } = roundData;\n    const { selectedPlayer } = this.state;\n    const mode = inputMode === INPUT_MODE.BID ? \"bid\" : \"won\";\n    const prop = mode + selectedPlayer;\n\n    const newRoundData = {};\n\n    if (inputMode === INPUT_MODE.BID) {\n      if (currentRound === 13) {\n        if (\n          (num >= 5 && !roundData[`bid${highestBidder}`]) ||\n          roundData[`bid${highestBidder}`] < num\n        ) {\n          newRoundData.highestBidder = selectedPlayer;\n        }\n      } else {\n        const nextPlayer = this.getNextPlayer(selectedPlayer, players);\n\n        if (\n          roundData[`bid${nextPlayer}`] === \"\" ||\n          nextPlayer === highestBidder\n        ) {\n          // validate first bid is more then 5\n          if (\n            (!highestBidder && highestBidder !== 0) ||\n            highestBidder === selectedPlayer\n          ) {\n            if (num < 5) {\n              return message.warning(\"First Bid should be more then 5\");\n            } else {\n              newRoundData.highestBidder = selectedPlayer;\n            }\n          } else if (num >= 5) {\n            this.showChangeHighestBidderConfirm(\n              onChange,\n              roundData,\n              prop,\n              num,\n              selectedPlayer,\n              players\n            );\n          } else if (\n            !Number.isInteger(\n              roundData[`bid${this.getBeforePlayer(selectedPlayer, players)}`]\n            )\n          ) {\n            return message.warning(\"The Bids are not in the right order!!\");\n          }\n        } else {\n          return message.warning(\n            \"The Next Player already Bid, Can not change bid\"\n          );\n        }\n      }\n    }\n\n    newRoundData[prop] = num;\n    onChange({ ...roundData, ...newRoundData }, selectedPlayer);\n  }\n\n  calculateDisableNum() {\n    const { players, allRounds, currentRound } = this.props;\n    const roundData = allRounds.length && allRounds[currentRound - 1];\n    const { highestBidder, inputMode } = roundData;\n    const { selectedPlayer } = this.state;\n\n    if (typeof selectedPlayer !== \"number\") return undefined;\n\n    if (inputMode !== INPUT_MODE.BID) return undefined;\n\n    if (this.getNextPlayer(selectedPlayer, players) !== highestBidder)\n      return undefined;\n\n    // get the list of players bided before\n    const beforePlayers = this.getBeforePlayers(selectedPlayer, players);\n\n    // loop through 3 players before selectedPlayer\n    // if all bid already return segment else return undefined\n\n    let bids = 0;\n\n    for (const player of beforePlayers) {\n      const aBid = roundData[`bid${player}`];\n      if (aBid === null) return undefined;\n\n      bids += aBid;\n    }\n\n    return 13 - bids;\n  }\n\n  showChangeHighestBidderConfirm(\n    onChange,\n    roundData,\n    prop,\n    num,\n    selectedPlayer,\n    players\n  ) {\n    const getBeforePlayer = this.getBeforePlayer;\n\n    confirm({\n      title: \"Change Highest Bidder?\",\n      content: \"(will reset the rest of the bids)\",\n      okType: \"danger\",\n      onOk() {\n        onChange(\n          {\n            ...roundData,\n            bid0: null,\n            bid1: null,\n            bid2: null,\n            bid3: null,\n            [prop]: num,\n            highestBidder: selectedPlayer\n          },\n          selectedPlayer\n        );\n      },\n      onCancel() {\n        if (!roundData[`bid${getBeforePlayer(selectedPlayer, players)}`]) {\n          message.warning(\"The Bids are not in the right order!!\");\n          onChange({ ...roundData }, selectedPlayer);\n        } else {\n          onChange({ ...roundData, [prop]: num }, selectedPlayer);\n        }\n      }\n    });\n  }\n\n  getNextPlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(player => player.index === selectedPlayer);\n    const nextIndex = index + 1 > 3 ? index + 1 - 4 : index + 1;\n\n    return players[nextIndex].index;\n  };\n\n  getBeforePlayer = (selectedPlayer, players) => {\n    const index = players.findIndex(player => player.index === selectedPlayer);\n    const beforeIndex = index - 1 > -1 ? index - 1 : index - 1 + 4;\n\n    return players[beforeIndex].index;\n  };\n\n  getBeforePlayers = (selectedPlayer, players) => {\n    const index = players.findIndex(player => player.index === selectedPlayer);\n    return players\n      .filter(player => index !== player.index)\n      .map(player => player.index);\n  };\n\n  // getAfterPlayers = (selectedPlayer) => [1, 2, 3].map(afterPlayer => selectedPlayer + afterPlayer > 4 ? selectedPlayer + afterPlayer - 4 : selectedPlayer + afterPlayer);\n\n  getPlayerAggregateScore = (roundsData, roundIndex, playerIndex) => {\n    const roundData = roundsData[roundIndex];\n\n    if (!roundData) {\n      return 0;\n    }\n\n    const aggregateScore = roundData[`aggregateScore${playerIndex}`];\n    // if round.fell == true, look for round before\n    if (typeof aggregateScore === \"number\" && !roundData.fell) {\n      return aggregateScore;\n    }\n\n    return this.getPlayerAggregateScore(\n      roundsData,\n      roundIndex - 1,\n      playerIndex\n    );\n  };\n\n  getPlayersButtons = () => {\n    const { allRounds, currentRound, players, isMobile } = this.props;\n    const currentRoundData = allRounds.length && allRounds[currentRound - 1];\n    const highestBidder = currentRoundData.highestBidder;\n\n    return players.map(({ index: playerIndex, playerName }, i) => {\n      return (\n        <Badge key={playerIndex} dot={highestBidder === playerIndex}>\n          <Radio.Button value={playerIndex}>\n            <PlayerPad\n              name={playerName}\n              bid={currentRoundData[`bid${playerIndex}`]}\n              won={currentRoundData[`won${playerIndex}`]}\n              score={\n                isMobile\n                  ? this.getPlayerAggregateScore(\n                      allRounds,\n                      currentRound - 1,\n                      playerIndex\n                    )\n                  : undefined\n              }\n            />\n          </Radio.Button>\n        </Badge>\n      );\n    });\n  };\n\n  render() {\n    const { isMobile, allRounds, currentRound } = this.props;\n    const currentRoundData = allRounds.length && allRounds[currentRound - 1];\n    const {\n      round,\n      check,\n      trump,\n      segment,\n      inputMode,\n      fell,\n      factor\n    } = currentRoundData;\n    const { selectedPlayer, reorderPlayersDialogVisible } = this.state;\n    const isAllBids = this.isAllBids(currentRoundData);\n    const playersButtons = this.getPlayersButtons();\n\n    if (isMobile) {\n      return (\n        <Radio.Group\n          buttonStyle=\"solid\"\n          className={`game-pad-container ${fell ? \"round-fell\" : \"\"}`}\n          onChange={this.setSelectedPlayer}\n          value={selectedPlayer}\n        >\n          <h3>Round: {round}</h3>\n          <Row type=\"flex\" justify=\"space-around\">\n            <Col>\n              <Switch\n                onChange={this.handleSwitchMode}\n                checkedChildren=\" Won \"\n                unCheckedChildren=\" Bid \"\n                checked={inputMode === INPUT_MODE.WON}\n              />\n              <div className=\"segment\">\n                Bids:{\" \"}\n                <Css type={CSS_TRANSITIONS.FADE_IN}>\n                  {!isAllBids ? `${segment && 13 + segment}` : segment}\n                </Css>\n                <TwoWayArrow\n                  direction={\n                    isAllBids &&\n                    (segment > 0\n                      ? TWO_WAY_ARROW_DIRECTION.TOP\n                      : TWO_WAY_ARROW_DIRECTION.BOTTOM)\n                  }\n                />\n              </div>\n              <div>Check: {check ? \"yes\" : \"no\"}</div>\n              <Css type={CSS_TRANSITIONS.FADE_IN}>\n                {fell ? <div className=\"fell-indicator\">round fell</div> : \"\"}\n              </Css>\n              {!fell && factor > 1 && (\n                <div className=\"factor-indicator\">{`x${factor}`}</div>\n              )}\n            </Col>\n            <Col className=\"item item2\">{playersButtons[0]}</Col>\n            <Col>\n              <CardsModal\n                trump={trump}\n                onChange={this.handleCardsPadChange}\n                disabled={inputMode === INPUT_MODE.WON}\n              />\n            </Col>\n          </Row>\n          <Row type=\"flex\" justify=\"space-around\">\n            <Col className=\"item item4\">{playersButtons[3]}</Col>\n            <Col>\n              <NumbersPad\n                isMobile={isMobile}\n                disabledNumber={this.calculateDisableNum()}\n                onSelect={this.handleNumberSelect}\n                disabled={selectedPlayer === undefined}\n              />\n            </Col>\n            <Col className=\"item item6\">{playersButtons[1]}</Col>\n          </Row>\n          <Row type=\"flex\" justify=\"center\" style={{ position: \"relative\" }}>\n            <Col className=\"item item8\">{playersButtons[2]}</Col>\n            {round === 1 && inputMode === INPUT_MODE.BID && (\n              <div>\n                <Button\n                  type=\"dashed\"\n                  shape=\"circle\"\n                  className=\"change-players-btn\"\n                  onClick={this.showChangePlayerDialog}\n                >\n                  <Icon component={ChangePlayers} />\n                </Button>\n                {reorderPlayersDialogVisible && (\n                  <PlayersContext.Consumer>\n                    {({ players, reorderPlayers }) => (\n                      <Dialog\n                        dialog={Dialogs.REORDER_PLAYERS}\n                        dialogProps={{\n                          onOk: reorderPlayers,\n                          onAfterClose: this.handleReorderPlayersAfterClose,\n                          visible: reorderPlayersDialogVisible,\n                          players\n                        }}\n                      />\n                    )}\n                  </PlayersContext.Consumer>\n                )}\n              </div>\n            )}\n          </Row>\n        </Radio.Group>\n      );\n    }\n\n    return (\n      <Radio.Group\n        buttonStyle=\"solid\"\n        className=\"game-pad-container\"\n        onChange={this.setSelectedPlayer}\n        value={selectedPlayer}\n      >\n        <div className=\"item item1\">\n          <Switch\n            onChange={this.handleSwitchMode}\n            checkedChildren=\" Won \"\n            unCheckedChildren=\" Bid \"\n            checked={inputMode === INPUT_MODE.WON}\n          />\n          <div>Bids: {segment}</div>\n          <div>Check: {check ? \"yes\" : \"no\"}</div>\n        </div>\n        <div className=\"item item2\">{playersButtons[0]}</div>\n\n        <CardsPad\n          isMobile={isMobile}\n          trump={trump}\n          onChange={this.handleCardsPadChange}\n        />\n        <div className=\"item item4\">{playersButtons[3]}</div>\n\n        <NumbersPad\n          isMobile={isMobile}\n          disabledNumber={this.calculateDisableNum()}\n          onSelect={this.handleNumberSelect}\n          disabled={selectedPlayer === undefined}\n        />\n        <div className=\"item item6\">{playersButtons[1]}</div>\n\n        <div className=\"item item8\">{playersButtons[2]}</div>\n      </Radio.Group>\n    );\n  }\n\n  showChangePlayerDialog() {\n    this.setState({\n      reorderPlayersDialogVisible: true\n    });\n  }\n\n  handleReorderPlayersAfterClose() {\n    this.setState({\n      reorderPlayersDialogVisible: false\n    });\n  }\n\n  // TODO: memoize it\n  isAllBids = roundData =>\n    Array(4)\n      .fill(1)\n      .every((_, i) => typeof roundData[`bid${i}`] === \"number\");\n}\n\nexport default GamePad;\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\nimport { Spade, Hart, Diamond, Club } from \"../cards/Icons\";\r\nimport { CARDS } from \"../../constants/cards\";\r\n\r\nexport const cardsRenderer = text => {\r\n  let card;\r\n  switch (text) {\r\n    case CARDS.SPADE:\r\n      card = <Icon component={Spade} />;\r\n      break;\r\n    case CARDS.HART:\r\n      card = <Icon component={Hart} />;\r\n      break;\r\n    case CARDS.DIAMOND:\r\n      card = <Icon component={Diamond} />;\r\n      break;\r\n    case CARDS.CLUB:\r\n      card = <Icon component={Club} />;\r\n      break;\r\n    case CARDS.NT:\r\n      card = \"NT\";\r\n      break;\r\n  }\r\n  return {\r\n    children: card\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst Loader = () => <div className=\"full-view loader\"><Spin size=\"large\" style={{ width: '100%', position: 'relative', top: '50%' }} /></div>;\r\n\r\nexport default Loader;","import React from \"react\";\nimport { Row, Col } from \"antd\";\nimport { TrophyTwoTone } from \"@ant-design/icons\";\nimport { cardsRenderer } from \"./renderers\";\n\nconst MobileTable = props => {\n  const {\n    dataSource: rounds,\n    players,\n    currentRound,\n    leagueScores,\n    gameID\n  } = props;\n\n  const onDragEnd = (fromIndex, toIndex) => {\n    console.log(\"onDragEnd\");\n  };\n\n  return (\n    <div className=\"game-table\">\n      <h3 className=\"game-header\">Game {gameID}</h3>\n      <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n        <Col span={4}>\n          <div className=\"table-cell\">round</div>\n        </Col>\n        {getTableHeaders(players)}\n      </Row>\n\n      {rounds.map((round, i) => (\n        <Row\n          gutter={1}\n          className={`table-row ${\n            currentRound - 1 === i ? \"current-round\" : \"\"\n          } ${round.fell ? \"round-fell\" : \"\"}`}\n          key={i}\n        >\n          <Col span={4}>\n            <div className=\"table-cell\">\n              {i + 1}{\" \"}\n              {round.factor > 1 && (\n                <span className=\"round-factor\">{`x${round.factor}`}</span>\n              )}\n            </div>\n          </Col>\n          {getRoundCol(players, round)}\n        </Row>\n      ))}\n\n      <Row gutter={1} className={`table-row`}>\n        <Col span={4}>\n          <div className=\"table-cell\">\n            <TrophyTwoTone twoToneColor=\"#52c41a\" />\n          </div>\n        </Col>\n        {getLeagueScoresCol(players, leagueScores)}\n      </Row>\n    </div>\n  );\n};\n\nexport default MobileTable;\n\n///////////////////////////\n//\n// helpers\n//\n///////////////////////////\n\nexport const getTableHeaders = players =>\n  players.map(({ index: playerIndex, playerName }) => (\n    <Col key={playerIndex} span={5}>\n      <div className=\"table-cell\">{playerName}</div>\n    </Col>\n  ));\n\nconst getRoundCol = (players, roundData) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div\n        className={`table-cell score-cell ${\n          roundData[`bid${playerIndex}`] !== roundData[`won${playerIndex}`]\n            ? \"fell\"\n            : \"\"\n        } ${playerIndex === roundData.highestBidder ? \"highest-bidder\" : \"\"}`}\n      >\n        {roundData[`aggregateScore${playerIndex}`]}\n        {playerIndex === roundData.highestBidder && (\n          <span className=\"trump\">\n            {cardsRenderer(roundData.trump).children}\n          </span>\n        )}\n      </div>\n    </Col>\n  ));\n\nconst getLeagueScoresCol = (players, leagueScores) =>\n  players.map(({ index: playerIndex }) => (\n    <Col span={5} key={playerIndex}>\n      <div className={`table-cell`}>\n        {leagueScores[`leagueScore${playerIndex}`] !== \"\"\n          ? leagueScores[`leagueScore${playerIndex}`]\n          : \"-\"}\n      </div>\n    </Col>\n  ));\n","import React, { Component } from \"react\";\nimport { Button } from \"antd\";\nimport { RightOutlined, LeftOutlined } from \"@ant-design/icons\";\nimport MobileTable from \"../common/table/MobileTable\";\nimport GamePad from \"../common/game/Pad\";\nimport { hasTouch, addListener } from \"../utils/Utils\";\n\nexport default class GameMobileView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.carouselEl = React.createRef();\n    this.carouselSwipedRight = this.carouselSwipedRight.bind(this);\n    this.carouselSwipedLeft = this.carouselSwipedLeft.bind(this);\n  }\n\n  componentDidMount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft = addListener(\n        this.carouselEl,\n        \"swiped-left\",\n        this.carouselSwipedLeft\n      );\n      this.unListenSwipedRight = addListener(\n        this.carouselEl,\n        \"swiped-right\",\n        this.carouselSwipedRight\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (hasTouch()) {\n      this.unListenSwipedLeft();\n      this.unListenSwipedRight();\n    }\n  }\n\n  carouselSwipedLeft = () => {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== \"panel\") {\n      onCurrentViewChange(\"panel\");\n    } else {\n      this.carouselEl.classList.add(\"bounce-left\");\n      setTimeout(() => this.carouselEl.classList.remove(\"bounce-left\"), 400);\n    }\n  };\n\n  carouselSwipedRight() {\n    const { currentView, onCurrentViewChange } = this.props;\n\n    if (currentView !== \"table\") {\n      onCurrentViewChange(\"table\");\n    } else {\n      this.carouselEl.classList.add(\"bounce-right\");\n      setTimeout(() => this.carouselEl.classList.remove(\"bounce-right\"), 400);\n    }\n  }\n\n  nextRound = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round < 13) {\n      goToRound && goToRound(round + 1);\n    }\n  };\n\n  toRoundBefore = () => {\n    const { goToRound, currentRound } = this.props;\n    const round = Number(currentRound);\n\n    if (round !== 1) {\n      goToRound && goToRound(round - 1);\n    }\n  };\n\n  render() {\n    const {\n      gameID,\n      currentView,\n      rounds,\n      playersColumns,\n      currentRound,\n      handleSave,\n      leagueScores\n    } = this.props;\n\n    return (\n      <div className=\"game-mobile-view\">\n        <div className=\"my-carousel\" ref={el => (this.carouselEl = el)}>\n          <div className={`my-carousel-slides-container ${currentView}`}>\n            <div className=\"my-carousel-slide\">\n              <MobileTable\n                dataSource={rounds}\n                leagueScores={leagueScores}\n                players={playersColumns}\n                currentRound={currentRound}\n                gameID={gameID}\n              />\n            </div>\n            <div className=\"my-carousel-slide\">\n              <GamePad\n                isMobile={true}\n                currentRound={currentRound}\n                allRounds={rounds}\n                players={playersColumns}\n                onChange={handleSave}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"round-navigation\">\n          {currentRound !== 1 && (\n            <Button\n              type=\"primary\"\n              className=\"left\"\n              ghost\n              onClick={this.toRoundBefore}\n            >\n              <LeftOutlined />\n              {`Round ${currentRound - 1}`}\n            </Button>\n          )}\n\n          {currentRound !== 13 && (\n            <Button type=\"primary\" ghost onClick={this.nextRound}>\n              {`Round ${Number(currentRound) + 1}`}\n              <RightOutlined />\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","export const GAME_DEFAULT_SCORES = [10, 7, 3, 1];","import React, { Component } from 'react';\nimport { fire } from './../firebase';\nimport { Layout, Menu, Table, Card, Button, message } from 'antd';\nimport ReactDragListView from \"react-drag-listview\";\nimport { EditableFormRow, EditableCell } from './../common/table/EditableCell.js';\nimport './GameTab.css';\nimport GamePad from './../common/game/Pad';\nimport { GAME_STATUS } from '../constants/states';\nimport { cardsRenderer } from '../common/table/renderers.js';\nimport Css, { CSS_TRANSITIONS } from '../common/transition/Css.js';\nimport Loader from '../common/loader/Loader';\nimport GameMobileView from './GameMobileView';\nimport { GAME_DEFAULT_SCORES } from '../constants/scores';\n\nexport const PlayersContext = React.createContext();\n\nconst { Header, Content, Sider } = Layout;\n\nclass GameTab extends Component {\n  constructor(props) {\n    super(props);\n\n    // this.columns = [\n    // \t{\n    // \t\tplayer: 1,\n    // \t\tchildren: [{\n    // \t\t\ttitle: 'Bid',\n    // \t\t\tdataIndex: 'bid1',\n    // \t\t\twidth: 100,\n    // \t\t}, {\n    // \t\t\ttitle: 'Won',\n    // \t\t\tdataIndex: 'won1',\n    // \t\t\twidth: 100,\n    // \t\t}]\n    // \t},\n    // \t//  {\n    // \t// \ttitle: 'Bid',\n    // \t// \tdataIndex: 'bid1',\n    // \t// \twidth: 100,\n    // \t// }, {\n    // \t// \ttitle: 'Won',\n    // \t// \tdataIndex: 'won1',\n    // \t// \twidth: 100,\n    // \t// }, \n    // \t{\n    // \t\tplayer: 2,\n    // \t\tchildren: [{\n    // \t\t\ttitle: 'Bid',\n    // \t\t\tdataIndex: 'bid2',\n    // \t\t\twidth: 100,\n    // \t\t}, {\n    // \t\t\ttitle: 'Won',\n    // \t\t\tdataIndex: 'won2',\n    // \t\t\twidth: 100,\n    // \t\t}]\n    // \t},\n    // \t// {\n    // \t// \ttitle: 'Bid',\n    // \t// \tdataIndex: 'bid2',\n    // \t// \twidth: 100,\n    // \t// }, {\n    // \t// \ttitle: 'Won',\n    // \t// \tdataIndex: 'won2',\n    // \t// \twidth: 100,\n    // \t// }, \n    // \t{\n    // \t\tplayer: 3,\n    // \t\tchildren: [{\n    // \t\t\ttitle: 'Bid',\n    // \t\t\tdataIndex: 'bid3',\n    // \t\t\twidth: 100,\n    // \t\t}, {\n    // \t\t\ttitle: 'Won',\n    // \t\t\tdataIndex: 'won3',\n    // \t\t\twidth: 100,\n    // \t\t}]\n    // \t},\n    // \t// {\n    // \t// \ttitle: 'Bid',\n    // \t// \tdataIndex: 'bid3',\n    // \t// \twidth: 100,\n    // \t// }, {\n    // \t// \ttitle: 'Won',\n    // \t// \tdataIndex: 'won3',\n    // \t// \twidth: 100,\n    // \t// }, \n    // \t{\n    // \t\tplayer: 4,\n    // \t\tchildren: [{\n    // \t\t\ttitle: 'Bid',\n    // \t\t\tdataIndex: 'bid4',\n    // \t\t\twidth: 100,\n    // \t\t}, {\n    // \t\t\ttitle: 'Won',\t\n    // \t\t\tdataIndex: 'won4',\n    // \t\t\twidth: 100,\n    // \t\t}]\n    // \t},\n    // \t// {\n    // \t// \ttitle: 'Bid',\n    // \t// \tdataIndex: 'bid4',\n    // \t// \twidth: 100,\n    // \t// }, {\n    // \t// \ttitle: 'Won',\n    // \t// \tdataIndex: 'won4',\n    // \t// \twidth: 100,\n    // \t// },\n    // \t{\n    // \t\tchildren: [{\n    // \t\t\ttitle: 'Trump',\n    // \t\t\tdataIndex: 'trump',\n    // \t\t\twidth: 75,\n    // \t\t\trender: cardsRenderer,\n    // \t\t}, {\n    // \t\t\ttitle: 'O/U',\n    // \t\t\tdataIndex: 'segment',\n    // \t\t\twidth: 55,\n    // \t\t\trender: (text, record) => {\n    // \t\t\t\treturn {\n    // \t\t\t\t\tprops: {\n    // \t\t\t\t\t\tclassName: text === 0 ? 'failed-check' : '',\n    // \t\t\t\t\t},\n    // \t\t\t\t\tchildren: text,\n    // \t\t\t\t};\n    // \t\t\t},\n    // \t\t}]\n    // \t}\n    // ];\n\n    this.state = {\n      players: props.players,\n      columns: this.initColumns(props.players),\n      currentView: 'table',\n      gameData: {\n        currentRound: 1,\n        rounds: [],\n        totalScore0: 0,\n        totalScore1: 0,\n        totalScore2: 0,\n        totalScore3: 0,\n        status: '',\n      },\n      gameSummary: {\n        // leagueScore0: '',\n        // leagueScore1: '',\n        // leagueScore2: '',\n        // leagueScore3: '',\n      }\n    }\n\n    const columns = [\n      {\n        children: [{\n          title: 'Score',\n          children: [{\n            title: 'round',\n            dataIndex: 'round',\n            width: 75,\n          }]\n        }]\n      }, {\n        title: 'player 1',\n        player: 1,\n        children: [{\n          children: [{\n            title: 'Bid',\n            dataIndex: 'bid1',\n          }, {\n            title: 'Won',\n            dataIndex: 'won1',\n          }]\n        }],\n      }, {\n        title: 'player 2',\n        player: 2,\n        children: [{\n          children: [{\n            title: 'Bid',\n            dataIndex: 'bid2',\n          }, {\n            title: 'Won',\n            dataIndex: 'won2',\n          }]\n        }],\n      }, {\n        title: 'player 3',\n        player: 3,\n        children: [{\n          children: [{\n            title: 'Bid',\n            dataIndex: 'bid3',\n          }, {\n            title: 'Won',\n            dataIndex: 'won3',\n          }]\n        }],\n      }, {\n        title: 'player 4',\n        player: 4,\n        children: [{\n          children: [{\n            title: 'Bid',\n            dataIndex: 'bid4',\n          }, {\n            title: 'Won',\n            dataIndex: 'won4',\n          }]\n        }],\n      }, {\n        editable: true,\n        children: [{\n          children: [{\n            title: 'Trump',\n            dataIndex: 'trump',\n            width: 75,\n            render: cardsRenderer,\n          }]\n        }]\n      }, {\n        children: [{\n          children: [{\n            title: 'O/U',\n            dataIndex: 'segment',\n            width: 55,\n            render: (text, record) => {\n              return {\n                props: {\n                  className: text === 0 ? 'failed-check' : '',\n                },\n                children: text,\n              };\n            },\n          }]\n        }]\n      }\n    ];\n\n    this.columns1 = this.initColumns1(columns);\n\n    this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.setCurrentViewState = this.setCurrentViewState.bind(this);\n    this.selectActiveRound = this.selectActiveRound.bind(this);\n    this.handleReorderPlayers = this.handleReorderPlayers.bind(this);\n  }\n\n  fetch() {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID, gameID } = params;\n\n    const db = fire.database();\n\n    if (this.gameRef) {\n      this.gameRef.off('value');\n    }\n\n    this.leagueGamesRef = db.ref(`leagueGames/_${leagueID * 1}`).orderByChild('gameID').equalTo(gameID * 1);\n\n    this.leagueGamesRef.once('value', snapshot => {\n      const gameData = Object.values(snapshot.val())[0];\n      const gameKey = Object.keys(snapshot.val())[0];\n      this.gameKey = gameKey;\n      this.gameRef = db.ref(`games/${gameKey}`);\n      this.gameSummaryRef = db.ref(`leagueGamesSummary/_${leagueID * 1}/${gameKey}/players`);\n\n      if (gameData.playersOrder) {\n        this.setState({\n          players: gameData.playersOrder,\n          columns: this.initColumns(gameData.playersOrder)\n        });\n      } else {\n        this.setState({\n          players: this.props.players,\n          columns: this.initColumns(this.props.players)\n        });\n      }\n\n      this.gameRef.on('value', snap => {\n        this.setState({\n          gameData: {\n            ...this.state.gameData,\n            ...snap.val()\n          }\n        });\n        this.props.loaderStateCb(false);\n      });\n\n      this.gameSummaryRef.on('value', snap => {\n        this.setState({\n          gameSummary: {\n            ...snap.val()\n          }\n        });\n      })\n    });\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameRef.off('value');\n    this.gameSummaryRef.off('value');\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.match.params.gameID !== this.props.match.params.gameID) {\n      this.fetch();\n    }\n  }\n\n  handleSave = (row, player) => {\n    const stateToUpdate = {};\n    let summaryToUpdate;\n    const newData = [...this.state.gameData.rounds];\n    const index = newData.findIndex(item => row.round === item.round);\n\n    const item = newData[index];\n\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n\n    // reference to the new Data relevant row to update with score and segment\n    row = newData[index];\n\n    if (typeof player === 'number') {\n      // calculate score\n      this.calculatePlayerscore(row, player, newData, index, stateToUpdate);\n\n      //update O/U\n      let currentTotalBid = null;\n      let currentTotalWon = null;\n      let allWonInput = true;\n\n      for (const [key, value] of Object.entries(row)) {\n        if (key.indexOf('bid') > -1 && value !== null && value !== '') {\n          currentTotalBid += (value * 1);\n        }\n\n        if (key.indexOf('won') > -1) {\n          if (value !== null && value !== '') {\n            currentTotalWon += (value * 1);\n          } else {\n            allWonInput = false;\n          }\n        }\n      }\n\n      row.segment = currentTotalBid !== null ? currentTotalBid - 13 : null;\n      row.check = allWonInput && currentTotalWon === 13;\n\n      // calculate if round fell - change next round factor \n      if (row.check) {\n        let didRoundFell = true;\n\n        for (let i = 0; i < 4; i++) {\n          if (typeof row[`bid${i}`] !== 'number' || typeof row[`won${i}`] !== 'number') {\n            didRoundFell = false;\n            break;\n          } else if (row[`bid${i}`] === row[`won${i}`]) {\n            didRoundFell = false;\n            break;\n          }\n        }\n\n        if (didRoundFell) {\n          row.fell = true;\n\n          if (row.round < 12) {\n            // because metaData index is zero based row.round value is next round index\n            newData[row.round].factor = row.factor * 2;\n          } else if (row.factor > 1) {\n            newData[row.round].factor = row.factor\n          }\n        } else if (row.fell) {\n          row.fell = false;\n          if (newData[row.round]) {\n            newData[row.round].factor = row.factor > 1 ? row.factor / 2 : row.factor;\n          }\n\n          for (let i = 0; i < 4; i++) {\n            this.calculatePlayerscore(row, i, newData, index, stateToUpdate);\n          }\n        }\n\n        // calculate round summary stats\n        summaryToUpdate = this.calculateSummary(newData, index);\n\n        if (row.round === 13 && !row.fell) {\n          stateToUpdate.status = GAME_STATUS.FINISHED;\n          this.updateGameStatus(GAME_STATUS.FINISHED);\n\n          // round summary league scores\n          const { totalScore0, totalScore1, totalScore2, totalScore3 } = this.state.gameData;\n          const scores = { totalScore0, totalScore1, totalScore2, totalScore3 };\n          scores[`totalScore${player}`] = stateToUpdate[`totalScore${player}`];\n          summaryToUpdate = this.calculateLeagueScores(scores, summaryToUpdate);\n        }\n\n        this.gameSummaryRef.update(this.mapToPlayersObj(summaryToUpdate));\n      }\n    }\n\n    stateToUpdate.rounds = newData;\n\n    // this.setState(stateToUpdate);\n    this.gameRef.update(stateToUpdate);\n  }\n\n  calculatePlayerscore = (round, player, roundsData, currentRound, stateToUpdate) => {\n    let rowScore;\n\n    const bid = round[`bid${player}`];\n    const won = round[`won${player}`];\n\n    if (won !== '' && bid !== '') {\n      if (won === bid) {\n        if ((won * 1) === 0) {\n          rowScore = round.segment > 0 ? 25 : 50;\n        } else {\n          rowScore = (Math.pow(won, 2) + 10);\n        }\n      } else {\n        const diff = Math.abs(won - bid);\n\n        if ((bid * 1) === 0) {\n          rowScore = -(round.segment > 0 ? 25 : 50) + (diff - 1) * 10;\n        } else {\n          rowScore = diff * -10;\n        }\n      }\n\n      rowScore *= round.factor;\n\n      round[`score${player}`] = rowScore;\n\n      //calculate aggregate score\n      let aggregateScore = 0;\n      for (let i = 0; i <= currentRound; i++) {\n        const round = roundsData[i];\n\n        if (typeof round[`score${player}`] === 'number' && !round.fell) {\n          aggregateScore += round[`score${player}`];\n        }\n      }\n      round[`aggregateScore${player}`] = aggregateScore;\n      stateToUpdate[`totalScore${player}`] = round[`aggregateScore${player}`];\n    }\n  }\n\n  calculateLeagueScores = (scores, summaryToUpdate) => {\n    const sortedScores = Object.keys(scores).sort((a, b) => scores[b] - scores[a]);\n\n    sortedScores.forEach((scoreIndex, i) => {\n      const score = scores[scoreIndex];\n      let leagueScore = GAME_DEFAULT_SCORES[i];\n\n      // score < 0 => -1\n      if (score < 0) {\n        leagueScore--;\n      }\n\n      // score reminder from 100 == 0 => leagueScore + 1\n      if (score % 100 === 0) {\n        leagueScore++;\n      }\n\n      // score > 300 => +3\n      if (score > 300) {\n        leagueScore += 3;\n      }\n\n      // score < -100 => -3\n      if (score < -100) {\n        leagueScore -= 3;\n      }\n\n      summaryToUpdate[`${scoreIndex.slice(-1)}`].leagueScore = leagueScore;\n    });\n\n    return summaryToUpdate;\n  }\n\n  calculateSummary = (roundsData, currentRoundIndex) => {\n    const currentRound = currentRoundIndex + 1;\n    const playersSummary = {};\n\n    for (let pIndex = 0; pIndex < 4; pIndex++) {\n      playersSummary[pIndex] = {};\n      let stood = 0;\n      let totalRounds = 0;\n      let totalHBrounds = 0;\n      let stoodWhileHB = 0;\n      let stoodInOver = 0;\n      let totalOverRounds = 0;\n      let stoodInUnder = 0;\n      let totalNTrounds = 0;\n      let stoodInNT = 0;\n      let stoodWhenLastBidder = 0;\n      let totalStoodWhenLastBidder = 0;\n\n      for (let rIndex = 0; rIndex < currentRound; rIndex++) {\n        const round = roundsData[rIndex];\n        if (!round.fell) {\n          totalRounds++;\n          const highestBidder = round.highestBidder === pIndex;\n          const lastBidder = !highestBidder && (pIndex + 1 > 3 ? 0 : pIndex + 1) === round.highestBidder;\n\n          if (highestBidder) {\n            totalHBrounds++;\n          } else if (lastBidder) {\n            totalStoodWhenLastBidder++;\n          }\n\n          if (round.segment > 0) {\n            totalOverRounds++;\n          }\n\n          if (round.trump === 'NT') {\n            totalNTrounds++;\n          }\n\n          if (round[`bid${pIndex}`] === round[`won${pIndex}`]) {\n            stood++;\n\n            if (highestBidder) {\n              stoodWhileHB++;\n            } else if (lastBidder) {\n              stoodWhenLastBidder++;\n            }\n\n            if (round.trump === 'NT') {\n              stoodInNT++;\n            }\n\n            round.segment > 0 ? stoodInOver++ : stoodInUnder++;\n          }\n        }\n      }\n\n      const successRate = { wins: stood, total: totalRounds };\n      const successRateHB = { wins: stoodWhileHB, total: totalHBrounds };\n      const successRateOver = { wins: stoodInOver, total: totalOverRounds };\n      const successRateUnder = { wins: stoodInUnder, total: (totalRounds - totalOverRounds) };\n      const successRateNT = { wins: stoodInNT, total: totalNTrounds };\n      const successRateLastBidder = { wins: stoodWhenLastBidder, total: totalStoodWhenLastBidder };\n\n      playersSummary[pIndex] = {\n        successRate: Number.isNaN(successRate) ? '' : successRate,\n        successRateHB,\n        successRateOver,\n        successRateUnder,\n        successRateNT,\n        successRateLastBidder,\n      };\n    }\n\n    return playersSummary;\n  }\n\n  mapToPlayersObj = (summaryToUpdate) => {\n    const { players, gameSummary } = this.state;\n\n    return players.reduce((obj, player, index) => {\n      obj[player.key] = {\n        ...gameSummary[player.key],\n        ...summaryToUpdate[index]\n      };\n\n      return obj;\n    }, {});\n  }\n\n  updateGameStatus = (status) => {\n    const { match } = this.props;\n    const { params } = match;\n    const { leagueID } = params;\n\n    fire.database().ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`).update({ status });\n  }\n\n  toggleSlide = () => {\n    const currentView = this.state.currentView === 'panel' ? 'table' : 'panel';\n    this.setCurrentViewState(currentView);\n  }\n\n  setCurrentViewState(currentView) {\n    this.setState({ currentView });\n  }\n\n  selectActiveRound(newRound) {\n    const { gameData, currentView } = this.state;\n    const { rounds, currentRound } = gameData;\n\n    if (Number(newRound) < Number(currentRound) || rounds[currentRound - 1].check) {\n      this.gameRef.update({\n        currentRound: Number(newRound)\n      });\n\n      const { isMobile } = this.props;\n      if (isMobile && currentView === 'table') {\n        this.toggleSlide();\n      }\n    } else {\n      message.warning('Current round is not completed');\n    }\n  }\n\n  onDragEnd = (fromIndex, toIndex) => {\n    const { columns, players } = this.state;\n\n    const columnsCopy = columns.slice();\n    const column = columnsCopy.splice(fromIndex, 1)[0];\n    columnsCopy.splice(toIndex, 0, column);\n\n    const playersCopy = players.slice();\n    const player = playersCopy.splice(fromIndex, 1)[0];\n    playersCopy.splice(toIndex, 0, player);\n\n    this.setState({\n      columns: columnsCopy,\n      players: playersCopy\n    });\n  };\n\n  handleReorderPlayers(newOrder) {\n    this.setState({\n      players: newOrder,\n      columns: this.initColumns(newOrder),\n    });\n    const { params } = this.props.match;\n    const { leagueID } = params;\n    fire.database().ref(`leagueGames/_${leagueID * 1}/${this.gameKey}`).update({ playersOrder: newOrder });\n  }\n\n  getLeagueScores = () => {\n    const players = this.state.players;\n    const { gameSummary } = this.state;\n\n    if (Object.keys(gameSummary).length === 0) {\n      return {\n        leagueScore0: '',\n        leagueScore1: '',\n        leagueScore2: '',\n        leagueScore3: '',\n      };\n    }\n\n    return players.reduce((summaryObj, player, i) => {\n      summaryObj[`leagueScore${i}`] = gameSummary[player.key].leagueScore;\n      return summaryObj;\n    }, {});\n  }\n\n  render() {\n    const { columns, currentView, gameData, players } = this.state;\n    const { rounds, currentRound } = gameData;\n    const { screenSize, isMobile, loading, match } = this.props;\n    const { params } = match;\n    const { gameID } = params;\n    // const columns1 = this.columns1;\n    const playersColumns = columns.slice(0, 4);\n    const components = {\n      body: {\n        row: EditableFormRow,\n        cell: EditableCell,\n      },\n    };\n    //table width = 930px\n    // const siderWidth = (screenSize - 930) / 2;\n    // 200 is league layout sider width\n    const siderWidth = (screenSize - 200 - 930) / 2;\n    let translate;\n    if (siderWidth < 130) {\n      translate = siderWidth - 65;\n    } else {\n      translate = siderWidth / 2;\n    }\n\n    if (loading) {\n      return <Loader />\n    }\n\n    if (isMobile) {\n      return (\n        <PlayersContext.Provider value={{ players, reorderPlayers: this.handleReorderPlayers }}>\n          <GameMobileView\n            gameID={gameID}\n            currentView={currentView}\n            rounds={rounds}\n            playersColumns={playersColumns}\n            currentRound={currentRound}\n            handleSave={this.handleSave}\n            onCurrentViewChange={this.setCurrentViewState}\n            goToRound={this.selectActiveRound}\n            leagueScores={this.getLeagueScores()}\n          />\n        </PlayersContext.Provider>\n      );\n    }\n\n    return (\n      <Layout className=\"game-layout\">\n        <Sider width={siderWidth} style={{ background: 'transparent' }} >\n          <div style={{ height: 119 }}>\n            <Button icon=\"table\" onClick={this.toggleSlide} />\n          </div>\n          <Menu\n            defaultSelectedKeys={['1']}\n            mode=\"inline\"\n            style={{ left: `${currentView === 'table' ? 0 : translate / 2 * -1}px` }}\n            onSelect={(item) => this.selectActiveRound(item.key)}\n            selectedKeys={[`${currentRound}`]}\n          >\n            {Array(13).fill(1).map((_, i) => <Menu.Item key={i + 1} style={{ textAlign: 'center' }}>\n              <span className=\"round-text\" style={{ display: siderWidth < 200 ? 'none' : '' }}>Round</span> {i + 1}\n            </Menu.Item>)}\n\n          </Menu>\n        </Sider>\n        <Layout className={currentView === 'table' ? 'game-table' : 'game-panel'}>\n          <Header style={{ background: 'transparent', padding: '0 0px', height: 80, }}>\n            <ReactDragListView\n              onDragEnd={this.onDragEnd}\n              nodeSelector=\"div.card\"\n            >\n              {playersColumns.map(({ index: playerIndex, playerName }, i) => (\n                <Card\n                  key={i}\n                  title={playerName}\n                  className=\"card\"\n                  style={{ transform: `translate(${currentView === 'table' ? 0 : (60 + i * 20)}px)` }}\n                >\n                  <Css type={CSS_TRANSITIONS.SLIDE_UP}>\n                    {gameData[`totalScore${playerIndex}`]}\n                  </Css>\n                </Card>\n              ))}\n            </ReactDragListView>\n          </Header>\n          <Content>\n            {/* <Carousel\n\t\t\t\t\t\t\t\t\tref={node => this.carousel = node}\n\t\t\t\t\t\t\t\t\tdots={false}\n\t\t\t\t\t\t\t\t\tafterChange={(current) => this.currentSlide = current}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\tclassName='game-table'\n\t\t\t\t\t\t\t\t\t\t\tcomponents={components}\n\t\t\t\t\t\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\t\t\t\t\t\trowKey='round'\n\t\t\t\t\t\t\t\t\t\t\tdataSource={rounds}\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\tbordered\n\t\t\t\t\t\t\t\t\t\t\tpagination={false}\n\t\t\t\t\t\t\t\t\t\t\t// scroll={{ y: 520 }}\n\t\t\t\t\t\t\t\t\t\t\trowClassName={row => !row.check || row.segment === 0 ? 'failed-check' : ''}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'inline-block' }}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{console.log('before gamepad')}\n\t\t\t\t\t\t\t\t\t<GamePad\n\t\t\t\t\t\t\t\t\t\tisMobile={false}\n\t\t\t\t\t\t\t\t\t\troundData={rounds[currentRound]}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleSave}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t</Carousel> */}\n            <div className=\"my-carousel\">\n              <div className={`my-carousel-slides-container ${currentView}`}>\n                <div className=\"my-carousel-slide\">\n                  <Table\n                    className='game-table'\n                    components={components}\n                    columns={columns}\n                    rowKey='round'\n                    dataSource={rounds}\n                    size='small'\n                    bordered\n                    pagination={false}\n                    //TODO: give class to active row when row===currentRound\n                    //TODO: find a way to validate a row other then row.check\n                    // rowClassName={row => !row.check || row.segment === 0 ? 'failed-check' : ''}\n                    style={{ display: 'inline-block' }}\n                  />\n                </div>\n                <div className=\"my-carousel-slide\">\n                  <GamePad\n                    isMobile={false}\n                    currentRound={currentRound}\n                    allRounds={rounds}\n                    players={playersColumns}\n                    onChange={this.handleSave}\n                  />\n                </div>\n              </div>\n            </div>\n\n\n          </Content>\n\n        </Layout>\n      </Layout>\n    );\n  }\n\n  initColumns = (players) => {\n    const playersColumn = players.map(({ nickname }, i) => {\n      return {\n        playerName: nickname,\n        index: i,\n        children: [{\n          title: 'Bid',\n          dataIndex: `bid${i}`,\n          width: 100,\n        }, {\n          title: 'Won',\n          dataIndex: `won${i}`,\n          width: 100,\n        }]\n      };\n    });\n\n    const columns = playersColumn.concat([{\n      children: [{\n        title: 'Trump',\n        dataIndex: 'trump',\n        width: 75,\n        render: cardsRenderer,\n      }, {\n        title: 'O/U',\n        dataIndex: 'segment',\n        width: 55,\n        render: (text, record) => {\n          return {\n            props: {\n              className: text === 0 ? 'failed-check' : '',\n            },\n            children: text,\n          };\n        },\n      }]\n    }]);\n\n    return columns;\n  };\n\n  initColumns1 = (columns) => columns.map((col) => {\n    if (!col.editable && !col.player) {\n      return col;\n    }\n    const playerScore = this.state.gameData[`totalScore${col.player}`];\n\n    return {\n      ...col,\n      children: col.children.map((child) => {\n        return {\n          ...child,\n          title: playerScore,\n          children: child.children.map((subChild) => {\n            return {\n              ...subChild,\n              width: 100,\n              onCell: record => ({\n                record,\n                editable: true,\n                editorType: subChild.dataIndex === 'trump' ? 'trump' : 'bidWin',\n                dataIndex: subChild.dataIndex,\n                player: col.player,\n                handleSave: this.handleSave,\n              }),\n            }\n          })\n        }\n      })\n    };\n  });\n}\n\nexport default GameTab;\n\n\n\n\n/** editable table */\n/* <Table\n\t\t\tclassName='game-table'\n\t\t\tcomponents={components}\n\t\t\tcolumns={columns1}\n\t\t\trowKey='round'\n\t\t\tdataSource={rounds}\n\t\t\tsize='small'\n\t\t\tbordered\n\t\t\tpagination={false}\n\t\t\tscroll={{ y: 520 }}\n\t\t\trowClassName={row => !row.check || row.segment === 0 ? 'failed-check' : ''}\n\t\t/> */","import React, { Component } from 'react';\r\nimport './Arrow.css';\r\n\r\nclass Arrow extends Component {\r\n  state = {\r\n    isActive: false\r\n  };\r\n\r\n  handleClick = () => {\r\n    this.setState({\r\n      isActive: !this.state.isActive\r\n    });\r\n\r\n    const { onClick } = this.props;\r\n\r\n    if (onClick) {\r\n      onClick();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { direction } = this.props;\r\n    const { isActive } = this.state;\r\n\r\n    return (\r\n      <div\r\n        className={`btn-menu-arrow-container`}\r\n        onClick={this.handleClick}\r\n      >\r\n        <div className={`btn-menu-arrow ${direction} ${isActive ? 'spin' : 'arrow'}`}>\r\n          <span></span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Arrow;","import React, { Component } from 'react';\nimport { fire } from '../firebase';\nimport './LeagueSummary.css';\nimport { Row, Col } from 'antd';\n\nconst statsObj = {\n  successRate: 'Succes Win Rates',\n  successRateHB: 'Highest Bidding Win Rates',\n  successRateOver: 'Over Win Rate',\n  successRateUnder: 'Under Win Rate',\n  successRateNT: 'NT Win Rates',\n  successRateLastBidder: 'Last Bidder Win Rate',\n}\n\nexport default class LeagueSummary extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      players: props.league.players,\n    }\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  componentWillUnmount() {\n    this.gameSummaryRef.off('value');\n  }\n\n  fetch() {\n    const { league: { leagueID } } = this.props;\n    const { players } = this.state;\n\n    const dbRef = fire.database().ref();\n    this.gameSummaryRef = dbRef.child(`leagueGamesSummary/_${leagueID}`);\n    this.leagueGamesRef = dbRef.child(`leagueGames/_${leagueID}`).orderByChild('status').equalTo('FINISHED');\n\n    this.leagueGamesRef.on('value', snap => {\n      const gameKeys = Object.keys(snap.val());\n      const lastKey = gameKeys[gameKeys.length - 1];\n\n      this.gameSummaryRef.orderByKey().endAt(lastKey).on('value', snap => {\n        const gameSummary = Object.values(snap.val());\n        this.setState({\n          players: players.map(player => {\n            const playerKey = player.key;\n\n            return {\n              ...player,\n              games: gameSummary.map((game, i) => game.players[playerKey])\n            };\n          })\n        });\n      });\n    });\n  }\n\n  render() {\n    const { league } = this.props;\n    const { title } = league;\n    const { players } = this.state;\n\n    return (\n      <div className=\"game-summery\">\n        <h3>{title}</h3>\n\n        <h3>League Score:</h3>\n        <Row gutter={1} className=\"table-header\" style={{ marginBottom: 1 }}>\n          {this.getTableHeaders(players)}\n        </Row>\n        <Row gutter={1}>\n          {this.getScoreRow(players)}\n        </Row>\n        {Object.keys(statsObj).map(this.getStatsRow)}\n      </div>\n    );\n  }\n\n  getTableHeaders = (\n    players\n  ) => players.map(({ key, nickname }) => (\n    <Col key={key} span={6}><div className=\"table-cell\">{nickname}</div></Col>\n  ));\n\n  getScoreRow = (players) => players.map(player => (\n    <Col span={6} key={player.key}>\n      <div className=\"table-cell\">\n        {player.games && this.scoreReducer(player.games, 'leagueScore')}\n      </div>\n    </Col>\n  ));\n\n  getStatsRow = (statsKey) => {\n    const { players } = this.state;\n\n    return (\n      <div className=\"stats-row\" key={statsKey}>\n        <h4>{statsObj[statsKey]}</h4>\n        <Row gutter={1}>{this.getWinRateRow(players, statsKey)}</Row>\n      </div>\n    );\n  };\n\n  getWinRateRow = (players, statsKey) => players.map(player => (\n    <Col span={6} key={player.key}>\n      <div className=\"table-cell\">\n        {player.games && this.calculateRate(player.games, statsKey)}%\n      </div>\n    </Col>\n  ));\n\n  scoreReducer = (games, prop) => games.reduce((sum, game) => sum + Number(game[prop]), 0);\n\n  calculateRate = (games, prop) => this.toPercentage(this.preCalculateRate(games, prop));\n\n  toPercentage = ({ wins, total }) => Number.parseFloat((wins / total) * 100).toFixed(0);\n\n  preCalculateRate = (games, prop) => games.reduce((sumObj, game) => {\n    const category = game[prop];\n    sumObj.wins += category.wins;\n    sumObj.total += category.total;\n    return sumObj;\n  }, { wins: 0, total: 0 });\n}\n\n","import React, { Component } from \"react\";\r\nimport { fire } from \"../firebase\";\r\nimport { Route, Link } from \"react-router-dom\";\r\nimport withAuthorization from \"../authentication/withAuthorization\";\r\nimport { Menu, Layout, message } from \"antd\";\r\nimport {\r\n  DashboardOutlined,\r\n  GoldOutlined,\r\n  ExportOutlined,\r\n  PlusOutlined\r\n} from \"@ant-design/icons\";\r\nimport \"./League.css\";\r\nimport GameTab from \"./../game/GameTab\";\r\nimport Arrow from \"../common/arrowButton/arrow/Arrow\";\r\nimport * as routes from \"./../constants/routes\";\r\nimport gameDataTpl from \"./../dataTemplates/gameTpl\";\r\nimport RcDrawer from \"rc-drawer\";\r\nimport \"rc-drawer/assets/index.css\";\r\nimport Loader from \"../common/loader/Loader\";\r\nimport { GAME_STATUS } from \"../constants/states\";\r\nimport LeagueSummary from \"../leagueSummary/LeagueSummary\";\r\n\r\nconst { Content, Sider } = Layout;\r\nconst SubMenu = Menu.SubMenu;\r\n\r\nclass League extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { location, match } = props;\r\n    const { leagueID } = match.params;\r\n\r\n    const matchGame = location.pathname.match(/game\\/[1-9]/g) || [];\r\n    const gameID = matchGame.length ? matchGame[0].split(\"/\")[1] : false;\r\n\r\n    this.state = {\r\n      loading: true,\r\n      siderCollapse: false,\r\n      menuSelected: gameID || \"dashboard\",\r\n      league: { title: \"\", players: [] },\r\n      leagueGames: [],\r\n      drawerVisible: false\r\n      // activeGame: `0`\r\n    };\r\n\r\n    /* Create reference to messages in Firebase Database */\r\n    const dbRef = fire.database().ref();\r\n    this.leagueRef = dbRef.child(`leagues/list/_${leagueID}`);\r\n    this.leagueGamesRef = dbRef.child(`leagueGames/_${leagueID}`);\r\n\r\n    this.setLoaderState = this.setLoaderState.bind(this);\r\n  }\r\n\r\n  fetch() {\r\n    this.leagueRef.on(\"value\", snapshot => {\r\n      console.log(snapshot.val());\r\n      const leagueData = snapshot.val();\r\n\r\n      if (leagueData) {\r\n        this.setState({\r\n          league: {\r\n            ...this.state.league,\r\n            ...leagueData\r\n          }\r\n          // activeGame: `${leagueData.games.length}`\r\n        });\r\n      }\r\n    });\r\n\r\n    this.leagueGamesRef.on(\"child_added\", snapshot => {\r\n      this.setState(prevState => {\r\n        return { leagueGames: [...prevState.leagueGames, snapshot.val()] };\r\n      });\r\n    });\r\n\r\n    this.leagueGamesRef.on(\"child_changed\", snapshot => {\r\n      this.setState(prevState => {\r\n        const leagueGames = prevState.leagueGames;\r\n        const changedIndex = leagueGames.findIndex(\r\n          game => game.gameID === snapshot.val().gameID\r\n        );\r\n\r\n        return {\r\n          leagueGames: [\r\n            ...leagueGames.slice(0, changedIndex),\r\n            {\r\n              ...snapshot.val()\r\n            },\r\n            ...leagueGames.slice(changedIndex + 1)\r\n          ]\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.leagueRef.off(\"value\");\r\n  }\r\n\r\n  // onTabChange = (activeGame) => {\r\n  // \tthis.setState({ activeGame });\r\n  // }\r\n\r\n  addGame = () => {\r\n    const { league, leagueGames } = this.state;\r\n    const { leagueID, players } = league;\r\n    const lastGame = leagueGames[leagueGames.length - 1];\r\n\r\n    if (!lastGame || lastGame.status === GAME_STATUS.FINISHED) {\r\n      const { history, match } = this.props;\r\n      const newGameId = leagueGames.length + 1;\r\n\r\n      const newGameKey = fire\r\n        .database()\r\n        .ref()\r\n        .child(\"games\")\r\n        .push().key;\r\n\r\n      const gameTpl = gameDataTpl(players);\r\n      const updates = {};\r\n\r\n      updates[`/games/${newGameKey}`] = {\r\n        gameID: newGameId,\r\n        ...gameTpl.gameData\r\n      };\r\n      updates[`/leagueGames/_${leagueID}/${newGameKey}`] = {\r\n        gameID: newGameId,\r\n        status: GAME_STATUS.ACTIVE\r\n      };\r\n      updates[`/leagueGamesSummary/_${leagueID}/${newGameKey}`] = {\r\n        ...gameTpl.gameSummary\r\n      };\r\n\r\n      fire\r\n        .database()\r\n        .ref()\r\n        .update(updates, error => {\r\n          if (!error) {\r\n            this.setState({ menuSelected: `${newGameId}` });\r\n            history.push(`${match.url}${routes.GAME}/${newGameId}`);\r\n            setTimeout(this.toggleDrawer, 400);\r\n          }\r\n        });\r\n    } else {\r\n      setTimeout(this.toggleDrawer, 200);\r\n      message.warning(\"Last Game is not finished yet!!\");\r\n    }\r\n  };\r\n\r\n  handleMenuItemClick = item => {\r\n    const key = item.key;\r\n\r\n    if (key === \"new_game\") {\r\n      return this.addGame();\r\n    }\r\n\r\n    if (key !== \"main_menu\" && key !== this.state.menuSelected) {\r\n      this.setState({ menuSelected: key });\r\n      setTimeout(this.toggleDrawer, 400);\r\n      this.setLoaderState(true);\r\n    }\r\n  };\r\n\r\n  setLoaderState(loading) {\r\n    this.setState({ loading });\r\n  }\r\n\r\n  toggleSider = () => {\r\n    this.setState({\r\n      siderCollapse: !this.state.siderCollapse\r\n    });\r\n  };\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({\r\n      drawerVisible: !this.state.drawerVisible\r\n    });\r\n  };\r\n\r\n  getMenu() {\r\n    const { match } = this.props;\r\n    const { leagueGames, menuSelected } = this.state;\r\n\r\n    return (\r\n      <Menu\r\n        mode=\"inline\"\r\n        selectedKeys={[menuSelected]}\r\n        defaultOpenKeys={[\"gamesSub\"]}\r\n        onClick={this.handleMenuItemClick}\r\n        className=\"league-menu\"\r\n      >\r\n        <Menu.Item key=\"dashboard\">\r\n          <DashboardOutlined />\r\n          <Link to={`${match.url}`}>League Summary</Link>\r\n        </Menu.Item>\r\n        <SubMenu\r\n          key=\"gamesSub\"\r\n          title={\r\n            <span>\r\n              <GoldOutlined />\r\n              <span>Games</span>\r\n            </span>\r\n          }\r\n        >\r\n          {leagueGames.map((game, i) => (\r\n            <Menu.Item key={game.gameID.toString()}>\r\n              <Link to={`${match.url}${routes.GAME}/${game.gameID}`}>\r\n                Game {game.gameID}\r\n              </Link>\r\n            </Menu.Item>\r\n          ))}\r\n\r\n          <Menu.Item key=\"new_game\">\r\n            <PlusOutlined />\r\n            <span>New Game</span>\r\n          </Menu.Item>\r\n        </SubMenu>\r\n\r\n        <Menu.Item key=\"main_menu\">\r\n          <ExportOutlined className={\"rotate-180\"} />\r\n          <Link to={`/`}>To Main Menu</Link>\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isMobile, screenSize, match } = this.props;\r\n    const { league, siderCollapse, loading, drawerVisible } = this.state;\r\n    const { leagueID, players } = league;\r\n\r\n    return (\r\n      <Layout className=\"league-container\">\r\n        {isMobile ? (\r\n          <RcDrawer\r\n            getContainer=\"#root\"\r\n            width=\"250px\"\r\n            open={drawerVisible}\r\n            onHandleClick={this.toggleDrawer}\r\n            onClose={this.toggleDrawer}\r\n          >\r\n            <div className=\"drawer-title\">{league.title}</div>\r\n            {this.getMenu()}\r\n          </RcDrawer>\r\n        ) : (\r\n          <Sider\r\n            trigger={null}\r\n            collapsible\r\n            collapsed={siderCollapse}\r\n            style={{ background: \"#fff\" }}\r\n          >\r\n            <Arrow direction={\"left\"} onClick={this.toggleSider} />\r\n            {this.getMenu()}\r\n          </Sider>\r\n        )}\r\n        <Layout>\r\n          <Content\r\n          // style={{\r\n          // \tmargin: '24px 16px', padding: 24, minHeight: 280,\r\n          // }}\r\n          >\r\n            <Route\r\n              path={`${routes.LEAGUE}/:leagueID/game/:gameID`}\r\n              render={props =>\r\n                !!leagueID ? (\r\n                  <GameTab\r\n                    {...props}\r\n                    isMobile={isMobile}\r\n                    screenSize={screenSize}\r\n                    players={players}\r\n                    loading={loading}\r\n                    loaderStateCb={this.setLoaderState}\r\n                  />\r\n                ) : (\r\n                  <Loader />\r\n                )\r\n              }\r\n            />\r\n            <Route\r\n              exact\r\n              path={match.url}\r\n              render={props =>\r\n                !!leagueID ? (\r\n                  <LeagueSummary {...props} league={league} />\r\n                ) : (\r\n                  <Loader />\r\n                )\r\n              }\r\n            />\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nconst authCondition = authUser => !!authUser;\r\n\r\nexport default withAuthorization(authCondition)(League);\r\n","import { INPUT_MODE, GAME_STATUS } from '../constants/states';\n\nexport default function gameDataTpl(players) {\n  const rounds = []\n\n  for (let i = 0; i < 13; i++) {\n    rounds.push({\n      round: i + 1,\n      segment: '',\n      totalBids: '',\n      trump: '',\n      check: false,\n      factor: 1,\n      fell: false,\n      highestBidder: '',\n      inputMode: INPUT_MODE.BID,\n      score0: '',\n      aggregateScore0: '',\n      bid0: '',\n      won0: '',\n      score1: '',\n      aggregateScore1: '',\n      bid1: '',\n      won1: '',\n      score2: '',\n      aggregateScore2: '',\n      bid2: '',\n      won2: '',\n      score3: '',\n      aggregateScore3: '',\n      bid3: '',\n      won3: ''\n    });\n  }\n\n  return {\n    gameData: {\n      rounds,\n      currentRound: 1,\n      totalScore0: 0,\n      totalScore1: 0,\n      totalScore2: 0,\n      totalScore3: 0,\n      status: GAME_STATUS.ACTIVE\n    },\n    gameSummary: {\n      players: players.reduce((summaryObj, player) => {\n        summaryObj[player.key] = {\n          leagueScore: '',\n          successRate: '',\n          successRateHB: '',\n          successRateOver: '',\n          successRateUnder: '',\n          successRateNT: ''\n        };\n\n        return summaryObj;\n      }, {})\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport { withRouter, Route, Redirect } from \"react-router-dom\";\nimport cards from \"./cards.png\";\nimport { Spin } from \"antd\";\nimport * as routes from \"./constants/routes\";\nimport { fire } from \"./firebase\";\nimport withAuthentication from \"./authentication/withAuthentication\";\nimport \"./App.scss\";\nimport \"antd/dist/antd.css\";\n\nimport Login from \"./authentication/Login\";\nimport SignUp from \"./authentication/SignUp\";\nimport Main from \"./main/Main\";\nimport League from \"./league/League.js\";\nimport { addListener } from \"./utils/Utils\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inlineHeader: false,\n      isMobile: window.innerWidth < 1095,\n      screenSize: window.innerWidth\n    };\n\n    this.toggleHeaderInline = this.toggleHeaderInline.bind(this);\n    this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n  }\n\n  // set main header state by router value\n  // if in main menu page header is bigger\n  toggleHeaderInline(inline = true) {\n    this.setState({\n      inlineHeader: inline\n    });\n  }\n\n  // set if view is mobile size\n  handleWindowSizeChange() {\n    this.setState({\n      isMobile: window.innerWidth < 1095,\n      screenSize: window.innerWidth\n    });\n  }\n\n  // init window resize listener\n  listenToWinResize(callback) {\n    return addListener(window, \"resize\", callback);\n  }\n\n  componentWillMount() {\n    const { pathname } = this.props.location;\n    // set initial header state\n    this.toggleHeaderInline(pathname !== \"/\");\n\n    // listen to routing changes\n    this.unistenHistory = this.props.history.listen((location, action) => {\n      const { pathname } = location;\n      this.toggleHeaderInline(pathname !== \"/\" && pathname !== \"/login\");\n    });\n\n    this.unlistenWinResize = this.listenToWinResize(\n      this.handleWindowSizeChange\n    );\n  }\n\n  componentWillUnmount() {\n    this.unistenHistory();\n    this.unlistenWinResize();\n  }\n\n  render() {\n    const { inlineHeader, isMobile, screenSize } = this.state;\n\n    return (\n      <div\n        className={`app ${isMobile ? \"mobile\" : \"\"} ${\n          inlineHeader ? \"inline-header\" : \"\"\n        }`}\n      >\n        <header id=\"app-header\">\n          <img src={cards} className=\"app-logo\" alt=\"logo\" />\n          <h1 className=\"app-title\">Sub Whist</h1>\n        </header>\n\n        <div className=\"app-content\">\n          <Route exact path=\"/\" component={Main} />\n          <Route exact path={routes.SIGN_IN} component={Login} />\n          <Route exact path={routes.SIGN_UP} component={SignUp} />\n          <Route\n            path={`${routes.LEAGUE}/:leagueID`}\n            render={props => (\n              <League {...props} isMobile={isMobile} screenSize={screenSize} />\n            )}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withAuthentication(App));\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"pure-swipe\";\r\nimport App from \"./App\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nimport \"./index.scss\";\r\n\r\nReactDOM.render(\r\n  <Router basename={process.env.PUBLIC_URL}>\r\n    <App />\r\n  </Router>,\r\n  document.getElementById(\"root\")\r\n);\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}